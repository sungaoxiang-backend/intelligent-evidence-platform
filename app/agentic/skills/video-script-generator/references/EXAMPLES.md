# 视频脚本生成示例

本文档提供完整的脚本生成示例，展示从输入到输出的完整流程。

**重要更新**：
1. 技能默认输出 **带边界标记的 JSON 格式**，便于主 Agent 和应用程序解析
2. JSON 输出将最终脚本(`final_script`)与制作日志(`metadata`)完全分离
3. 使用 `<skill-output>` 标记包裹结构化输出，标记外的内容应被忽略

---

## 输出协议说明

### 边界标记格式

```
<skill-output type="video-script" schema-version="1.0.0">
{JSON 内容}
</skill-output>
```

### 主 Agent 解析方式

```python
import re
import json

def parse_skill_output(raw_output: str) -> dict:
    pattern = r'<skill-output[^>]*>([\s\S]*?)</skill-output>'
    match = re.search(pattern, raw_output)
    if match:
        return json.loads(match.group(1).strip())
    raise ValueError("No skill-output marker found")
```

---

## JSON 输出示例（默认格式）

### 示例：Type A（案件复盘）

#### 输入内容

```
我们最近处理了一个供应商货款纠纷的案例。

A公司给B公司供货，合同金额30万，B公司收货后一直拖欠货款，
已经拖了8个月。A公司老板很着急，觉得自己有合同、有验收单、
有发票，这钱肯定能要回来，就起诉了B公司。

结果官司赢了，但拿不到钱。我们一查，B公司账户里没钱，
法人也不露面。原来B公司早就变更了法人，原法人失联，
新法人是挂名的，公司账户半年没有流水了。

A公司老板傻眼了：合同签了、官司赢了，钱还是要不到？

这个案例告诉我们：合同不是护身符，主体是空壳，
签了也是白签。回款前要先查对方的资产情况，
否则就是白忙。
```

#### 完整输出（带边界标记）

```
<skill-output type="video-script" schema-version="1.0.0">
{
  "version": "1.0.0",
  "script_type": "A",
  ... (完整 JSON，见下方)
}
</skill-output>
```

#### JSON 内容详情

```json
{
  "version": "1.0.0",
  "script_type": "A",
  "final_script": {
    "title": "供应商货款拖了8个月，30万要不回来，问题出在哪？",
    "segments": [
      {
        "section": "hook",
        "text": "供应商货款拖了8个月，30万要不回来，问题出在哪？",
        "notes": "制造紧张感，引入案例"
      },
      {
        "section": "slot_1",
        "text": "他以为有合同、有验收单、有发票，这钱肯定能要回来。",
        "notes": "误判点：当事人过度自信"
      },
      {
        "section": "slot_2",
        "text": "但实际输在主体：对方公司早就变更了法人，原法人失联，新法人是挂名的，公司账户半年没流水了。",
        "notes": "真卡点：主体缺口"
      },
      {
        "section": "slot_3",
        "text": "记住：合同不是护身符，主体是空壳，签了也是白签。",
        "notes": "一句规则：敢劝退"
      },
      {
        "section": "slot_4",
        "text": "私信【评估】，领《回款判断尺子卡》，看看你属于A类稳拿、B类能谈、还是C类白忙。",
        "notes": "下一步动作"
      },
      {
        "section": "closing",
        "text": "别白忙，先用尺子看门槛。",
        "notes": "收口口径"
      }
    ],
    "full_text": "供应商货款拖了8个月，30万要不回来，问题出在哪？\n\n他以为有合同、有验收单、有发票，这钱肯定能要回来。\n但实际输在主体：对方公司早就变更了法人，原法人失联，新法人是挂名的，公司账户半年没流水了。\n\n记住：合同不是护身符，主体是空壳，签了也是白签。\n\n私信【评估】，领《回款判断尺子卡》，看看你属于A类稳拿、B类能谈、还是C类白忙。\n\n别白忙，先用尺子看门槛。",
    "word_count": 198,
    "estimated_duration": 75
  },
  "metadata": {
    "style_analysis": {
      "persona_and_audience": {
        "summary": "专业律师+警示者双重身份",
        "rules": [
          "开头用'我们处理了一个案例'立专业人设",
          "全文用'你'称呼观众，拉近距离",
          "站位是'我替你踩过坑，我提醒你'"
        ],
        "sentence_patterns": [
          "我们最近处理了一个...",
          "这个案例告诉我们..."
        ]
      },
      "tone_and_emotion": {
        "summary": "警示型情绪曲线",
        "rules": [
          "开头用案例制造紧张感（货款拖8个月、30万要不回来）",
          "中段用'以为...实际...'制造反差，强化紧张",
          "结尾给出警示性结论，缓解紧张并引导行动"
        ],
        "sentence_patterns": [
          "拖了8个月，30万要不回来",
          "A公司老板觉得...结果..."
        ]
      },
      "rhythm_and_syntax": {
        "summary": "短句为主，快节奏",
        "rules": [
          "80%是短句（5-15字）",
          "用逗号控制呼吸节奏",
          "用'以为...实际...'制造反差"
        ],
        "sentence_patterns": [
          "货款拖了8个月。30万要不回来。",
          "他以为有合同就稳了。但实际输在主体。"
        ]
      },
      "vocabulary": {
        "summary": "大白话为主，术语用类比解释",
        "rules": [
          "优先大白话：'空壳公司'代替'无资产运营主体'",
          "用'记住：'强调结论",
          "用'别白忙'制造紧迫感"
        ],
        "sentence_patterns": [
          "什么叫主体缺口？就是对方公司是个空壳",
          "记住：合同不是护身符"
        ]
      },
      "structure": {
        "summary": "标准三段式",
        "rules": [
          "开头：案例钩子（5秒）",
          "中段：误判点+真卡点（15秒）",
          "结尾：规则+CTA（10秒）"
        ],
        "sentence_patterns": [
          "货款拖了8个月，30万要不回来，问题出在哪？",
          "他以为...但实际...",
          "记住：...私信【评估】..."
        ]
      },
      "reasoning": {
        "summary": "故事先行型",
        "rules": [
          "先讲案例：货款拖了8个月",
          "再揭示真相：实际输在主体",
          "最后总结：记住规则"
        ],
        "sentence_patterns": [
          "他以为有合同就稳了",
          "但实际输在主体"
        ]
      },
      "cta_and_guidance": {
        "summary": "引导式CTA",
        "rules": [
          "CTA具体：私信【评估】领《回款判断尺子卡》",
          "价值明确：自查A/B/C+缺口Top3",
          "语气引导：不要命令，要邀请"
        ],
        "sentence_patterns": [
          "私信【评估】，领《回款判断尺子卡》"
        ]
      }
    },
    "system_instruction": "你是一个专业的回款律师，擅长用真实案例警示观众避免踩坑。你的任务是将案例转化为60-90秒的口播短视频脚本。\n\n脚本结构必须按以下顺序：\n1. 开头钩子（5秒）：用\"什么交易+拖了多久+多少钱\"制造紧张感\n2. 误判点（5秒）：用\"他以为...\"指出过度自信的点\n3. 真卡点（10秒）：用\"但实际输在...\"揭示真相，明确缺口类型\n4. 一句规则（5秒）：用\"记住：\"下判断、敢劝退\n5. CTA（10秒）：私信【评估】领《回款判断尺子卡》\n6. 收口：用\"别白忙，先用尺子看门槛\"收尾\n\n口语要求：\n- 短句为主，平均句长10-15字\n- 用逗号控制节奏，一个观点一段\n- 多用\"他以为...但实际...\"制造反差\n- 优先大白话，术语必解释",
    "generation_info": {
      "script_type": "A",
      "template_used": "Type_A_Case_Review",
      "generated_at": "2026-01-22T14:30:00Z",
      "input_summary": "供应商货款纠纷案例：30万拖了8个月，输在主体缺口",
      "model_version": "claude-sonnet-4-5"
    }
  },
  "templates": {
    "hooks": [
      "XX拖了X个月，XX万要不回来，问题出在哪？",
      "XX万成了坏账，原因可能你想不到",
      "为什么你的XX要不到？可能你从一开始就错了"
    ],
    "transitions": [
      "他以为...但实际...",
      "问题出在哪？",
      "很多人觉得...但..."
    ],
    "ctas": [
      "私信【评估】，领《回款判断尺子卡》，看看你属于A类稳拿、B类能谈、还是C类白忙。别白忙，先用尺子看门槛。",
      "私信【评估】，领《回款判断尺子卡》，自查你缺的是哪3条。别白忙，先用尺子看门槛。",
      "评论区扣'尺子'，发给你自查工具，先看门槛再决定要不要追。别白忙，先用尺子看门槛。"
    ]
  }
}
```

#### 使用 JSON 输出（主 Agent 集成）

```python
import re
import json

# 1. 从 Skill 输出中提取结构化数据
def parse_skill_output(raw_output: str) -> dict:
    """提取边界标记内的 JSON"""
    pattern = r'<skill-output[^>]*>([\s\S]*?)</skill-output>'
    match = re.search(pattern, raw_output)
    if not match:
        raise ValueError("No skill-output marker found")
    return json.loads(match.group(1).strip())

# 2. 解析输出
data = parse_skill_output(skill_raw_output)

# 3. 提取干净脚本（用于前端主展示区）
script = data['final_script']['full_text']
print(script)
# 输出：
# 供应商货款拖了8个月，30万要不回来，问题出在哪？
# ...

# 4. 获取脚本元数据
print(f"字数: {data['final_script']['word_count']}")  # 字数: 198
print(f"预估时长: {data['final_script']['estimated_duration']}秒")  # 预估时长: 75秒

# 5. 提取制作过程（用于前端折叠区）
process_metadata = {
    "scriptType": data['script_type'],
    "styleAnalysis": data['metadata']['style_analysis'],
    "generationInfo": data['metadata']['generation_info'],
}

# 6. 提取模板库（用于前端折叠区）
templates = data['templates']
```

---

## Markdown 输出示例（兼容格式）

### 添加 `--format markdown` 获取 Markdown 输出

**输入**: "把这篇文章做成视频脚本 --format markdown"

**输出**: 以下三部分 Markdown 格式

---

## 示例1：Type A（案件复盘）

### 输入内容（用户提供的文章）

```
我们最近处理了一个供应商货款纠纷的案例。

A公司给B公司供货，合同金额30万，B公司收货后一直拖欠货款，
已经拖了8个月。A公司老板很着急，觉得自己有合同、有验收单、
有发票，这钱肯定能要回来，就起诉了B公司。

结果官司赢了，但拿不到钱。我们一查，B公司账户里没钱，
法人也不露面。原来B公司早就变更了法人，原法人失联，
新法人是挂名的，公司账户半年没有流水了。

A公司老板傻眼了：合同签了、官司赢了，钱还是要不到？

这个案例告诉我们：合同不是护身符，主体是空壳，
签了也是白签。回款前要先查对方的资产情况，
否则就是白忙。
```

---

### 输出结果

## Part A：风格画像报告

### 1. 人设与关系
- **特征总结**：专业律师+警示者双重身份
- **可操作规则**：
  1. 开头用"我们处理了一个案例"立专业人设
  2. 全文用"你"称呼观众，拉近距离
  3. 站位是"我替你踩过坑，我提醒你"
- **典型句式**：
  - "我们最近处理了一个..."
  - "这个案例告诉我们..."

### 2. 语气与情绪曲线
- **特征总结**：警示型情绪曲线
- **可操作规则**：
  1. 开头用案例制造紧张感（货款拖8个月、30万要不回来）
  2. 中段用"以为...实际..."制造反差，强化紧张
  3. 结尾给出警示性结论，缓解紧张并引导行动
- **典型句式**：
  - "拖了8个月，30万要不回来"
  - "A公司老板觉得...结果..."
  - "这个案例告诉我们..."

### 3. 口语节奏与句子结构
- **特征总结**：短句为主，快节奏
- **可操作规则**：
  1. 80%是短句（5-15字）
  2. 用逗号控制呼吸节奏
  3. 用"以为...实际..."制造反差
- **典型句式**：
  - "货款拖了8个月。30万要不回来。"
  - "他以为有合同就稳了。但实际输在主体。"

### 4. 用词与口头禅
- **特征总结**：大白话为主，术语用类比解释
- **可操作规则**：
  1. 优先大白话："空壳公司"代替"无资产运营主体"
  2. 用"记住："强调结论
  3. 用"别白忙"制造紧迫感
- **典型句式**：
  - "什么叫主体缺口？就是对方公司是个空壳"
  - "记住：合同不是护身符"

### 5. 脚本结构母版
- **特征总结**：标准三段式
- **可操作规则**：
  1. 开头：案例钩子（5秒）
  2. 中段：误判点+真卡点（15秒）
  3. 结尾：规则+CTA（10秒）
- **典型句式**：
  - "货款拖了8个月，30万要不回来，问题出在哪？"
  - "他以为...但实际..."
  - "记住：...私信【评估】..."

### 6. 论证与信息密度
- **特征总结**：故事先行型
- **可操作规则**：
  1. 先讲案例：货款拖了8个月
  2. 再揭示真相：实际输在主体
  3. 最后总结：记住规则
- **典型句式**：
  - "他以为有合同就稳了"
  - "但实际输在主体"

### 7. 互动与指令性
- **特征总结**：引导式CTA
- **可操作规则**：
  1. CTA具体：私信【评估】领《回款判断尺子卡》
  2. 价值明确：自查A/B/C+缺口Top3
  3. 语气引导：不要命令，要邀请
- **典型句式**：
  - "私信【评估】，领《回款判断尺子卡》"

---

## Part B：系统指令（约300字）

```
你是一个专业的回款律师，擅长用真实案例警示观众避免踩坑。
你的任务是将案例转化为60-90秒的口播短视频脚本。

脚本结构必须按以下顺序：
1. 开头钩子（5秒）：用"什么交易+拖了多久+多少钱"制造紧张感
2. 误判点（5秒）：用"他以为..."指出过度自信的点
3. 真卡点（10秒）：用"但实际输在..."揭示真相，明确缺口类型
4. 一句规则（5秒）：用"记住："下判断、敢劝退
5. CTA（10秒）：私信【评估】领《回款判断尺子卡》
6. 收口：用"别白忙，先用尺子看门槛"收尾

口语要求：
- 短句为主，平均句长10-15字
- 用逗号控制节奏，一个观点一段
- 多用"他以为...但实际..."制造反差
- 优先大白话，术语必解释

开头钩子模板：
- "XX拖了X个月，XX万要不回来，问题出在哪？"
- "XX万成了坏账，为什么？"

段落过渡模板：
- "他以为...但实际..."
- "问题出在哪？"

结尾CTA模板：
- "私信【评估】，领《回款判断尺子卡》"
- 收口用"别白忙，先用尺子看门槛"

禁忌：
- 不用专业术语，必须用大白话
- 不用"可能""大概"，要斩钉截铁
- 不写拍摄、镜头、BGM等视觉内容
```

---

## Part C：可直接套用的模板

### 脚本开头模板（Hook）
1. "XX拖了X个月，XX万要不回来，问题出在哪？"
2. "XX万成了坏账，原因可能你想不到"
3. "为什么你的XX要不到？可能你从一开始就错了"

### 段落过渡模板
1. "他以为...但实际..."
2. "问题出在哪？"
3. "很多人觉得...但..."

### 结尾CTA模板
1. "私信【评估】，领《回款判断尺子卡》，看看你属于A类稳拿、B类能谈、还是C类白忙。别白忙，先用尺子看门槛。"
2. "私信【评估】，领《回款判断尺子卡》，自查你缺的是哪3条。别白忙，先用尺子看门槛。"
3. "评论区扣'尺子'，发给你自查工具，先看门槛再决定要不要追。别白忙，先用尺子看门槛。"

---

## 生成的完整脚本

```
供应商货款拖了8个月，30万要不回来，问题出在哪？

他以为有合同、有验收单、有发票，这钱肯定能要回来。
但实际输在主体：对方公司早就变更了法人，原法人失联，新法人是挂名的，公司账户半年没流水了。

记住：合同不是护身符，主体是空壳，签了也是白签。

私信【评估】，领《回款判断尺子卡》，看看你属于A类稳拿、B类能谈、还是C类白忙。

别白忙，先用尺子看门槛。
```

---

## 示例2：Type B（咨询误解）

### 输入内容

```
很多用户问我：律师，我只有微信聊天记录，能起诉吗？

这个问题很常见。很多人以为有聊天记录就能起诉，
但其实这是错的。

聊天记录要能作为证据，必须包含三个要素：
明确的金额、明确的付款时间、对方的确认回复。

如果聊天记录没有这三个要素，起诉了也可能因为
证据不足被驳回，还要倒贴诉讼费。

所以大家要注意，不要以为有聊天记录就稳了，
要先自查聊天记录是否完整。
```

---

### 输出结果（简化版）

**Part A：风格画像报告**
- 人设：专业律师，用"律师告诉你"立人设
- 语气：问答型，开头直接抛问题
- 节奏：问答式，用"很多人以为...但其实..."制造反差
- 用词：大白话，用"三个要素"代替"证据三要件"
- 结构：问答→纠偏→后果→CTA
- 论证：结论先行，先说"这是错的"再解释
- CTA：引导式，"私信领自查工具"

**Part B：系统指令（略）**

**Part C：模板**

**开头Hook：**
1. "律师，XX能XX吗？这个问题80%的人都想错了"
2. "很多人问我：XX？答案可能和你想的不一样"

**过渡句：**
1. "很多人以为...但其实..."
2. "这是错的，因为..."

**CTA：**
1. "私信【评估】，领《回款判断尺子卡》，看看证据够不够。你先自查，再决定要不要投入。"

**完整脚本：**
```
律师，我只有微信聊天记录，能起诉吗？这个问题80%的人都想错了。

很多人以为有聊天记录就能起诉，但这是错把'聊天记录'当成'完整证据'。
正确应该看：聊天记录是否包含三个要素——明确的金额、明确的付款时间、对方的确认。
如果聊天记录缺了这三样，起诉了也可能因为证据不足被驳回，还要倒贴诉讼费。

自查一下：你的聊天记录里，有没有对方明确说'欠XX万，XX号前付'这句话？

私信【评估】，领《回款判断尺子卡》，看看证据够不够。

你先自查，再决定要不要投入。
```

---

## 示例3：Type C（缺口模板）

### 输入内容

```
回款最怕什么？不是对方不付，而是对方没能力付。

什么叫主体缺口？就是对方公司是个空壳，没有实际资产，
签了合同也拿不到钱。

不补这个缺口，合同签了也是废纸，起诉了也拿不到钱，
还要倒贴律师费和诉讼费。

最低门槛：对方账户里要有现金，或者名下有房产、车辆
能查封。

补齐方向：先查对方公司的资产情况，再看要不要继续合作。

自查一下：你合作的对方，账户里有没有钱？
```

---

### 输出结果（简化版）

**Part A：风格画像报告**
- 人设：警示者，用"回款最怕"制造紧张感
- 语气：警示型，开头强警示，结尾给方案
- 节奏：定义型，用"什么叫...？就是..."解释术语
- 用词：大白话，"空壳公司""废纸"
- 结构：警示→定义→后果→门槛→方向→CTA
- 论证：结论先行，先说"最怕什么"
- CTA：引导式，强调"对照""自查"

**Part B：系统指令（略）**

**Part C：模板**

**开头Hook：**
1. "回款最怕什么？不是XX，而是XX"
2. "XX最致命的缺口，你可能没想到"

**过渡句：**
1. "什么叫XX？就是..."
2. "不补这个缺口..."

**CTA：**
1. "私信【评估】，领《回款判断尺子卡》，对照看看你缺不缺这一条。先对照门槛，看你缺不缺这一条。"

**完整脚本：**
```
回款最怕什么？不是对方不付，而是对方没能力付。

什么叫主体缺口？就是对方公司是个空壳，没有实际资产，签了合同也拿不到钱。
不补这个缺口，合同签了也是废纸，起诉了也拿不到钱，还要倒贴律师费和诉讼费。

最低门槛：对方账户里要有现金，或者名下有房产、车辆能查封。
补齐方向：先查对方公司的资产情况，再看要不要继续合作。

自查一下：你合作的对方，账户里有没有钱？如果账户余额是0，别指望了。

私信【评估】，领《回款判断尺子卡》，对照看看你缺不缺这一条。

先对照门槛，看你缺不缺这一条。
```
