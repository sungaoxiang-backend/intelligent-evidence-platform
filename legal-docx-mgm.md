# 文书模板管理与生成系统 PRD

## 1. 产品概述

### 1.1 产品背景
为满足企业文书模板管理、在线编辑和批量生成需求，开发一套自主可控的文书模板管理系统。

### 1.2 产品目标
- 提供可视化的文书模板管理界面
- 支持在线编辑模板内容和占位符
- 实现基于模板的文书快速生成
- 保证文档格式的一致性和专业性

## 2. 功能需求

### 2.1 模板管理模块

#### 2.1.1 模板列表
- 左侧边栏显示所有模板
- 支持按名称搜索模板
- 显示模板状态（草稿/已发布）
- 点击模板立即在右侧预览

#### 2.1.2 模板预览
- 实时渲染模板内容
- 高亮显示占位符字段
- 保持原始文档格式样式
- 支持预览/编辑模式切换

#### 2.1.3 模板编辑
- 富文本编辑器（基于Tiptap）
- 支持文本格式设置
- 占位符插入和管理（{{field_name}}格式）
- 实时保存草稿功能

#### 2.1.4 模板状态管理
- 草稿状态：可编辑，不可用于生成
- 已发布状态：只读，可用于文书生成
- 状态切换权限控制

### 2.2 文书生成模块

#### 2.2.1 模板选择
- 仅显示已发布模板
- 支持模板分类和筛选
- 模板预览和基本信息展示

#### 2.2.2 表单填写
- 动态生成填写表单
- 根据字段类型提供对应输入组件
- 表单数据实时验证
- 支持保存填写进度

#### 2.2.3 文书生成
- 一键生成最终文档
- 支持DOCX格式下载
- 生成记录追踪
- 批量生成支持

## 3. 技术架构

### 3.1 前端技术栈
- Next.js
- Tiptap (富文本编辑器)
- Mammoth.js (DOCX转HTML)

### 3.2 后端技术栈
- FastAPI (Python Web框架)
- python-docx-template (文档生成)
- mammoth-python (文档解析)

### 3.3 数据存储
- PostgreSQL (元数据存储)
- 文件系统 (文档模板存储)
- COS(文档生成存储)
