2025-07-19 00:39:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 00:39:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0271秒
2025-07-19 00:39:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 00:39:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2664秒
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0014秒
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0012秒
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1239秒
2025-07-19 00:39:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0541秒
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0835秒
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 00:39:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 00:39:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1298秒
2025-07-19 00:39:28 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 00:39:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 00:39:28 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 00:39:28 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 00:39:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0635秒
2025-07-19 00:39:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1338秒
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.1014秒
2025-07-19 00:39:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0569秒
2025-07-19 00:39:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 00:39:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 00:39:30 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 00:39:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 00:39:30 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0994秒
2025-07-19 00:39:30 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0750秒
2025-07-19 12:33:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidences/v2/process
2025-07-19 12:33:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidences/v2/process - 状态码: 404 - 耗时: 0.0147秒
2025-07-19 12:34:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidences/v2/process
2025-07-19 12:34:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidences/v2/process - 状态码: 404 - 耗时: 0.0021秒
2025-07-19 12:45:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 12:45:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.0019秒
2025-07-19 12:45:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 12:45:04 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 用户名或密码不正确 - POST /api/v1/login/access-token
2025-07-19 12:45:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 401 - 耗时: 0.4291秒
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.3002秒
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0685秒
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:12 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0278秒
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0713秒
2025-07-19 12:45:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0960秒
2025-07-19 12:45:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0530秒
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0010秒
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0720秒
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0652秒
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0015秒
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 12:45:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 12:45:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0811秒
2025-07-19 12:45:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1123秒
2025-07-19 12:45:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 12:45:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 12:45:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 12:45:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0609秒
2025-07-19 12:45:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1230秒
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.0002秒
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0803秒
2025-07-19 12:45:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.0858秒
2025-07-19 12:45:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:22 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0466秒
2025-07-19 12:45:23 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:23 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 12:45:23 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0007秒
2025-07-19 12:45:23 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 12:45:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.0609秒
2025-07-19 12:45:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1715秒
2025-07-19 12:45:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=3
2025-07-19 12:45:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=3 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 12:45:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=3
2025-07-19 12:45:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=3 - 状态码: 307 - 耗时: 0.0233秒
2025-07-19 12:45:28 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=3
2025-07-19 12:45:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=3 - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 12:45:28 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=3
2025-07-19 12:45:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1595秒
2025-07-19 12:45:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=3 - 状态码: 200 - 耗时: 0.0891秒
2025-07-19 12:45:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 12:45:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0013秒
2025-07-19 12:45:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=5
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=5 - 状态码: 200 - 耗时: 0.0012秒
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=5
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=5 - 状态码: 307 - 耗时: 0.0021秒
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=5
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=5 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=5
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.3598秒
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.3479秒
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0530秒
2025-07-19 12:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=5 - 状态码: 200 - 耗时: 0.1371秒
2025-07-19 12:45:37 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:37 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 12:45:37 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0165秒
2025-07-19 12:45:37 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=7
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=7 - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.0865秒
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=7
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=7 - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=7
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=7 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=7
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1179秒
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0716秒
2025-07-19 12:45:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=7 - 状态码: 200 - 耗时: 0.0775秒
2025-07-19 12:45:41 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 12:45:41 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0680秒
2025-07-19 12:45:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/7
2025-07-19 12:45:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/7 - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 12:45:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: DELETE http://127.0.0.1:8000/api/v1/cases/7
2025-07-19 12:45:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: DELETE http://127.0.0.1:8000/api/v1/cases/7 - 状态码: 200 - 耗时: 0.0856秒
2025-07-19 12:45:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 12:45:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 12:45:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 12:45:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.0625秒
2025-07-19 14:31:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:31:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 14:31:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0053秒
2025-07-19 14:31:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0038秒
2025-07-19 14:31:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:31:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 14:31:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1526秒
2025-07-19 14:31:45 | ERROR | app.core.middleware:dispatch:67 - 请求异常: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 错误: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 14:31:45 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x1089ab7e0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10bcb07d0>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10bcb07d0>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x108c62ac0>
                 └ <asyncpg.connection.Connection object at 0x10bcb07d0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x108c627a0>
                 └ <asyncpg.connection.Connection object at 0x10bcb07d0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x10bcb07d0>
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
    return await waiter

asyncpg.exceptions.UndefinedColumnError: column evidences.individual_features does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1076ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x10887f020>
    └ <sqlalchemy.engine.base.Connection object at 0x10bca84a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x1089aab60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10b971540>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10bcf71c0 (otid=0x105f1b750) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10b971540>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x1089aa980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.individual_features does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.individual_features does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x10132a840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x10120ba60>
           └ <SpawnProcess name='SpawnProcess-278' parent=26469 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10120afc0>
    └ <SpawnProcess name='SpawnProcess-278' parent=26469 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x101b29760>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-278' parent=26469 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-278' parent=26469 started>
    │    └ <function subprocess_started at 0x101c3d080>
    └ <SpawnProcess name='SpawnProcess-278' parent=26469 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x101e99d90>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x101c3c400>
           │       │   └ <uvicorn.server.Server object at 0x101e99d90>
           │       └ <function run at 0x1017ce840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x101e89b60>
           │      └ <function Runner.run at 0x1018285e0>
           └ <asyncio.runners.Runner object at 0x101c7e8a0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x101ee5b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x101c7e8a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x101c7e4b0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc5cc50>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc5cc...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x105988e60>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x101c7e4b0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc5cc50>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc5cc...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc5cc50>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc5cc...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10bc0d820>
          └ <fastapi.applications.FastAPI object at 0x105988e60>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10bc4fec0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10bc5cc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x10bc0d670>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10bc0d820>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x103c39da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10b9a71d0>
    └ <contextlib._GeneratorContextManager object at 0x10bc5d2b0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10bc4fc40>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10bc5d160>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x10bc0d670>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x10bc0d670>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10bc5d160>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10bc4fc40>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10bc4f240>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10b9d4260>
          └ <app.core.middleware.LoggingMiddleware object at 0x10bc0d670>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'authorization': 'Bearer eyJh...
          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10bc4f240>
          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x10597c9a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10b9d4260>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10b9d4260>>, sen...
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10bc0d700>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10b9d4260>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10b9d4260>>, sen...
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10bc5fd40>
          │                            │    └ <fastapi.routing.APIRouter object at 0x105aed670>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10bc0d700>
          └ <function wrap_app_handling_exceptions at 0x103cd8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bc9b240>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x105aed670>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bc9b240>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x105aed670>>
          └ <fastapi.routing.APIRouter object at 0x105aed670>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bc9b240>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x103cd9d00>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bc9b240>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10b9832e0>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bc9b240>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10bc5fec0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10bc9b2e0>
          └ <function wrap_app_handling_exceptions at 0x103cd8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10bc9b420>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10bc4f380>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10bc9b2e0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10bc5fec0>
                     └ <function get_request_handler.<locals>.app at 0x10b9831a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x103cd8180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10bca81a0>, 'current_staff': <app.staffs.models.Staff object ...
                 │         └ <function read_evidences_with_cases at 0x1094d9c60>
                 └ Dependant(path_params=[], query_params=[ModelField(field_info=Query(0), name='skip', mode='validation'), ModelField(field_inf...

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/routers.py", line 52, in read_evidences_with_cases
    evidences, total = await evidence_service.get_multi_with_cases_with_count(
                             │                └ <function get_multi_with_cases_with_count at 0x1094d9260>
                             └ <module 'app.evidences.services' from '/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py'>

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py", line 160, in get_multi_with_cases_with_count
    total = await db.scalar(count_query)
                  │  │      └ <sqlalchemy.sql.selectable.Select object at 0x10bced220>
                  │  └ <function AsyncSession.scalar at 0x108702f20>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10bca81a0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 519, in scalar
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x105f6a0c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x10bcf71c0 (otid=0x105f1b750) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2413, in scalar
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x107ae7060>
           └ <sqlalchemy.orm.session.Session object at 0x10bca82f0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10795fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x107630a40>
             └ <sqlalchemy.engine.base.Connection object at 0x10bca84a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10bced220>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x107630d60>
           └ <sqlalchemy.engine.base.Connection object at 0x10bca84a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x107630f40>
          └ <sqlalchemy.engine.base.Connection object at 0x10bca84a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x107630fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x10bca84a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x107631260>
    └ <sqlalchemy.engine.base.Connection object at 0x10bca84a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1076ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x10887f020>
    └ <sqlalchemy.engine.base.Connection object at 0x10bca84a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x1089aab60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10b971540>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10bcf71c0 (otid=0x105f1b750) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10b971540>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x1089aa980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.individual_features does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10bcf8ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.individual_features does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 14:32:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:32:08 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1562秒
2025-07-19 14:32:08 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 14:32:08 | ERROR | app.core.middleware:dispatch:67 - 请求异常: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 错误: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 14:32:08 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x1099637e0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cda7980>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cda7980>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x109b62ac0>
                 └ <asyncpg.connection.Connection object at 0x10cda7980>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x109b627a0>
                 └ <asyncpg.connection.Connection object at 0x10cda7980>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x10cda7980>
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
    return await waiter

asyncpg.exceptions.UndefinedColumnError: column evidences.individual_features does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1091ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837230>
    └ <sqlalchemy.engine.base.Connection object at 0x108718290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc713f0>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cdeb3c0 (otid=0x108a1b8d0) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc713f0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.individual_features does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.individual_features does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x104716840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x1045f7a60>
           └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1045f6fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x105441580>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
    │    └ <function subprocess_started at 0x105cfd080>
    └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x105d95d60>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x105cfc400>
           │       │   └ <uvicorn.server.Server object at 0x105d95d60>
           │       └ <function run at 0x104d12840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x105f49b60>
           │      └ <function Runner.run at 0x104d6c5e0>
           └ <asyncio.runners.Runner object at 0x105d3e4b0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x105fa5b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x105d3e4b0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x104a62cf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cd0e1e0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cd0e1...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10731a4e0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x104a62cf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cd0e1e0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cd0e1...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cd0e1e0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cd0e1...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cd0d790>
          └ <fastapi.applications.FastAPI object at 0x10731a4e0>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10cd9e700>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cd0e1...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cd0d790>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x108095da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10cca5a40>
    └ <contextlib._GeneratorContextManager object at 0x10cd2bc20>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cd9e7a0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10cd295b0>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10cd295b0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cd9e7a0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cd9eb60>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>
          └ <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'authorization': 'Bearer eyJh...
          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cd9eb60>
          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x10847c9a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>>, sen...
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cd0d760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>>, sen...
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10cd0f680>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1084bef30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cd0d760>
          └ <function wrap_app_handling_exceptions at 0x108134720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cd9efc0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1084bef30>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cd9efc0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1084bef30>>
          └ <fastapi.routing.APIRouter object at 0x1084bef30>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cd9efc0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x108135d00>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cd9efc0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10cc832e0>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cd9efc0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10cd5c080>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10cd9f380>
          └ <function wrap_app_handling_exceptions at 0x108134720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cd9f240>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cd9ff60>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10cd9f380>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10cd5c080>
                     └ <function get_request_handler.<locals>.app at 0x10cc831a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x108134180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cd5ecc0>, 'current_staff': <app.staffs.models.Staff object ...
                 │         └ <function read_evidences_with_cases at 0x10aed5c60>
                 └ Dependant(path_params=[], query_params=[ModelField(field_info=Query(0), name='skip', mode='validation'), ModelField(field_inf...

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/routers.py", line 52, in read_evidences_with_cases
    evidences, total = await evidence_service.get_multi_with_cases_with_count(
                             │                └ <function get_multi_with_cases_with_count at 0x10aed5260>
                             └ <module 'app.evidences.services' from '/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py'>

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py", line 160, in get_multi_with_cases_with_count
    total = await db.scalar(count_query)
                  │  │      └ <sqlalchemy.sql.selectable.Select object at 0x108718170>
                  │  └ <function AsyncSession.scalar at 0x1096bef20>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cd5ecc0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 519, in scalar
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x108a6a0c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x10cdeb3c0 (otid=0x108a1b8d0) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2413, in scalar
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1095e7060>
           └ <sqlalchemy.orm.session.Session object at 0x10cd5f3b0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10945fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x109130a40>
             └ <sqlalchemy.engine.base.Connection object at 0x108718290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x108718170>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x109130d60>
           └ <sqlalchemy.engine.base.Connection object at 0x108718290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x109130f40>
          └ <sqlalchemy.engine.base.Connection object at 0x108718290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x109130fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x108718290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x109131260>
    └ <sqlalchemy.engine.base.Connection object at 0x108718290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1091ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837230>
    └ <sqlalchemy.engine.base.Connection object at 0x108718290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc713f0>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cdeb3c0 (otid=0x108a1b8d0) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc713f0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.individual_features does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cdfc4c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.individual_features does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 14:32:12 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:32:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0988秒
2025-07-19 14:32:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:32:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 14:32:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0015秒
2025-07-19 14:32:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 14:32:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0012秒
2025-07-19 14:32:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 14:32:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 14:32:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 14:32:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 14:32:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.0986秒
2025-07-19 14:32:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:32:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0749秒
2025-07-19 14:32:17 | ERROR | app.core.middleware:dispatch:67 - 请求异常: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 错误: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 14:32:17 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x1099637e0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10d117200>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10d117200>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x109b62ac0>
                 └ <asyncpg.connection.Connection object at 0x10d117200>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x109b627a0>
                 └ <asyncpg.connection.Connection object at 0x10d117200>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x10d117200>
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
    return await waiter

asyncpg.exceptions.UndefinedColumnError: column evidences.individual_features does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1091ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837230>
    └ <sqlalchemy.engine.base.Connection object at 0x10d125940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc72110>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10d13a340 (otid=0x108a1b8d0) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc72110>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.individual_features does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.individual_features does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x104716840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x1045f7a60>
           └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1045f6fc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x105441580>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
    │    └ <function subprocess_started at 0x105cfd080>
    └ <SpawnProcess name='SpawnProcess-1' parent=90283 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x105d95d60>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x105cfc400>
           │       │   └ <uvicorn.server.Server object at 0x105d95d60>
           │       └ <function run at 0x104d12840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x105f49b60>
           │      └ <function Runner.run at 0x104d6c5e0>
           └ <asyncio.runners.Runner object at 0x105d3e4b0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x105fa5b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x105d3e4b0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x104a62cf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d124ef0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d124e...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10731a4e0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x104a62cf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d124ef0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d124e...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d124ef0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d124e...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cd0d790>
          └ <fastapi.applications.FastAPI object at 0x10731a4e0>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x105f671a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10d124e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cd0d790>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x108095da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10d120c70>
    └ <contextlib._GeneratorContextManager object at 0x10d124fb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cfdd940>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10d10d640>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10d10d640>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10cfdd940>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cfdd760>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>
          └ <app.core.middleware.LoggingMiddleware object at 0x10cd0d7f0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'authorization': 'Bearer eyJh...
          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10cfdd760>
          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x10847c9a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>>, sen...
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cd0d760>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cd0d5e0>>, sen...
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10d1251c0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1084bef30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cd0d760>
          └ <function wrap_app_handling_exceptions at 0x108134720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cfded40>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1084bef30>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cfded40>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1084bef30>>
          └ <fastapi.routing.APIRouter object at 0x1084bef30>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cfded40>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x108135d00>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cfded40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10cc832e0>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cfded40>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10d1253a0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10cfdee80>
          └ <function wrap_app_handling_exceptions at 0x108134720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cfdefc0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10cfdcf40>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10cfdee80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10d1253a0>
                     └ <function get_request_handler.<locals>.app at 0x10cc831a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x108134180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10d125640>, 'current_staff': <app.staffs.models.Staff object ...
                 │         └ <function read_evidences_with_cases at 0x10aed5c60>
                 └ Dependant(path_params=[], query_params=[ModelField(field_info=Query(0), name='skip', mode='validation'), ModelField(field_inf...

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/routers.py", line 52, in read_evidences_with_cases
    evidences, total = await evidence_service.get_multi_with_cases_with_count(
                             │                └ <function get_multi_with_cases_with_count at 0x10aed5260>
                             └ <module 'app.evidences.services' from '/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py'>

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py", line 160, in get_multi_with_cases_with_count
    total = await db.scalar(count_query)
                  │  │      └ <sqlalchemy.sql.selectable.Select object at 0x10d125c40>
                  │  └ <function AsyncSession.scalar at 0x1096bef20>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10d125640>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 519, in scalar
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x108a6a0c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x10d13a340 (otid=0x108a1b8d0) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2413, in scalar
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1095e7060>
           └ <sqlalchemy.orm.session.Session object at 0x10d125790>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10945fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x109130a40>
             └ <sqlalchemy.engine.base.Connection object at 0x10d125940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10d125c40>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x109130d60>
           └ <sqlalchemy.engine.base.Connection object at 0x10d125940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x109130f40>
          └ <sqlalchemy.engine.base.Connection object at 0x10d125940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x109130fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x10d125940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x109131260>
    └ <sqlalchemy.engine.base.Connection object at 0x10d125940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1091ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837230>
    └ <sqlalchemy.engine.base.Connection object at 0x10d125940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc72110>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10d13a340 (otid=0x108a1b8d0) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10cc72110>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.individual_features does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10d154760>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.individual_features does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.individual_features does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 14:32:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1591秒
2025-07-19 14:36:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-19 14:36:15 | INFO | app.evidences.routers:batch_create_evidences_with_classification:255 - 接收批量创建证据+分类请求: 案件ID=2, 文件数量=2
2025-07-19 14:36:15 | WARNING | app.evidences.routers:batch_create_evidences_with_classification:267 - 案件不存在: ID=2
2025-07-19 14:36:15 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 案件不存在 - POST /api/v1/evidences/batch-with-classification
2025-07-19 14:36:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 404 - 耗时: 0.1793秒
2025-07-19 14:36:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-19 14:36:19 | INFO | app.evidences.routers:batch_create_evidences_with_classification:255 - 接收批量创建证据+分类请求: 案件ID=1, 文件数量=2
2025-07-19 14:36:19 | WARNING | app.evidences.routers:batch_create_evidences_with_classification:267 - 案件不存在: ID=1
2025-07-19 14:36:19 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 案件不存在 - POST /api/v1/evidences/batch-with-classification
2025-07-19 14:36:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 404 - 耗时: 0.0509秒
2025-07-19 14:36:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-19 14:36:30 | INFO | app.evidences.routers:batch_create_evidences_with_classification:255 - 接收批量创建证据+分类请求: 案件ID=5, 文件数量=2
2025-07-19 14:36:31 | INFO | app.evidences.routers:batch_create_evidences_with_classification:275 - 开始批量创建证据+分类: 案件ID=5, 文件数量=2
2025-07-19 14:36:31 | INFO | app.evidences.services:batch_create:189 - 开始批量创建证据: 案件ID=5, 文件数量=2
2025-07-19 14:36:31 | DEBUG | app.evidences.services:batch_create:194 - 处理第1个文件: 银行卡.jpg, 大小: 488408
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: jpg
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 488408 字节
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 银行卡.jpg, disposition=inline
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 银行卡.jpg, 文件夹: images
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 488408 字节
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719143631_银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719143631_银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719143631_银行卡.jpg, disposition=inline
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719143631_银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 银行卡.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 银行卡.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 银行卡.jpg
2025-07-19 14:36:31 | DEBUG | app.evidences.services:batch_create:194 - 处理第2个文件: 营业执照.png, 大小: 369499
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 营业执照.png
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 369499 字节
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 营业执照.png, disposition=inline
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 营业执照.png, 文件夹: images
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 369499 字节
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719143631_营业执照.png
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719143631_营业执照.png
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719143631_营业执照.png, disposition=inline
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719143631_营业执照.png
2025-07-19 14:36:31 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_营业执照.png
2025-07-19 14:36:31 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 营业执照.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_营业执照.png
2025-07-19 14:36:31 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 营业执照.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_营业执照.png
2025-07-19 14:36:31 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 营业执照.png
2025-07-19 14:36:31 | ERROR | app.evidences.services:batch_create:228 - 数据库提交失败: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column "status" of relation "evidences" violates not-null constraint
DETAIL:  Failing row contains (23, https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/i..., 银行卡.jpg, 488408, jpg, 5, 2025-07-19 14:36:30.990899+08, 2025-07-19 14:36:30.990899+08, null, null, null, null, null, null, null, null).
[SQL: INSERT INTO evidences (file_url, file_name, file_size, file_extension, case_id) SELECT p0::VARCHAR, p1::VARCHAR, p2::INTEGER, p3::VARCHAR, p4::INTEGER FROM (VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::VARCHAR, $5::INTEGER, 0), ($6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::INTEGER, 1)) AS imp_sen(p0, p1, p2, p3, p4, sen_counter) ORDER BY sen_counter RETURNING evidences.id, evidences.created_at, evidences.updated_at, evidences.id AS id__1]
[parameters: ('https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_银行卡.jpg', '银行卡.jpg', 488408, 'jpg', 5, 'https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_营业执照.png', '营业执照.png', 369499, 'png', 5)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-19 14:36:31 | ERROR | app.evidences.services:batch_create:230 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                      ^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
           ^^^^^^^^^^^^^^^^^^^^^^^^
  File "asyncpg/protocol/protocol.pyx", line 206, in bind_execute
asyncpg.exceptions.NotNullViolationError: null value in column "status" of relation "evidences" violates not-null constraint
DETAIL:  Failing row contains (23, https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/i..., 银行卡.jpg, 488408, jpg, 5, 2025-07-19 14:36:30.990899+08, 2025-07-19 14:36:30.990899+08, null, null, null, null, null, null, null, null).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column "status" of relation "evidences" violates not-null constraint
DETAIL:  Failing row contains (23, https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/i..., 银行卡.jpg, 488408, jpg, 5, 2025-07-19 14:36:30.990899+08, 2025-07-19 14:36:30.990899+08, null, null, null, null, null, null, null, null).

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py", line 221, in batch_create
    await db.commit()
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             ^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
  File "<string>", line 2, in commit
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
  File "<string>", line 2, in _prepare_impl
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1143, in _emit_insert_statements
    result = connection.execute(
             ^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           ^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          ^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1840, in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2122, in _exec_insertmany_context
    self._handle_dbapi_exception(
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2114, in _exec_insertmany_context
    dialect.do_execute(
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column "status" of relation "evidences" violates not-null constraint
DETAIL:  Failing row contains (23, https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/i..., 银行卡.jpg, 488408, jpg, 5, 2025-07-19 14:36:30.990899+08, 2025-07-19 14:36:30.990899+08, null, null, null, null, null, null, null, null).
[SQL: INSERT INTO evidences (file_url, file_name, file_size, file_extension, case_id) SELECT p0::VARCHAR, p1::VARCHAR, p2::INTEGER, p3::VARCHAR, p4::INTEGER FROM (VALUES ($1::VARCHAR, $2::VARCHAR, $3::INTEGER, $4::VARCHAR, $5::INTEGER, 0), ($6::VARCHAR, $7::VARCHAR, $8::INTEGER, $9::VARCHAR, $10::INTEGER, 1)) AS imp_sen(p0, p1, p2, p3, p4, sen_counter) ORDER BY sen_counter RETURNING evidences.id, evidences.created_at, evidences.updated_at, evidences.id AS id__1]
[parameters: ('https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_银行卡.jpg', '银行卡.jpg', 488408, 'jpg', 5, 'https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719143631_营业执照.png', '营业执照.png', 369499, 'png', 5)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

2025-07-19 14:36:31 | ERROR | app.evidences.routers:batch_create_evidences_with_classification:289 - 批量创建证据+分类异常: 400: 所有文件上传失败
2025-07-19 14:36:31 | ERROR | app.evidences.routers:batch_create_evidences_with_classification:291 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/routers.py", line 281, in batch_create_evidences_with_classification
    raise HTTPException(
fastapi.exceptions.HTTPException: 400: 所有文件上传失败

2025-07-19 14:36:31 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 批量创建证据+分类失败: 400: 所有文件上传失败 - POST /api/v1/evidences/batch-with-classification
2025-07-19 14:36:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 500 - 耗时: 0.8820秒
2025-07-19 14:54:48 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/batch-process
2025-07-19 14:54:48 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/batch-process - 状态码: 404 - 耗时: 0.0023秒
2025-07-19 14:55:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 14:55:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 404 - 耗时: 0.0020秒
2025-07-19 14:55:18 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 14:55:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 404 - 耗时: 0.0004秒
2025-07-19 14:55:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:55:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0023秒
2025-07-19 14:55:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 14:55:39 | ERROR | app.core.middleware:dispatch:67 - 请求异常: GET http://127.0.0.1:8000/api/v1/staffs/me - 错误: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-19 14:55:39 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2522, in get_property
    return self._props[key]
           │    │      └ 'evidences_v2'
           │    └ {'user': <_RelationshipDeclared at 0x106cb3bb0; user>, 'evidences': <_RelationshipDeclared at 0x106cb3d90; evidences>, 'id': ...
           └ <Mapper at 0x106c9a9c0; Case>

KeyError: 'evidences_v2'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x100abe840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x1008c7a60>
           └ <SpawnProcess name='SpawnProcess-81' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x1008c6fc0>
    └ <SpawnProcess name='SpawnProcess-81' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x1011e5580>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-81' parent=90283 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-81' parent=90283 started>
    │    └ <function subprocess_started at 0x1012f9080>
    └ <SpawnProcess name='SpawnProcess-81' parent=90283 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x101559b50>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x1012f8400>
           │       │   └ <uvicorn.server.Server object at 0x101559b50>
           │       └ <function run at 0x100e8a840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x101545b60>
           │      └ <function Runner.run at 0x100ee45e0>
           └ <asyncio.runners.Runner object at 0x100c12cf0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1015a1b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x100c12cf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x100a9b830>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x12243d370>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x12243d3...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x104888fe0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x100a9b830>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x12243d370>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x12243d3...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x12243d370>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x12243d3...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x121ed91f0>
          └ <fastapi.applications.FastAPI object at 0x104888fe0>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x12243ba60>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x12243d3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x121fe9910>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x121ed91f0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x103539da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [InvalidRequestError("Mapper 'Mapper[Case(cases)]' has no property 'evidenc...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x121f37ed0>
    └ <contextlib._GeneratorContextManager object at 0x12243d880>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x12243b740>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x12243d6a0>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x121fe9910>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x121fe9910>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x12243d6a0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x12243b740>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ InvalidRequestError("Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other ...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x12243b6a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x121fe9ca0>
          └ <app.core.middleware.LoggingMiddleware object at 0x121fe9910>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'authorization': 'Bearer eyJh...
          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x12243b6a0>
          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x10487c9a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x121fe9ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x121fe9ca0>>, sen...
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x121fe9850>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x121fe9ca0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x121fe9ca0>>, sen...
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x12243daf0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x104804cb0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x121fe9850>
          └ <function wrap_app_handling_exceptions at 0x1035d8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x12243b240>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x104804cb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x12243b240>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x104804cb0>>
          └ <fastapi.routing.APIRouter object at 0x104804cb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x12243b240>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x1035d9d00>
          └ APIRoute(path='/api/v1/staffs/me', name='read_staff_me', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x12243b240>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x121e518a0>
          └ APIRoute(path='/api/v1/staffs/me', name='read_staff_me', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x12243b240>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x12243dc70>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x12243b1a0>
          └ <function wrap_app_handling_exceptions at 0x1035d8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x12243afc0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x12243bc40>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x12243b1a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x12243dc70>
                     └ <function get_request_handler.<locals>.app at 0x121e51940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x1035b5d00>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
                   │      │             └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x121fe9f70>, 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ey...
                   │      └ SolvedDependency(values={'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x121fe9f70>, 'token': 'eyJhbGciOiJIUzI...
                   └ <function get_current_staff at 0x104b25e40>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/deps.py", line 41, in get_current_staff
    staff = await db.get(Staff, token_data.sub)
                  │  │   │      │          └ 1
                  │  │   │      └ TokenPayload(sub=1)
                  │  │   └ <class 'app.staffs.models.Staff'>
                  │  └ <function AsyncSession.get at 0x1059bb240>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x121fe9f70>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 606, in get
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x104e6a0c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x122430640 (otid=0x104e1b690) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3694, in get
    return self._get_impl(
           │    └ <function Session._get_impl at 0x1058f1300>
           └ <sqlalchemy.orm.session.Session object at 0x121c6fd70>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3873, in _get_impl
    return db_load_fn(
           └ <function load_on_pk_identity at 0x1057a0220>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
    │       └ <function Session.execute at 0x1058e7380>
    └ <sqlalchemy.orm.session.Session object at 0x121c6fd70>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1058e7060>
           └ <sqlalchemy.orm.session.Session object at 0x121c6fd70>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10575fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x105530a40>
             └ <sqlalchemy.engine.base.Connection object at 0x12243e180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x121cda060>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x105530d60>
           └ <sqlalchemy.engine.base.Connection object at 0x12243e180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1629, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                │    └ <function ClauseElement._compile_w_cache at 0x105139260>
                                                └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 711, in _compile_w_cache
    compiled_sql = self._compiler(
                   │    └ <function CompilerElement._compiler at 0x105138220>
                   └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           │       │                  │        │       └ {'cache_key': CacheKey(key=('0', <class 'sqlalchemy.sql.selectable.Select'>, '_raw_columns', ((Table('staffs', MetaData(), Co...
           │       │                  │        └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
           │       │                  └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x105c37290>
           │       └ <class 'sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg'>
           └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x105c37290>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 1446, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    │        │        │     │        │            └ {'schema_translate_map': None}
    │        │        │     │        └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
    │        │        │     └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x105c37290>
    │        │        └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x12243c650>
    │        └ <function Compiled.__init__ at 0x10539b060>
    └ <class 'sqlalchemy.sql.compiler.Compiled'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 886, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
    │    │        │    │       │    │            └ immutabledict({})
    │    │        │    │       │    └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
    │    │        │    │       └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x12243c650>
    │    │        │    └ <function Compiled.process at 0x10539b420>
    │    │        └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x12243c650>
    │    └ ''
    └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x12243c650>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 932, in process
    return obj._compiler_dispatch(self, **kwargs)
           │   │                  │       └ {}
           │   │                  └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x12243c650>
           │   └ <function Visitable._generate_compiler_dispatch.<locals>._compiler_dispatch at 0x1053687c0>
           └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           │    │       └ {}
           │    └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
           └ <bound method SQLCompiler.visit_select of <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x12243c650>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 4728, in visit_select
    compile_state = select_stmt._compile_state_factory(
                    │           └ <bound method CompileState.create_for_statement of <class 'sqlalchemy.sql.base.CompileState'>>
                    └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 687, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           │     │                    │          │           └ {'within_columns_clause': False}
           │     │                    │          └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x12243c650>
           │     │                    └ <sqlalchemy.sql.selectable.Select object at 0x121cda060>
           │     └ <classmethod(<function ORMCompileState.create_for_statement at 0x10575fe20>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           │   └ <classmethod(<function ORMSelectCompileState._create_orm_context at 0x1057991c0>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    │            └ <classmethod(<function _QueryEntity.to_compile_state at 0x10579a8e0>)>
    └ <class 'sqlalchemy.orm.context._QueryEntity'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2628, in to_compile_state
    _MapperEntity(
    └ <class 'sqlalchemy.orm.context._MapperEntity'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2708, in __init__
    entity._post_inspect
    │      └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x105810da0>
    └ <Mapper at 0x1059bd370; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
    │   │        │    │                    │    │    └ <Mapper at 0x1059bd370; Staff>
    │   │        │    │                    │    └ <function Mapper._post_inspect at 0x105816340>
    │   │        │    │                    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x105810da0>
    │   │        │    └ '_post_inspect'
    │   │        └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x105810da0>
    │   └ <attribute '__dict__' of 'Mapper' objects>
    └ <Mapper at 0x1059bd370; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2724, in _post_inspect
    self._check_configure()
    │    └ <function Mapper._check_configure at 0x105815580>
    └ <Mapper at 0x1059bd370; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x1048a7860>
    │                      └ <Mapper at 0x1059bd370; Staff>
    └ <function _configure_registries at 0x105819300>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x105819440>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x105815440>
    └ <Mapper at 0x121d7e6c0; EvidenceV2>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2418, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x1056f8c20>
    └ <_RelationshipDeclared at 0x121dfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/interfaces.py", line 589, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x1057dbce0>
    └ <_RelationshipDeclared at 0x121dfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1661, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x105808720>
    └ <_RelationshipDeclared at 0x121dfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 2145, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'evidences_v2'
    │    │                     └ <_RelationshipDeclared at 0x121dfcff0; case>
    │    └ <function RelationshipProperty._add_reverse_property at 0x1057dbb00>
    └ <_RelationshipDeclared at 0x121dfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1592, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'evidences_v2'
            │    │      └ <function Mapper.get_property at 0x105815d00>
            │    └ <Mapper at 0x106c9a9c0; Case>
            └ <_RelationshipDeclared at 0x121dfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2524, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from '/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-19 14:55:41 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/
2025-07-19 14:55:41 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/ - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 14:55:43 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/docs
2025-07-19 14:55:43 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/docs - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 14:55:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/openapi.json
2025-07-19 14:55:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/openapi.json - 状态码: 200 - 耗时: 0.0453秒
2025-07-19 14:56:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/docs
2025-07-19 14:56:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/docs - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 14:56:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/openapi.json
2025-07-19 14:56:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/openapi.json - 状态码: 200 - 耗时: 0.0394秒
2025-07-19 14:56:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 14:56:30 | ERROR | app.core.middleware:dispatch:67 - 请求异常: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 错误: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-19 14:56:30 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2522, in get_property
    return self._props[key]
           │    │      └ 'evidences_v2'
           │    └ {'user': <_RelationshipDeclared at 0x104e7fbb0; user>, 'evidences': <_RelationshipDeclared at 0x104e7fd90; evidences>, 'id': ...
           └ <Mapper at 0x104e6a840; Case>

KeyError: 'evidences_v2'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x100a36840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x100917a60>
           └ <SpawnProcess name='SpawnProcess-83' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x100916fc0>
    └ <SpawnProcess name='SpawnProcess-83' parent=90283 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x10110d580>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-83' parent=90283 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-83' parent=90283 started>
    │    └ <function subprocess_started at 0x101221080>
    └ <SpawnProcess name='SpawnProcess-83' parent=90283 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x101481b50>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x101220400>
           │       │   └ <uvicorn.server.Server object at 0x101481b50>
           │       └ <function run at 0x100db2840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x10146db60>
           │      └ <function Runner.run at 0x100e0c5e0>
           └ <asyncio.runners.Runner object at 0x100b3acf0>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x1014c9b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x100b3acf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x100a13830>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107e48140>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107e481...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1031e1ac0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x100a13830>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107e48140>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107e481...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107e48140>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107e481...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x107cedb20>
          └ <fastapi.applications.FastAPI object at 0x1031e1ac0>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107e3f600>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107e481...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x107ced970>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x107cedb20>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x1031d5da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [InvalidRequestError("Mapper 'Mapper[Case(cases)]' has no property 'evidenc...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x107c37510>
    └ <contextlib._GeneratorContextManager object at 0x107e48710>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107e3f9c0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x107e48620>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x107ced970>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x107ced970>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x107e48620>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107e3f9c0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ InvalidRequestError("Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other ...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107e3f4c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x107c0ef90>
          └ <app.core.middleware.LoggingMiddleware object at 0x107ced970>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107e3f4c0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x107ceda60>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x107c0ef90>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107e3f4c0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x107e4bc20>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1037def30>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x107ceda60>
          └ <function wrap_app_handling_exceptions at 0x103274720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107e3f880>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1037def30>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107e3f880>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1037def30>>
          └ <fastapi.routing.APIRouter object at 0x1037def30>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107e3f880>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x103275d00>
          └ APIRoute(path='/api/v1/evidence-v2/batch-process', name='batch_process_evidence', methods=['POST'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107e3f880>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x107c7b420>
          └ APIRoute(path='/api/v1/evidence-v2/batch-process', name='batch_process_evidence', methods=['POST'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107e3f880>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x107e4bad0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x107e3f7e0>
          └ <function wrap_app_handling_exceptions at 0x103274720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107e3f6a0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e3fb00>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x107e3f7e0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x107e4bad0>
                     └ <function get_request_handler.<locals>.app at 0x107c7b240>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x103251d00>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
                   │      │             └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x107ed1130>, 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ey...
                   │      └ SolvedDependency(values={'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x107ed1130>, 'token': 'eyJhbGciOiJIUzI...
                   └ <function get_current_staff at 0x103a25e40>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/deps.py", line 41, in get_current_staff
    staff = await db.get(Staff, token_data.sub)
                  │  │   │      │          └ 1
                  │  │   │      └ TokenPayload(sub=1)
                  │  │   └ <class 'app.staffs.models.Staff'>
                  │  └ <function AsyncSession.get at 0x1047bb240>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x107ed1130>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 606, in get
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x103c6a0c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x107eb3d40 (otid=0x103c1b4e0) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3694, in get
    return self._get_impl(
           │    └ <function Session._get_impl at 0x1046f1300>
           └ <sqlalchemy.orm.session.Session object at 0x107ed1100>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3873, in _get_impl
    return db_load_fn(
           └ <function load_on_pk_identity at 0x1045a0220>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
    │       └ <function Session.execute at 0x1046e7380>
    └ <sqlalchemy.orm.session.Session object at 0x107ed1100>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1046e7060>
           └ <sqlalchemy.orm.session.Session object at 0x107ed1100>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10455fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x104230a40>
             └ <sqlalchemy.engine.base.Connection object at 0x107ed0cb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x104230d60>
           └ <sqlalchemy.engine.base.Connection object at 0x107ed0cb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1629, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                │    └ <function ClauseElement._compile_w_cache at 0x104039260>
                                                └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 711, in _compile_w_cache
    compiled_sql = self._compiler(
                   │    └ <function CompilerElement._compiler at 0x104038220>
                   └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           │       │                  │        │       └ {'cache_key': CacheKey(key=('0', <class 'sqlalchemy.sql.selectable.Select'>, '_raw_columns', ((Table('staffs', MetaData(), Co...
           │       │                  │        └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
           │       │                  └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x104a37110>
           │       └ <class 'sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg'>
           └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x104a37110>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 1446, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    │        │        │     │        │            └ {'schema_translate_map': None}
    │        │        │     │        └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
    │        │        │     └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x104a37110>
    │        │        └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x1076f2780>
    │        └ <function Compiled.__init__ at 0x10419b060>
    └ <class 'sqlalchemy.sql.compiler.Compiled'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 886, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
    │    │        │    │       │    │            └ immutabledict({})
    │    │        │    │       │    └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
    │    │        │    │       └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x1076f2780>
    │    │        │    └ <function Compiled.process at 0x10419b420>
    │    │        └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x1076f2780>
    │    └ ''
    └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x1076f2780>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 932, in process
    return obj._compiler_dispatch(self, **kwargs)
           │   │                  │       └ {}
           │   │                  └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x1076f2780>
           │   └ <function Visitable._generate_compiler_dispatch.<locals>._compiler_dispatch at 0x1041687c0>
           └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           │    │       └ {}
           │    └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
           └ <bound method SQLCompiler.visit_select of <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x1076f2780>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 4728, in visit_select
    compile_state = select_stmt._compile_state_factory(
                    │           └ <bound method CompileState.create_for_statement of <class 'sqlalchemy.sql.base.CompileState'>>
                    └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 687, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           │     │                    │          │           └ {'within_columns_clause': False}
           │     │                    │          └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x1076f2780>
           │     │                    └ <sqlalchemy.sql.selectable.Select object at 0x107ed0f50>
           │     └ <classmethod(<function ORMCompileState.create_for_statement at 0x10455fe20>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           │   └ <classmethod(<function ORMSelectCompileState._create_orm_context at 0x1045991c0>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    │            └ <classmethod(<function _QueryEntity.to_compile_state at 0x10459a8e0>)>
    └ <class 'sqlalchemy.orm.context._QueryEntity'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2628, in to_compile_state
    _MapperEntity(
    └ <class 'sqlalchemy.orm.context._MapperEntity'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2708, in __init__
    entity._post_inspect
    │      └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x104610c80>
    └ <Mapper at 0x104c5f2c0; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
    │   │        │    │                    │    │    └ <Mapper at 0x104c5f2c0; Staff>
    │   │        │    │                    │    └ <function Mapper._post_inspect at 0x104616340>
    │   │        │    │                    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x104610c80>
    │   │        │    └ '_post_inspect'
    │   │        └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x104610c80>
    │   └ <attribute '__dict__' of 'Mapper' objects>
    └ <Mapper at 0x104c5f2c0; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2724, in _post_inspect
    self._check_configure()
    │    └ <function Mapper._check_configure at 0x104615580>
    └ <Mapper at 0x104c5f2c0; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x1048d68d0>
    │                      └ <Mapper at 0x104c5f2c0; Staff>
    └ <function _configure_registries at 0x104619300>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x104619440>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x104615440>
    └ <Mapper at 0x10727d5b0; EvidenceV2>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2418, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x1044fcc20>
    └ <_RelationshipDeclared at 0x1078bcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/interfaces.py", line 589, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x1045dbce0>
    └ <_RelationshipDeclared at 0x1078bcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1661, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x104608720>
    └ <_RelationshipDeclared at 0x1078bcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 2145, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'evidences_v2'
    │    │                     └ <_RelationshipDeclared at 0x1078bcff0; case>
    │    └ <function RelationshipProperty._add_reverse_property at 0x1045dbb00>
    └ <_RelationshipDeclared at 0x1078bcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1592, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'evidences_v2'
            │    │      └ <function Mapper.get_property at 0x104615d00>
            │    └ <Mapper at 0x104e6a840; Case>
            └ <_RelationshipDeclared at 0x1078bcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2524, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from '/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-19 14:59:50 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 14:59:50 | ERROR | app.core.middleware:dispatch:67 - 请求异常: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 错误: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-19 14:59:50 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2522, in get_property
    return self._props[key]
           │    │      └ 'evidences_v2'
           │    └ {'user': <_RelationshipDeclared at 0x105e6fbb0; user>, 'evidences': <_RelationshipDeclared at 0x105e6fd90; evidences>, 'id': ...
           └ <Mapper at 0x105e56840; Case>

KeyError: 'evidences_v2'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x10073a840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x10061ba60>
           └ <SpawnProcess name='SpawnProcess-1' parent=92505 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10061afc0>
    └ <SpawnProcess name='SpawnProcess-1' parent=92505 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x100f49790>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=92505 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=92505 started>
    │    └ <function subprocess_started at 0x101061080>
    └ <SpawnProcess name='SpawnProcess-1' parent=92505 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x1012bdfa0>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x101060400>
           │       │   └ <uvicorn.server.Server object at 0x1012bdfa0>
           │       └ <function run at 0x100bf2840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x1012adb60>
           │      └ <function Runner.run at 0x100c4c5e0>
           └ <asyncio.runners.Runner object at 0x100c26420>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x101309b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x100c26420>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x100f66ff0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107fee4b0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107fee4...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x1023c6840>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x100f66ff0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107fee4b0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107fee4...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107fee4b0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107fee4...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x107fedd00>
          └ <fastapi.applications.FastAPI object at 0x1023c6840>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107ff47c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x107fee4...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x107fed910>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x107fedd00>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x102d9dda0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [InvalidRequestError("Mapper 'Mapper[Case(cases)]' has no property 'evidenc...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x107f37370>
    └ <contextlib._GeneratorContextManager object at 0x107feecc0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107ff4860>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x107fee6c0>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x107fed910>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x107fed910>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x107fee6c0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107ff4860>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ InvalidRequestError("Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other ...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107ff4ae0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x107fedac0>
          └ <app.core.middleware.LoggingMiddleware object at 0x107fed910>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107ff4ae0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x107fedc70>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x107fedac0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107ff4ae0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x107ed7920>
          │                            │    └ <fastapi.routing.APIRouter object at 0x1031bd790>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x107fedc70>
          └ <function wrap_app_handling_exceptions at 0x102e3c720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x108147920>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x1031bd790>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x108147920>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x1031bd790>>
          └ <fastapi.routing.APIRouter object at 0x1031bd790>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x108147920>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x102e3dd00>
          └ APIRoute(path='/api/v1/evidence-v2/batch-process', name='batch_process_evidence', methods=['POST'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x108147920>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x107f77420>
          └ APIRoute(path='/api/v1/evidence-v2/batch-process', name='batch_process_evidence', methods=['POST'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x108147920>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10810cbf0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x108147880>
          └ <function wrap_app_handling_exceptions at 0x102e3c720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x108147740>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x108138680>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x108147880>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10810cbf0>
                     └ <function get_request_handler.<locals>.app at 0x107f77240>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 291, in app
    solved_result = await solve_dependencies(
                          └ <function solve_dependencies at 0x102e19d00>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/dependencies/utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
                   │      │             └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10814c4a0>, 'token': 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.ey...
                   │      └ SolvedDependency(values={'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10814c4a0>, 'token': 'eyJhbGciOiJIUzI...
                   └ <function get_current_staff at 0x1031f5e40>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/deps.py", line 41, in get_current_staff
    staff = await db.get(Staff, token_data.sub)
                  │  │   │      │          └ 1
                  │  │   │      └ TokenPayload(sub=1)
                  │  │   └ <class 'app.staffs.models.Staff'>
                  │  └ <function AsyncSession.get at 0x1055bb240>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10814c4a0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 606, in get
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x10343a0c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x107ffc080 (otid=0x103268810) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3694, in get
    return self._get_impl(
           │    └ <function Session._get_impl at 0x1054f1300>
           └ <sqlalchemy.orm.session.Session object at 0x107f92ff0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 3873, in _get_impl
    return db_load_fn(
           └ <function load_on_pk_identity at 0x1053a0220>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/loading.py", line 694, in load_on_pk_identity
    session.execute(
    │       └ <function Session.execute at 0x1054e7380>
    └ <sqlalchemy.orm.session.Session object at 0x107f92ff0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1054e7060>
           └ <sqlalchemy.orm.session.Session object at 0x107f92ff0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10535fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x104530a40>
             └ <sqlalchemy.engine.base.Connection object at 0x107ee9280>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10814c560>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x104530d60>
           └ <sqlalchemy.engine.base.Connection object at 0x107ee9280>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1629, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                │    └ <function ClauseElement._compile_w_cache at 0x104139260>
                                                └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 711, in _compile_w_cache
    compiled_sql = self._compiler(
                   │    └ <function CompilerElement._compiler at 0x104138220>
                   └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           │       │                  │        │       └ {'cache_key': CacheKey(key=('0', <class 'sqlalchemy.sql.selectable.Select'>, '_raw_columns', ((Table('staffs', MetaData(), Co...
           │       │                  │        └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
           │       │                  └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x105836f60>
           │       └ <class 'sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg'>
           └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x105836f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 1446, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    │        │        │     │        │            └ {'schema_translate_map': None}
    │        │        │     │        └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
    │        │        │     └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x105836f60>
    │        │        └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x107f631a0>
    │        └ <function Compiled.__init__ at 0x10429b060>
    └ <class 'sqlalchemy.sql.compiler.Compiled'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 886, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
    │    │        │    │       │    │            └ immutabledict({})
    │    │        │    │       │    └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
    │    │        │    │       └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x107f631a0>
    │    │        │    └ <function Compiled.process at 0x10429b420>
    │    │        └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x107f631a0>
    │    └ ''
    └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x107f631a0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 932, in process
    return obj._compiler_dispatch(self, **kwargs)
           │   │                  │       └ {}
           │   │                  └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x107f631a0>
           │   └ <function Visitable._generate_compiler_dispatch.<locals>._compiler_dispatch at 0x1042687c0>
           └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
           │    │       └ {}
           │    └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
           └ <bound method SQLCompiler.visit_select of <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x107f631a0>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/compiler.py", line 4728, in visit_select
    compile_state = select_stmt._compile_state_factory(
                    │           └ <bound method CompileState.create_for_statement of <class 'sqlalchemy.sql.base.CompileState'>>
                    └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/base.py", line 687, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           │     │                    │          │           └ {'within_columns_clause': False}
           │     │                    │          └ <sqlalchemy.dialects.postgresql.asyncpg.PGCompiler_asyncpg object at 0x107f631a0>
           │     │                    └ <sqlalchemy.sql.selectable.Select object at 0x10814c560>
           │     └ <classmethod(<function ORMCompileState.create_for_statement at 0x10535fe20>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           │   └ <classmethod(<function ORMSelectCompileState._create_orm_context at 0x1053991c0>)>
           └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    │            └ <classmethod(<function _QueryEntity.to_compile_state at 0x10539a8e0>)>
    └ <class 'sqlalchemy.orm.context._QueryEntity'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2628, in to_compile_state
    _MapperEntity(
    └ <class 'sqlalchemy.orm.context._MapperEntity'>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 2708, in __init__
    entity._post_inspect
    │      └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x105410d10>
    └ <Mapper at 0x1059cd790; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
    │   │        │    │                    │    │    └ <Mapper at 0x1059cd790; Staff>
    │   │        │    │                    │    └ <function Mapper._post_inspect at 0x105416340>
    │   │        │    │                    └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x105410d10>
    │   │        │    └ '_post_inspect'
    │   │        └ <sqlalchemy.util.langhelpers.HasMemoized.memoized_attribute object at 0x105410d10>
    │   └ <attribute '__dict__' of 'Mapper' objects>
    └ <Mapper at 0x1059cd790; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2724, in _post_inspect
    self._check_configure()
    │    └ <function Mapper._check_configure at 0x105415580>
    └ <Mapper at 0x1059cd790; Staff>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0x105836750>
    │                      └ <Mapper at 0x1059cd790; Staff>
    └ <function _configure_registries at 0x105419300>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0x105419440>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0x105415440>
    └ <Mapper at 0x1077c2570; EvidenceV2>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2418, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0x1046fcc20>
    └ <_RelationshipDeclared at 0x107cfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/interfaces.py", line 589, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0x1053dbce0>
    └ <_RelationshipDeclared at 0x107cfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1661, in do_init
    self._generate_backref()
    │    └ <function RelationshipProperty._generate_backref at 0x105408720>
    └ <_RelationshipDeclared at 0x107cfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 2145, in _generate_backref
    self._add_reverse_property(self.back_populates)
    │    │                     │    └ 'evidences_v2'
    │    │                     └ <_RelationshipDeclared at 0x107cfcff0; case>
    │    └ <function RelationshipProperty._add_reverse_property at 0x1053dbb00>
    └ <_RelationshipDeclared at 0x107cfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1592, in _add_reverse_property
    other = self.mapper.get_property(key, _configure_mappers=False)
            │    │      │            └ 'evidences_v2'
            │    │      └ <function Mapper.get_property at 0x105415d00>
            │    └ <Mapper at 0x105e56840; Case>
            └ <_RelationshipDeclared at 0x107cfcff0; case>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2524, in get_property
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from '/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/exc.py'>

sqlalchemy.exc.InvalidRequestError: Mapper 'Mapper[Case(cases)]' has no property 'evidences_v2'.  If this property was indicated from other mappers or configure events, ensure registry.configure() has been called.
2025-07-19 15:02:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:02:04 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:02:04 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:02:04 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150204_1.jpg
2025-07-19 15:02:04 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150204_1.jpg
2025-07-19 15:02:04 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150204_1.jpg, disposition=inline
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150204_1.jpg
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150204_1.jpg
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 2.png, 文件夹: images
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 814248 字节
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150205_2.png
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150205_2.png
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150205_2.png, disposition=inline
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150205_2.png
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150205_2.png
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 3.png, 文件夹: images
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 603343 字节
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150205_3.png
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150205_3.png
2025-07-19 15:02:05 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150205_3.png, disposition=inline
2025-07-19 15:02:06 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150205_3.png
2025-07-19 15:02:06 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150205_3.png
2025-07-19 15:02:06 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:02:06 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 1.jpg
2025-07-19 15:02:06 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 1.jpg, 错误: 文件大小为0
2025-07-19 15:02:06 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:02:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 1.6705秒
2025-07-19 15:02:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:02:27 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('body', 'files'), 'msg': 'Field required', 'input': None}] for request body: None
2025-07-19 15:02:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 422 - 耗时: 0.0772秒
2025-07-19 15:03:00 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:03:00 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:03:00 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:03:00 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150300_1.jpg
2025-07-19 15:03:00 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150300_1.jpg
2025-07-19 15:03:00 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150300_1.jpg, disposition=inline
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150300_1.jpg
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150300_1.jpg
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 2.png, 文件夹: images
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 814248 字节
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150301_2.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150301_2.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150301_2.png, disposition=inline
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150301_2.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150301_2.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 3.png, 文件夹: images
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 603343 字节
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150301_3.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150301_3.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150301_3.png, disposition=inline
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150301_3.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150301_3.png
2025-07-19 15:03:01 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:03:01 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 1.jpg
2025-07-19 15:03:01 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 1.jpg, 错误: 文件大小为0
2025-07-19 15:03:01 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:03:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 1.1214秒
2025-07-19 15:03:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/evidence-v2/evidence/case/5
2025-07-19 15:03:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/evidence-v2/evidence/case/5 - 状态码: 200 - 耗时: 0.1961秒
2025-07-19 15:04:18 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:04:18 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: test.txt, 文件夹: images
2025-07-19 15:04:18 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 13 字节
2025-07-19 15:04:18 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150418_test.txt
2025-07-19 15:04:18 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150418_test.txt
2025-07-19 15:04:18 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150418_test.txt, disposition=inline
2025-07-19 15:04:19 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150418_test.txt
2025-07-19 15:04:19 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150418_test.txt
2025-07-19 15:04:19 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: test.txt, 文件夹: images
2025-07-19 15:04:19 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: test.txt
2025-07-19 15:04:19 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: test.txt, 错误: 文件大小为0
2025-07-19 15:04:19 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:04:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 0.3805秒
2025-07-19 15:04:42 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/evidence-v2/status/5
2025-07-19 15:04:42 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/evidence-v2/status/5 - 状态码: 200 - 耗时: 0.1042秒
2025-07-19 15:05:23 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:05:23 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:05:23 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 552944 字节
2025-07-19 15:05:23 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150523_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:05:23 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150523_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:05:23 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150523_8b683a16e16d868c7c47de2900fba35.jpg, disposition=inline
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150523_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150523_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: c976692d5d5a85634a50ee7a24e24f4.jpg, 文件夹: images
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 505037 字节
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150524_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150524_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150524_c976692d5d5a85634a50ee7a24e24f4.jpg, disposition=inline
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150524_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150524_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: e5cb7399d35c575961a0f80ace54371.jpg, 文件夹: images
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 399947 字节
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150524_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150524_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150524_e5cb7399d35c575961a0f80ace54371.jpg, disposition=inline
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150524_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150524_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:05:24 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:05:24 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:05:24 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 8b683a16e16d868c7c47de2900fba35.jpg, 错误: 文件大小为0
2025-07-19 15:05:24 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:05:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 0.8131秒
2025-07-19 15:09:05 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:09:05 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:09:05 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 552944 字节
2025-07-19 15:09:05 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150905_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:05 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150905_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:05 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150905_8b683a16e16d868c7c47de2900fba35.jpg, disposition=inline
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150905_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150905_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: c976692d5d5a85634a50ee7a24e24f4.jpg, 文件夹: images
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 505037 字节
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150906_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150906_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150906_c976692d5d5a85634a50ee7a24e24f4.jpg, disposition=inline
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150906_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150906_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: e5cb7399d35c575961a0f80ace54371.jpg, 文件夹: images
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 399947 字节
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150906_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150906_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150906_e5cb7399d35c575961a0f80ace54371.jpg, disposition=inline
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150906_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150906_e5cb7399d35c575961a0f80ace54371.jpg
2025-07-19 15:09:06 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:09:06 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:06 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 8b683a16e16d868c7c47de2900fba35.jpg, 错误: 文件大小为0
2025-07-19 15:09:06 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:09:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 1.4821秒
2025-07-19 15:09:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:09:35 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:09:35 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 552944 字节
2025-07-19 15:09:35 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719150935_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:35 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719150935_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:35 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719150935_8b683a16e16d868c7c47de2900fba35.jpg, disposition=inline
2025-07-19 15:09:36 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719150935_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:36 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719150935_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:09:36 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 0.7571秒
2025-07-19 15:10:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:10:31 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:10:31 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:10:31 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719151031_1.jpg
2025-07-19 15:10:31 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719151031_1.jpg
2025-07-19 15:10:31 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719151031_1.jpg, disposition=inline
2025-07-19 15:10:32 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719151031_1.jpg
2025-07-19 15:10:32 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719151031_1.jpg
2025-07-19 15:10:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 0.8253秒
2025-07-19 15:10:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/cases
2025-07-19 15:10:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/cases - 状态码: 307 - 耗时: 0.0104秒
2025-07-19 15:10:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/cases/
2025-07-19 15:10:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/cases/ - 状态码: 200 - 耗时: 2.1333秒
2025-07-19 15:11:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:11:06 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:11:06 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:11:06 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719151106_1.jpg
2025-07-19 15:11:06 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719151106_1.jpg
2025-07-19 15:11:06 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719151106_1.jpg, disposition=inline
2025-07-19 15:11:12 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719151106_1.jpg
2025-07-19 15:11:12 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719151106_1.jpg
2025-07-19 15:11:13 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 2.png, 文件夹: images
2025-07-19 15:11:13 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 814248 字节
2025-07-19 15:11:13 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719151113_2.png
2025-07-19 15:11:13 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719151113_2.png
2025-07-19 15:11:13 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719151113_2.png, disposition=inline
2025-07-19 15:11:14 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719151113_2.png
2025-07-19 15:11:14 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719151113_2.png
2025-07-19 15:11:14 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:11:14 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 1.jpg
2025-07-19 15:11:14 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 1.jpg, 错误: 文件大小为0
2025-07-19 15:11:14 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:11:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 8.1566秒
2025-07-19 15:18:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:18:40 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:18:40 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:18:40 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719151840_1.jpg
2025-07-19 15:18:40 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719151840_1.jpg
2025-07-19 15:18:40 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719151840_1.jpg, disposition=inline
2025-07-19 15:18:46 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719151840_1.jpg
2025-07-19 15:18:46 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719151840_1.jpg
2025-07-19 15:18:46 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:18:46 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 1.jpg
2025-07-19 15:18:46 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 1.jpg, 错误: 文件大小为0
2025-07-19 15:18:46 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:18:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 6.9641秒
2025-07-19 15:19:01 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/evidence-v2/evidence/case/3
2025-07-19 15:19:02 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/evidence-v2/evidence/case/3 - 状态码: 200 - 耗时: 0.1272秒
2025-07-19 15:19:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/evidence-v2/status/3
2025-07-19 15:19:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/evidence-v2/status/3 - 状态码: 200 - 耗时: 0.1163秒
2025-07-19 15:19:51 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:19:51 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:19:51 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 552944 字节
2025-07-19 15:19:51 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719151951_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:51 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719151951_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:51 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719151951_8b683a16e16d868c7c47de2900fba35.jpg, disposition=inline
2025-07-19 15:19:52 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719151951_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:52 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719151951_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 0.9996秒
2025-07-19 15:19:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 552944 字节
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719151958_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719151958_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719151958_8b683a16e16d868c7c47de2900fba35.jpg, disposition=inline
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719151958_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719151958_8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: c976692d5d5a85634a50ee7a24e24f4.jpg, 文件夹: images
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 505037 字节
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719151958_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719151958_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719151958_c976692d5d5a85634a50ee7a24e24f4.jpg, disposition=inline
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719151958_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719151958_c976692d5d5a85634a50ee7a24e24f4.jpg
2025-07-19 15:19:58 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 8b683a16e16d868c7c47de2900fba35.jpg, 文件夹: images
2025-07-19 15:19:58 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 8b683a16e16d868c7c47de2900fba35.jpg
2025-07-19 15:19:58 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 8b683a16e16d868c7c47de2900fba35.jpg, 错误: 文件大小为0
2025-07-19 15:19:58 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:19:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 0.3946秒
2025-07-19 15:20:42 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, 文件夹: images
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 491115 字节
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719152042_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719152042_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719152042_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, disposition=inline
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719152042_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719152042_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 42913e0d-cba7-41af-815a-86b7915012e9.jpg, 文件夹: images
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 526352 字节
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719152042_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719152042_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719152042_42913e0d-cba7-41af-815a-86b7915012e9.jpg, disposition=inline
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719152042_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719152042_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:20:42 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, 文件夹: images
2025-07-19 15:20:42 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:20:42 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, 错误: 文件大小为0
2025-07-19 15:20:42 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:20:42 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 0.4482秒
2025-07-19 15:25:18 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:25:18 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'int_type', 'loc': ('body', 'case_id'), 'msg': 'Input should be a valid integer', 'input': UploadFile(filename='case_id', size=1, headers=Headers({'content-disposition': 'form-data; name="case_id"; filename="case_id"'}))}] for request body: None
2025-07-19 15:25:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 422 - 耗时: 0.1433秒
2025-07-19 15:25:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:25:58 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:25:58 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:25:58 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719152558_1.jpg
2025-07-19 15:25:58 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719152558_1.jpg
2025-07-19 15:25:58 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719152558_1.jpg, disposition=inline
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719152558_1.jpg
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719152558_1.jpg
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 2.png, 文件夹: images
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 814248 字节
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719152559_2.png
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719152559_2.png
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719152559_2.png, disposition=inline
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719152559_2.png
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719152559_2.png
2025-07-19 15:25:59 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:25:59 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 1.jpg
2025-07-19 15:25:59 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 1.jpg, 错误: 文件大小为0
2025-07-19 15:25:59 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:25:59 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 1.4843秒
2025-07-19 15:26:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:26:25 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:26:25 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:26:25 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719152625_1.jpg
2025-07-19 15:26:25 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719152625_1.jpg
2025-07-19 15:26:25 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719152625_1.jpg, disposition=inline
2025-07-19 15:26:26 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719152625_1.jpg
2025-07-19 15:26:26 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719152625_1.jpg
2025-07-19 15:26:26 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:26:26 | ERROR | app.integrations.cos:upload_file:54 - 文件大小为0: 1.jpg
2025-07-19 15:26:26 | ERROR | app.integrations.cos:upload_file:112 - COS上传失败: 1.jpg, 错误: 文件大小为0
2025-07-19 15:26:26 | ERROR | app.integrations.cos:upload_file:114 - 错误详情: Traceback (most recent call last):
  File "/Users/s/ZL/intelligent-evidence-platform/app/integrations/cos.py", line 55, in upload_file
    raise ValueError("文件大小为0")
ValueError: 文件大小为0

2025-07-19 15:26:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 1.0645秒
2025-07-19 15:30:52 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:30:52 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:30:52 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:30:52 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719153052_1.jpg
2025-07-19 15:30:52 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719153052_1.jpg
2025-07-19 15:30:52 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719153052_1.jpg, disposition=inline
2025-07-19 15:30:53 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719153052_1.jpg
2025-07-19 15:30:53 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719153052_1.jpg
2025-07-19 15:30:54 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-19 15:30:54 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-19 15:30:54 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719153054_1.jpg
2025-07-19 15:30:54 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719153054_1.jpg
2025-07-19 15:30:54 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719153054_1.jpg, disposition=inline
2025-07-19 15:30:54 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719153054_1.jpg
2025-07-19 15:30:54 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719153054_1.jpg
2025-07-19 15:31:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 40.3305秒
2025-07-19 15:32:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, 文件夹: images
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 491115 字节
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719153214_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719153214_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719153214_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, disposition=inline
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719153214_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719153214_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 42913e0d-cba7-41af-815a-86b7915012e9.jpg, 文件夹: images
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 526352 字节
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719153214_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719153214_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719153214_42913e0d-cba7-41af-815a-86b7915012e9.jpg, disposition=inline
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719153214_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:14 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719153214_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:15 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, 文件夹: images
2025-07-19 15:32:15 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 491115 字节
2025-07-19 15:32:15 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719153215_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:15 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719153215_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:15 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719153215_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, disposition=inline
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719153215_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719153215_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 42913e0d-cba7-41af-815a-86b7915012e9.jpg, 文件夹: images
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 526352 字节
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719153216_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719153216_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719153216_42913e0d-cba7-41af-815a-86b7915012e9.jpg, disposition=inline
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719153216_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:16 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719153216_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:32:53 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 39.3999秒
2025-07-19 15:42:37 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, 文件夹: images
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 491115 字节
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719154238_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719154238_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719154238_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, disposition=inline
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719154238_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719154238_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 42913e0d-cba7-41af-815a-86b7915012e9.jpg, 文件夹: images
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 526352 字节
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719154238_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719154238_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719154238_42913e0d-cba7-41af-815a-86b7915012e9.jpg, disposition=inline
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719154238_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:42:38 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719154238_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:43:30 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 52.6669秒
2025-07-19 15:59:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:59:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 400 - 耗时: 0.0984秒
2025-07-19 15:59:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process
2025-07-19 15:59:58 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, 文件夹: images
2025-07-19 15:59:58 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 491115 字节
2025-07-19 15:59:58 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719155958_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:59:58 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719155958_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:59:58 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719155958_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg, disposition=inline
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719155958_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719155958_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 42913e0d-cba7-41af-815a-86b7915012e9.jpg, 文件夹: images
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 526352 字节
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719155959_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719155959_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719155959_42913e0d-cba7-41af-815a-86b7915012e9.jpg, disposition=inline
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719155959_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 15:59:59 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719155959_42913e0d-cba7-41af-815a-86b7915012e9.jpg
2025-07-19 16:00:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/batch-process - 状态码: 200 - 耗时: 51.1042秒
2025-07-19 16:01:51 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/joint-analysis
2025-07-19 16:01:51 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/joint-analysis - 状态码: 404 - 耗时: 0.0052秒
2025-07-19 16:02:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:02:19 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('query', 'evidence_ids'), 'msg': 'Field required', 'input': None}] for request body: None
2025-07-19 16:02:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 422 - 耗时: 0.0852秒
2025-07-19 16:02:43 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33
2025-07-19 16:02:43 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'int_parsing', 'loc': ('query', 'evidence_ids', 0), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '32,33'}] for request body: None
2025-07-19 16:02:43 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33 - 状态码: 422 - 耗时: 0.0935秒
2025-07-19 16:03:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:03:17 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('query', 'evidence_ids'), 'msg': 'Field required', 'input': None}] for request body: None
2025-07-19 16:03:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 422 - 耗时: 0.0819秒
2025-07-19 16:03:18 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:03:18 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('query', 'evidence_ids'), 'msg': 'Field required', 'input': None}] for request body: None
2025-07-19 16:03:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 422 - 耗时: 0.0400秒
2025-07-19 16:03:18 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:03:18 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('query', 'evidence_ids'), 'msg': 'Field required', 'input': None}] for request body: None
2025-07-19 16:03:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 422 - 耗时: 0.0463秒
2025-07-19 16:03:38 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:03:38 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('query', 'evidence_ids'), 'msg': 'Field required', 'input': None}] for request body: None
2025-07-19 16:03:38 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 422 - 耗时: 0.0670秒
2025-07-19 16:04:23 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33
2025-07-19 16:04:23 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 无法验证凭据 - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:04:23 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33 - 状态码: 401 - 耗时: 0.0040秒
2025-07-19 16:04:37 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33
2025-07-19 16:04:38 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'int_parsing', 'loc': ('query', 'evidence_ids', 0), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '32,33'}] for request body: None
2025-07-19 16:04:38 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33 - 状态码: 422 - 耗时: 0.0750秒
2025-07-19 16:04:38 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33
2025-07-19 16:04:39 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'int_parsing', 'loc': ('query', 'evidence_ids', 0), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '32,33'}] for request body: None
2025-07-19 16:04:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33 - 状态码: 422 - 耗时: 0.0499秒
2025-07-19 16:04:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33
2025-07-19 16:04:45 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'int_parsing', 'loc': ('query', 'evidence_ids', 0), 'msg': 'Input should be a valid integer, unable to parse string as an integer', 'input': '32,33'}] for request body: None
2025-07-19 16:04:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis?evidence_ids=32,33 - 状态码: 422 - 耗时: 0.0521秒
2025-07-19 16:07:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:07:46 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.StringDataRightTruncationError'>: value too long for type character varying(200)
[SQL: INSERT INTO evidence_combination_features_v2 (feature_id, feature_value, confidence, reasoning, evidence_count) VALUES ($1::VARCHAR, $2::VARCHAR, $3::FLOAT, $4::VARCHAR, $5::INTEGER) RETURNING evidence_combination_features_v2.id, evidence_combination_features_v2.created_at, evidence_combination_features_v2.updated_at]
[parameters: ('微信聊天记录_联合分析_20250719_160746', '[{"from_urls": ["https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719155958_004708f0-c2c8-452e-bf23-e3f1ab8d1717.jpg", "htt ... (1532 characters truncated) ... \u6b3e\\u3001\\u91d1\\u989d\\u53ca\\u65f6\\u95f4\\u7684\\u786e\\u8ba4\\uff0c\\u53ef\\u8ba4\\u5b9a\\u5b58\\u5728\\u6b20\\u6b3e\\u5408\\u610f\\u3002"}]', 0.9, '基于上下文联合分析', 2)]
(Background on this error at: https://sqlalche.me/e/20/dbapi) - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:07:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 400 - 耗时: 21.7991秒
2025-07-19 16:13:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:13:41 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:13:41 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 400 - 耗时: 20.7450秒
2025-07-19 16:18:43 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:19:07 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: (sqlalchemy.dialects.postgresql.asyncpg.Error) <class 'asyncpg.exceptions.StringDataRightTruncationError'>: value too long for type character varying(200)
[SQL: INSERT INTO evidence_combination_features_v2 (feature_id, feature_value, confidence, reasoning, evidence_count) VALUES ($1::VARCHAR, $2::VARCHAR, $3::FLOAT, $4::VARCHAR, $5::INTEGER) RETURNING evidence_combination_features_v2.id, evidence_combination_features_v2.created_at, evidence_combination_features_v2.updated_at]
[parameters: ('微信聊天记录_联合分析_20250719_161907', '[{"slot_name": "微信备注名", "slot_value": "温室雏菊🌼", "confidence": 0.95}, {"slot_name": "欠款合意", "slot_value": "是", "confidence": 0.8}, {"slot_name": "金额",  ... (23 characters truncated) ... "confidence": 0.9}, {"slot_name": "约定还款日期", "slot_value": "10月", "confidence": 0.6}, {"slot_name": "约定还款利息", "slot_value": "无信息", "confidence": 0.5}]', 0.75, '在两张图片中均可以看到聊天对象的微信备注名为：温室雏菊🌼。此信息在聊天界面顶部明确显示。', 2)]
(Background on this error at: https://sqlalche.me/e/20/dbapi) - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:19:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 400 - 耗时: 24.0847秒
2025-07-19 16:21:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:21:44 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:21:44 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 400 - 耗时: 24.8873秒
2025-07-19 16:25:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:25:58 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:25:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 400 - 耗时: 27.4652秒
2025-07-19 16:31:50 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:32:12 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 特征提取失败: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:32:12 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 400 - 耗时: 21.8289秒
2025-07-19 16:39:42 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:40:02 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 200 - 耗时: 20.1345秒
2025-07-19 16:52:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis
2025-07-19 16:52:59 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 特征提取失败: greenlet_spawn has not been called; can't call await_only() here. Was IO attempted in an unexpected place? (Background on this error at: https://sqlalche.me/e/20/xd2s) - POST /api/v1/evidence-v2/joint-analysis
2025-07-19 16:52:59 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/evidence-v2/joint-analysis - 状态码: 400 - 耗时: 27.7825秒
2025-07-19 16:58:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 16:58:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.0050秒
2025-07-19 16:58:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 16:58:04 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 用户名或密码不正确 - POST /api/v1/login/access-token
2025-07-19 16:58:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 401 - 耗时: 0.1540秒
2025-07-19 16:58:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.4157秒
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0594秒
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0469秒
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0876秒
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0824秒
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1258秒
2025-07-19 16:58:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0849秒
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 16:58:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0824秒
2025-07-19 16:58:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.0584秒
2025-07-19 16:58:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 16:58:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0798秒
2025-07-19 16:58:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0882秒
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 307 - 耗时: 0.0002秒
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 16:58:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2941秒
2025-07-19 16:58:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.3352秒
2025-07-19 16:58:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 16:58:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1029秒
2025-07-19 16:58:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1120秒
2025-07-19 16:58:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 16:58:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0032秒
2025-07-19 16:58:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 16:58:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0999秒
2025-07-19 16:58:37 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1490秒
2025-07-19 16:58:51 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:51 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 16:58:51 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0008秒
2025-07-19 16:58:51 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 16:58:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1724秒
2025-07-19 16:58:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1139秒
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/users
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/users - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/ - 状态码: 200 - 耗时: 0.0016秒
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/users/
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/users/ - 状态码: 201 - 耗时: 0.1195秒
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 16:58:56 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0480秒
2025-07-19 16:58:59 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 16:58:59 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 16:58:59 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0022秒
2025-07-19 16:58:59 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 16:59:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.1981秒
2025-07-19 16:59:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1521秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=w
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=w - 状态码: 200 - 耗时: 0.0013秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=w
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=w - 状态码: 307 - 耗时: 0.0037秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=w
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wa
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=w - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wa - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=w
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wa
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wa - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wa
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wa - 状态码: 200 - 耗时: 0.0002秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wa
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wan
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wan - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wan
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wan - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wan
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wan - 状态码: 200 - 耗时: 0.0002秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wan
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=w - 状态码: 200 - 耗时: 0.1077秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wa - 状态码: 200 - 耗时: 0.0876秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wan - 状态码: 200 - 耗时: 0.0291秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wang
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wang - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wang
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wang - 状态码: 307 - 耗时: 0.0002秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wang
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wang - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wang
2025-07-19 16:59:04 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wang - 状态码: 200 - 耗时: 0.0468秒
2025-07-19 17:00:50 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:50 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2037秒
2025-07-19 17:00:50 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:00:50 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 17:00:50 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:00:52 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:00:52 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1066秒
2025-07-19 17:00:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1701秒
2025-07-19 17:00:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1377秒
2025-07-19 17:00:53 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:53 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0650秒
2025-07-19 17:00:54 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:54 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:00:54 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0670秒
2025-07-19 17:00:54 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0709秒
2025-07-19 17:00:55 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:55 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:00:55 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0159秒
2025-07-19 17:00:55 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.0918秒
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1110秒
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0514秒
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0287秒
2025-07-19 17:00:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0849秒
2025-07-19 17:00:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 17:00:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0065秒
2025-07-19 17:00:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:00:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 17:00:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0722秒
2025-07-19 17:00:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0721秒
2025-07-19 17:00:59 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 17:00:59 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 307 - 耗时: 0.0007秒
2025-07-19 17:00:59 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 17:01:00 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:00 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2369秒
2025-07-19 17:01:00 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.2846秒
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0008秒
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0988秒
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0953秒
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 17:01:01 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:01:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.0836秒
2025-07-19 17:01:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1320秒
2025-07-19 17:01:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1480秒
2025-07-19 17:01:09 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:09 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:01:09 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0013秒
2025-07-19 17:01:09 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.0895秒
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1333秒
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0647秒
2025-07-19 17:01:11 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0665秒
2025-07-19 17:01:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/users
2025-07-19 17:01:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/users - 状态码: 307 - 耗时: 0.0016秒
2025-07-19 17:01:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/users/
2025-07-19 17:01:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/users/ - 状态码: 201 - 耗时: 0.1402秒
2025-07-19 17:01:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 17:01:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 17:01:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 17:01:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0349秒
2025-07-19 17:01:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:01:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1352秒
2025-07-19 17:01:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1486秒
2025-07-19 17:01:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:01:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0010秒
2025-07-19 17:01:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:01:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0816秒
2025-07-19 17:01:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.0913秒
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=w
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=w - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=w
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wa
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=wa - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wa
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=w - 状态码: 200 - 耗时: 0.0846秒
2025-07-19 17:01:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=wa - 状态码: 200 - 耗时: 0.0489秒
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases - 状态码: 200 - 耗时: 0.0013秒
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/cases
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/cases - 状态码: 307 - 耗时: 0.0008秒
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/ - 状态码: 200 - 耗时: 0.0011秒
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/cases/
2025-07-19 17:01:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/cases/ - 状态码: 201 - 耗时: 0.2513秒
2025-07-19 17:01:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:01:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0012秒
2025-07-19 17:01:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:01:37 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.0991秒
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0008秒
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1210秒
2025-07-19 17:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0847秒
2025-07-19 17:01:41 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:41 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:01:41 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 17:01:41 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.0968秒
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1185秒
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0811秒
2025-07-19 17:01:43 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0646秒
2025-07-19 17:01:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:01:45 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:01:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0848秒
2025-07-19 17:01:45 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0874秒
2025-07-19 17:01:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100
2025-07-19 17:01:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100 - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 17:01:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100
2025-07-19 17:01:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100 - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 17:01:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100
2025-07-19 17:01:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 17:01:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100
2025-07-19 17:01:48 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100 - 状态码: 200 - 耗时: 2.0926秒
2025-07-19 17:01:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/batch
2025-07-19 17:01:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/batch - 状态码: 200 - 耗时: 0.0169秒
2025-07-19 17:01:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/evidences/batch
2025-07-19 17:01:58 | INFO | app.evidences.routers:batch_create_evidences:106 - 接收批量创建证据请求: 案件ID=1, 文件数量=3
2025-07-19 17:01:58 | DEBUG | app.evidences.routers:batch_create_evidences:117 - 文件1: 名称=0e8380a5056ccb80f5bde40581da5e0.png, 内容类型=image/png, 大小=599520
2025-07-19 17:01:58 | DEBUG | app.evidences.routers:batch_create_evidences:117 - 文件2: 名称=92be1d164c1a88080b85a8ff6a6413d.png, 内容类型=image/png, 大小=587502
2025-07-19 17:01:58 | DEBUG | app.evidences.routers:batch_create_evidences:117 - 文件3: 名称=456130154ef9a4693b047b4fb713696.png, 内容类型=image/png, 大小=556412
2025-07-19 17:01:58 | DEBUG | app.evidences.routers:batch_create_evidences:129 - 案件存在: ID=1, 名称=王伟 vs 李现
2025-07-19 17:01:58 | INFO | app.evidences.routers:batch_create_evidences:133 - 开始批量创建证据: 案件ID=1, 文件数量=3
2025-07-19 17:01:58 | INFO | app.evidences.services:batch_create:189 - 开始批量创建证据: 案件ID=1, 文件数量=3
2025-07-19 17:01:58 | DEBUG | app.evidences.services:batch_create:194 - 处理第1个文件: 0e8380a5056ccb80f5bde40581da5e0.png, 大小: 599520
2025-07-19 17:01:58 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:01:58 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-19 17:01:58 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 17:01:58 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 599520 字节
2025-07-19 17:01:58 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 0e8380a5056ccb80f5bde40581da5e0.png, disposition=inline
2025-07-19 17:01:58 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 0e8380a5056ccb80f5bde40581da5e0.png, 文件夹: images
2025-07-19 17:01:58 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 599520 字节
2025-07-19 17:01:58 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719170158_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:01:58 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719170158_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:01:58 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719170158_0e8380a5056ccb80f5bde40581da5e0.png, disposition=inline
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719170158_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170158_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 0e8380a5056ccb80f5bde40581da5e0.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170158_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 0e8380a5056ccb80f5bde40581da5e0.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170158_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:194 - 处理第2个文件: 92be1d164c1a88080b85a8ff6a6413d.png, 大小: 587502
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 587502 字节
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 92be1d164c1a88080b85a8ff6a6413d.png, disposition=inline
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 92be1d164c1a88080b85a8ff6a6413d.png, 文件夹: images
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 587502 字节
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719170201_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719170201_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719170201_92be1d164c1a88080b85a8ff6a6413d.png, disposition=inline
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719170201_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170201_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 92be1d164c1a88080b85a8ff6a6413d.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170201_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 92be1d164c1a88080b85a8ff6a6413d.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170201_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:194 - 处理第3个文件: 456130154ef9a4693b047b4fb713696.png, 大小: 556412
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 556412 字节
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 456130154ef9a4693b047b4fb713696.png, disposition=inline
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 456130154ef9a4693b047b4fb713696.png, 文件夹: images
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 556412 字节
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719170201_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719170201_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719170201_456130154ef9a4693b047b4fb713696.png, disposition=inline
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719170201_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:01 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170201_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 456130154ef9a4693b047b4fb713696.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170201_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 456130154ef9a4693b047b4fb713696.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719170201_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:01 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 456130154ef9a4693b047b4fb713696.png
2025-07-19 17:02:02 | INFO | app.evidences.services:batch_create:222 - 成功提交3个证据到数据库
2025-07-19 17:02:02 | INFO | app.evidences.routers:batch_create_evidences:172 - 批量创建证据成功: 成功数量=3
2025-07-19 17:02:02 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/evidences/batch - 状态码: 201 - 耗时: 3.3107秒
2025-07-19 17:02:02 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:02:02 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0651秒
2025-07-19 17:02:08 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:02:08 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:02:08 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0010秒
2025-07-19 17:02:08 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.1988秒
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1750秒
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0445秒
2025-07-19 17:02:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0935秒
2025-07-19 17:02:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:02:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 17:02:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:02:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0758秒
2025-07-19 17:02:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/classification-by-urls
2025-07-19 17:02:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/classification-by-urls - 状态码: 200 - 耗时: 0.0002秒
2025-07-19 17:02:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/classification-by-urls
2025-07-19 17:02:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/classification-by-urls - 状态码: 200 - 耗时: 32.5908秒
2025-07-19 17:02:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:02:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0018秒
2025-07-19 17:02:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:02:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.2763秒
2025-07-19 17:09:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:09:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0403秒
2025-07-19 17:09:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:09:48 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.6720秒
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0164秒
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0138秒
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.2490秒
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 17:17:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:17:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 25.7627秒
2025-07-19 17:17:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:17:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0031秒
2025-07-19 17:17:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:17:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0961秒
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0042秒
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.3482秒
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0016秒
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0019秒
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0018秒
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:28:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1483秒
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0050秒
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0011秒
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 17:28:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:28:09 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.2364秒
2025-07-19 17:28:09 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1449秒
2025-07-19 17:28:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:28:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0064秒
2025-07-19 17:28:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:28:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:28:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1558秒
2025-07-19 17:28:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.2915秒
2025-07-19 17:28:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100
2025-07-19 17:28:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 17:28:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100
2025-07-19 17:28:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=100 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 17:28:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100
2025-07-19 17:28:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 17:28:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100
2025-07-19 17:28:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=100 - 状态码: 200 - 耗时: 2.1075秒
2025-07-19 17:28:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/batch
2025-07-19 17:28:22 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/batch - 状态码: 200 - 耗时: 0.0060秒
2025-07-19 17:28:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/evidences/batch
2025-07-19 17:28:23 | INFO | app.evidences.routers:batch_create_evidences:106 - 接收批量创建证据请求: 案件ID=1, 文件数量=3
2025-07-19 17:28:23 | DEBUG | app.evidences.routers:batch_create_evidences:117 - 文件1: 名称=0e8380a5056ccb80f5bde40581da5e0.png, 内容类型=image/png, 大小=599520
2025-07-19 17:28:23 | DEBUG | app.evidences.routers:batch_create_evidences:117 - 文件2: 名称=92be1d164c1a88080b85a8ff6a6413d.png, 内容类型=image/png, 大小=587502
2025-07-19 17:28:23 | DEBUG | app.evidences.routers:batch_create_evidences:117 - 文件3: 名称=456130154ef9a4693b047b4fb713696.png, 内容类型=image/png, 大小=556412
2025-07-19 17:28:23 | DEBUG | app.evidences.routers:batch_create_evidences:129 - 案件存在: ID=1, 名称=王伟 vs 李现
2025-07-19 17:28:23 | INFO | app.evidences.routers:batch_create_evidences:133 - 开始批量创建证据: 案件ID=1, 文件数量=3
2025-07-19 17:28:23 | INFO | app.evidences.services:batch_create:189 - 开始批量创建证据: 案件ID=1, 文件数量=3
2025-07-19 17:28:23 | DEBUG | app.evidences.services:batch_create:194 - 处理第1个文件: 0e8380a5056ccb80f5bde40581da5e0.png, 大小: 599520
2025-07-19 17:28:23 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:23 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-19 17:28:23 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 17:28:23 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 599520 字节
2025-07-19 17:28:23 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 0e8380a5056ccb80f5bde40581da5e0.png, disposition=inline
2025-07-19 17:28:23 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 0e8380a5056ccb80f5bde40581da5e0.png, 文件夹: images
2025-07-19 17:28:23 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 599520 字节
2025-07-19 17:28:23 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719172823_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:23 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719172823_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:23 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719172823_0e8380a5056ccb80f5bde40581da5e0.png, disposition=inline
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719172823_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172823_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 0e8380a5056ccb80f5bde40581da5e0.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172823_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 0e8380a5056ccb80f5bde40581da5e0.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172823_0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 0e8380a5056ccb80f5bde40581da5e0.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:194 - 处理第2个文件: 92be1d164c1a88080b85a8ff6a6413d.png, 大小: 587502
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 587502 字节
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 92be1d164c1a88080b85a8ff6a6413d.png, disposition=inline
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 92be1d164c1a88080b85a8ff6a6413d.png, 文件夹: images
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 587502 字节
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719172824_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719172824_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719172824_92be1d164c1a88080b85a8ff6a6413d.png, disposition=inline
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719172824_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172824_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 92be1d164c1a88080b85a8ff6a6413d.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172824_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 92be1d164c1a88080b85a8ff6a6413d.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172824_92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 92be1d164c1a88080b85a8ff6a6413d.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:194 - 处理第3个文件: 456130154ef9a4693b047b4fb713696.png, 大小: 556412
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 556412 字节
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 456130154ef9a4693b047b4fb713696.png, disposition=inline
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 456130154ef9a4693b047b4fb713696.png, 文件夹: images
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 556412 字节
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250719172824_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250719172824_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250719172824_456130154ef9a4693b047b4fb713696.png, disposition=inline
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250719172824_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172824_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 456130154ef9a4693b047b4fb713696.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172824_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:198 - 文件上传成功: 456130154ef9a4693b047b4fb713696.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250719172824_456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | DEBUG | app.evidences.services:batch_create:210 - 证据对象创建成功: 456130154ef9a4693b047b4fb713696.png
2025-07-19 17:28:24 | INFO | app.evidences.services:batch_create:222 - 成功提交3个证据到数据库
2025-07-19 17:28:24 | INFO | app.evidences.routers:batch_create_evidences:172 - 批量创建证据成功: 成功数量=3
2025-07-19 17:28:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/evidences/batch - 状态码: 201 - 耗时: 1.6439秒
2025-07-19 17:28:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:28:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0665秒
2025-07-19 17:28:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:28:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:28:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 17:28:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:28:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2920秒
2025-07-19 17:28:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:28:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:28:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 17:28:29 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:28:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0759秒
2025-07-19 17:28:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.3462秒
2025-07-19 17:28:29 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0953秒
2025-07-19 17:28:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:28:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 17:28:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:28:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1844秒
2025-07-19 17:28:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/classification-by-urls
2025-07-19 17:28:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/classification-by-urls - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 17:28:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/classification-by-urls
2025-07-19 17:29:02 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/classification-by-urls - 状态码: 200 - 耗时: 27.7396秒
2025-07-19 17:29:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:29:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0053秒
2025-07-19 17:29:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:29:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1231秒
2025-07-19 17:29:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:29:30 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0030秒
2025-07-19 17:29:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:29:30 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.3639秒
2025-07-19 17:29:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:29:30 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 0.0295秒
2025-07-19 17:29:30 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:29:48 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 17.6240秒
2025-07-19 17:29:48 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:29:48 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0010秒
2025-07-19 17:29:48 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:29:48 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0787秒
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0068秒
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0023秒
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0006秒
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1611秒
2025-07-19 17:39:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:39:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 30.0100秒
2025-07-19 17:39:52 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:39:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0016秒
2025-07-19 17:39:52 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:39:52 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1380秒
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0050秒
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0940秒
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0168秒
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:43:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0801秒
2025-07-19 17:45:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:45:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0019秒
2025-07-19 17:45:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:45:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1355秒
2025-07-19 17:45:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/classification-by-urls
2025-07-19 17:45:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/classification-by-urls - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 17:45:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/classification-by-urls
2025-07-19 17:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/classification-by-urls - 状态码: 200 - 耗时: 27.0743秒
2025-07-19 17:45:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:45:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0049秒
2025-07-19 17:45:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:45:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.7486秒
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0025秒
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0009秒
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1542秒
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 17:50:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:50:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:50:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0162秒
2025-07-19 17:50:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 17:50:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:50:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1047秒
2025-07-19 17:50:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.2619秒
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0007秒
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 17:50:33 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 17:50:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.1113秒
2025-07-19 17:50:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.4018秒
2025-07-19 17:50:38 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 25.6515秒
2025-07-19 17:50:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:50:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:50:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0033秒
2025-07-19 17:50:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:50:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1841秒
2025-07-19 17:50:40 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1305秒
2025-07-19 17:51:48 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:51:48 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0014秒
2025-07-19 17:51:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:51:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1987秒
2025-07-19 17:51:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:52:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 26.4607秒
2025-07-19 17:52:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:52:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0013秒
2025-07-19 17:52:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:52:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1225秒
2025-07-19 17:54:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:54:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0027秒
2025-07-19 17:54:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:54:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.2301秒
2025-07-19 17:54:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:55:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 25.3175秒
2025-07-19 17:55:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:55:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0038秒
2025-07-19 17:55:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:55:24 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1207秒
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0042秒
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2017秒
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0010秒
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:55:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0606秒
2025-07-19 17:56:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:56:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0015秒
2025-07-19 17:56:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:56:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1994秒
2025-07-19 17:56:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 17:58:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 122.9299秒
2025-07-19 17:58:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 17:58:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0007秒
2025-07-19 17:58:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 17:58:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1660秒
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0018秒
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0009秒
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0002秒
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1965秒
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 0.0002秒
2025-07-19 18:01:39 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 18:02:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 28.1112秒
2025-07-19 18:02:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:02:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0010秒
2025-07-19 18:02:07 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:02:07 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1632秒
2025-07-19 18:04:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:04:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0021秒
2025-07-19 18:04:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:04:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1654秒
2025-07-19 18:04:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 18:05:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 27.8446秒
2025-07-19 18:05:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:05:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 18:05:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:05:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1065秒
2025-07-19 18:06:59 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:06:59 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0023秒
2025-07-19 18:06:59 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:07:00 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1720秒
2025-07-19 18:07:00 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 18:07:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 27.0874秒
2025-07-19 18:07:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:07:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 18:07:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:07:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1342秒
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0103秒
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1966秒
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:07:53 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1166秒
2025-07-19 18:13:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.4855秒
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0149秒
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:13:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.2847秒
2025-07-19 18:27:55 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 18:27:56 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:27:56 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.9273秒
2025-07-19 18:27:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.4255秒
2025-07-19 18:27:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 18:27:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:27:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2092秒
2025-07-19 18:27:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.4046秒
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0011秒
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0544秒
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 18:27:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 18:27:59 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1599秒
2025-07-19 18:28:01 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1855秒
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.4302秒
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.3875秒
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0009秒
2025-07-19 18:28:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 18:28:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1636秒
2025-07-19 18:28:23 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.2392秒
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0061秒
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0024秒
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0038秒
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2030秒
2025-07-19 18:28:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.1694秒
2025-07-19 18:31:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 18:31:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2046秒
2025-07-19 18:31:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:31:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0051秒
2025-07-19 18:31:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:31:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0764秒
2025-07-19 18:31:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:31:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0021秒
2025-07-19 18:31:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:31:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0899秒
2025-07-19 18:31:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 18:31:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 18:31:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls
2025-07-19 18:32:05 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/agentic/extract-features-by-urls - 状态码: 200 - 耗时: 16.1473秒
2025-07-19 18:32:05 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1
2025-07-19 18:32:05 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences?skip=0&limit=20&case_id=1 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 18:32:05 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1
2025-07-19 18:32:05 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/evidences/?skip=0&limit=20&case_id=1 - 状态码: 200 - 耗时: 0.0998秒
2025-07-19 20:37:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 20:37:57 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.0071秒
2025-07-19 20:37:57 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/login/access-token
2025-07-19 20:37:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.5390秒
2025-07-19 20:37:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:37:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 20:37:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:37:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0530秒
2025-07-19 20:37:58 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:37:58 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0380秒
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0006秒
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 20:38:03 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 20:38:05 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.2014秒
2025-07-19 20:38:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1664秒
2025-07-19 20:38:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 20:38:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 20:38:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 20:38:06 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:38:06 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0707秒
2025-07-19 20:38:06 | ERROR | app.core.middleware:dispatch:67 - 请求异常: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 错误: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 20:38:06 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x1099637e0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cbf9130>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cbf9130>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x109a5eac0>
                 └ <asyncpg.connection.Connection object at 0x10cbf9130>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x109a5e7a0>
                 └ <asyncpg.connection.Connection object at 0x10cbf9130>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x10cbf9130>
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
    return await waiter

asyncpg.exceptions.UndefinedColumnError: column evidences.evidence_type does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1090ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837110>
    └ <sqlalchemy.engine.base.Connection object at 0x10cc14320>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cc1bcc0 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.evidence_type does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.evidence_type does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x10123a840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x10111ba60>
           └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10111afc0>
    └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x101cc7890>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
    │    └ <function subprocess_started at 0x105b05080>
    └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x105c8dc40>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x105b04400>
           │       │   └ <uvicorn.server.Server object at 0x105c8dc40>
           │       └ <function run at 0x101c36840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x105c79b60>
           │      └ <function Runner.run at 0x101c905e0>
           └ <asyncio.runners.Runner object at 0x105b46450>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x105cd5b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x105b46450>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c4c6f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc16cf0>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc16c...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10644e450>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c4c6f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc16cf0>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc16c...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc16cf0>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc16c...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cb0ddf0>
          └ <fastapi.applications.FastAPI object at 0x10644e450>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107e0bd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cc16c...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cb0ddf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x107a09da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10968f370>
    └ <contextlib._GeneratorContextManager object at 0x10cc16f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107e0bce0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10cc16de0>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10cc16de0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107e0bce0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107e0b240>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
          └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'authorization': 'Bearer eyJh...
          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x107e0b240>
          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x107b4c9a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>>, sen...
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cb0db50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>>, sen...
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10cc175c0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x107ded640>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cb0db50>
          └ <function wrap_app_handling_exceptions at 0x107aa8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cb53ec0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x107ded640>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cb53ec0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x107ded640>>
          └ <fastapi.routing.APIRouter object at 0x107ded640>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cb53ec0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x107aa9d00>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cb53ec0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10ca87380>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10cb53ec0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10cc15fd0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10cb69300>
          └ <function wrap_app_handling_exceptions at 0x107aa8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x107e20900>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0bc40>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10cb69300>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10cc15fd0>
                     └ <function get_request_handler.<locals>.app at 0x10ca87240>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x107aa8180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cc15040>, 'current_staff': <app.staffs.models.Staff object ...
                 │         └ <function read_evidences_with_cases at 0x10aee1f80>
                 └ Dependant(path_params=[], query_params=[ModelField(field_info=Query(0), name='skip', mode='validation'), ModelField(field_inf...

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/routers.py", line 52, in read_evidences_with_cases
    evidences, total = await evidence_service.get_multi_with_cases_with_count(
                             │                └ <function get_multi_with_cases_with_count at 0x10aee1580>
                             └ <module 'app.evidences.services' from '/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py'>

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py", line 160, in get_multi_with_cases_with_count
    total = await db.scalar(count_query)
                  │  │      └ <sqlalchemy.sql.selectable.Select object at 0x10cc15280>
                  │  └ <function AsyncSession.scalar at 0x1095baf20>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cc15040>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 519, in scalar
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x1088a60c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x10cc1bcc0 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2413, in scalar
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1094e7060>
           └ <sqlalchemy.orm.session.Session object at 0x10cc14a10>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10935fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x109030a40>
             └ <sqlalchemy.engine.base.Connection object at 0x10cc14320>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10cc15280>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x109030d60>
           └ <sqlalchemy.engine.base.Connection object at 0x10cc14320>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x109030f40>
          └ <sqlalchemy.engine.base.Connection object at 0x10cc14320>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x109030fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x10cc14320>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x109031260>
    └ <sqlalchemy.engine.base.Connection object at 0x10cc14320>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1090ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837110>
    └ <sqlalchemy.engine.base.Connection object at 0x10cc14320>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cc1bcc0 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.evidence_type does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cbefbe0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.evidence_type does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 20:38:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:38:21 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1726秒
2025-07-19 20:38:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 20:38:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 200 - 耗时: 0.0015秒
2025-07-19 20:38:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 20:38:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 307 - 耗时: 0.0032秒
2025-07-19 20:38:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:38:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 20:38:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 20:38:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 20:38:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.3068秒
2025-07-19 20:38:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.1924秒
2025-07-19 20:38:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs
2025-07-19 20:38:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs - 状态码: 200 - 耗时: 0.0017秒
2025-07-19 20:38:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/staffs
2025-07-19 20:38:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/staffs - 状态码: 307 - 耗时: 0.0009秒
2025-07-19 20:38:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/
2025-07-19 20:38:35 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/staffs/ - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 20:38:35 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/staffs/
2025-07-19 20:38:36 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/staffs/ - 状态码: 201 - 耗时: 0.5339秒
2025-07-19 20:38:36 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 20:38:36 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 307 - 耗时: 0.0036秒
2025-07-19 20:38:36 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 20:38:36 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.0857秒
2025-07-19 20:38:38 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100
2025-07-19 20:38:38 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs?page=1&size=100 - 状态码: 307 - 耗时: 0.0022秒
2025-07-19 20:38:38 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100
2025-07-19 20:38:38 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/?page=1&size=100 - 状态码: 200 - 耗时: 0.1085秒
2025-07-19 20:39:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 20:39:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0016秒
2025-07-19 20:39:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 20:39:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0008秒
2025-07-19 20:39:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:39:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 20:39:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 20:39:15 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 20:39:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.2063秒
2025-07-19 20:39:15 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.1021秒
2025-07-19 20:39:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 20:39:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:39:17 | ERROR | app.core.middleware:dispatch:67 - 请求异常: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 错误: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 20:39:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0796秒
2025-07-19 20:39:17 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x1099637e0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cf61040>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cf61040>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x109a5eac0>
                 └ <asyncpg.connection.Connection object at 0x10cf61040>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x109a5e7a0>
                 └ <asyncpg.connection.Connection object at 0x10cf61040>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x10cf61040>
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
    return await waiter

asyncpg.exceptions.UndefinedColumnError: column evidences.evidence_type does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1090ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837110>
    └ <sqlalchemy.engine.base.Connection object at 0x10cf6ed80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cf83380 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.evidence_type does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.evidence_type does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x10123a840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x10111ba60>
           └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10111afc0>
    └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x101cc7890>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
    │    └ <function subprocess_started at 0x105b05080>
    └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x105c8dc40>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x105b04400>
           │       │   └ <uvicorn.server.Server object at 0x105c8dc40>
           │       └ <function run at 0x101c36840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x105c79b60>
           │      └ <function Runner.run at 0x101c905e0>
           └ <asyncio.runners.Runner object at 0x105b46450>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x105cd5b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x105b46450>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c4c6f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6fe90>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6fe...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10644e450>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c4c6f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6fe90>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6fe...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6fe90>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6fe...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cb0ddf0>
          └ <fastapi.applications.FastAPI object at 0x10644e450>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x10ce2a0c0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6fe...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cb0ddf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x107a09da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10cf54d40>
    └ <contextlib._GeneratorContextManager object at 0x10cf6d400>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10ce2ba60>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10cf6f890>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10cf6f890>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x10ce2ba60>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10ce28fe0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
          └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'authorization': 'Bearer eyJh...
          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10ce28fe0>
          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x107b4c9a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>>, sen...
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cb0db50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>>, sen...
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10cf6d5b0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x107ded640>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cb0db50>
          └ <function wrap_app_handling_exceptions at 0x107aa8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce2a980>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x107ded640>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce2a980>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x107ded640>>
          └ <fastapi.routing.APIRouter object at 0x107ded640>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce2a980>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x107aa9d00>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce2a980>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10ca87380>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce2a980>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10cf6f800>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10ce28540>
          └ <function wrap_app_handling_exceptions at 0x107aa8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce29e40>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x10ce2b240>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10ce28540>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10cf6f800>
                     └ <function get_request_handler.<locals>.app at 0x10ca87240>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x107aa8180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cf6f5c0>, 'current_staff': <app.staffs.models.Staff object ...
                 │         └ <function read_evidences_with_cases at 0x10aee1f80>
                 └ Dependant(path_params=[], query_params=[ModelField(field_info=Query(0), name='skip', mode='validation'), ModelField(field_inf...

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/routers.py", line 52, in read_evidences_with_cases
    evidences, total = await evidence_service.get_multi_with_cases_with_count(
                             │                └ <function get_multi_with_cases_with_count at 0x10aee1580>
                             └ <module 'app.evidences.services' from '/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py'>

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py", line 160, in get_multi_with_cases_with_count
    total = await db.scalar(count_query)
                  │  │      └ <sqlalchemy.sql.selectable.Select object at 0x10cf6ed20>
                  │  └ <function AsyncSession.scalar at 0x1095baf20>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cf6f5c0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 519, in scalar
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x1088a60c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x10cf83380 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2413, in scalar
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1094e7060>
           └ <sqlalchemy.orm.session.Session object at 0x10cf6ebd0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10935fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x109030a40>
             └ <sqlalchemy.engine.base.Connection object at 0x10cf6ed80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10cf6ed20>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x109030d60>
           └ <sqlalchemy.engine.base.Connection object at 0x10cf6ed80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x109030f40>
          └ <sqlalchemy.engine.base.Connection object at 0x10cf6ed80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x109030fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x10cf6ed80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x109031260>
    └ <sqlalchemy.engine.base.Connection object at 0x10cf6ed80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1090ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837110>
    └ <sqlalchemy.engine.base.Connection object at 0x10cf6ed80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cf83380 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79a80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.evidence_type does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cf4b940>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.evidence_type does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 20:39:50 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:39:50 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1109秒
2025-07-19 20:41:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:41:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 20:41:14 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0009秒
2025-07-19 20:41:14 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 20:41:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.1334秒
2025-07-19 20:41:16 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1542秒
2025-07-19 20:42:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 20:42:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0020秒
2025-07-19 20:42:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 20:42:13 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:42:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1392秒
2025-07-19 20:42:13 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.2277秒
2025-07-19 20:42:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users
2025-07-19 20:42:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 20:42:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/users
2025-07-19 20:42:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/users - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 20:42:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/
2025-07-19 20:42:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/ - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 20:42:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/users/
2025-07-19 20:42:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/users/ - 状态码: 201 - 耗时: 0.1119秒
2025-07-19 20:42:18 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 20:42:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 20:42:18 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 20:42:18 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0570秒
2025-07-19 20:42:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20
2025-07-19 20:42:20 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:42:20 | ERROR | app.core.middleware:dispatch:67 - 请求异常: GET http://127.0.0.1:8000/api/v1/evidences/with-cases?skip=0&limit=20 - 错误: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 20:42:20 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 521, in _prepare_and_execute
    prepared_stmt, attributes = await adapt_connection._prepare(
                                      │                └ <function AsyncAdapt_asyncpg_connection._prepare at 0x1099637e0>
                                      └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cf62030>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 768, in _prepare
    prepared_stmt = await self._connection.prepare(
                          │    └ <member '_connection' of 'AdaptedConnection' objects>
                          └ <AdaptedConnection <asyncpg.connection.Connection object at 0x10cf62030>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 635, in prepare
    return await self._prepare(
                 │    └ <function Connection._prepare at 0x109a5eac0>
                 └ <asyncpg.connection.Connection object at 0x10cf62030>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 653, in _prepare
    stmt = await self._get_statement(
                 │    └ <function Connection._get_statement at 0x109a5e7a0>
                 └ <asyncpg.connection.Connection object at 0x10cf62030>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/asyncpg/connection.py", line 432, in _get_statement
    statement = await self._protocol.prepare(
                      │    └ <member '_protocol' of 'Connection' objects>
                      └ <asyncpg.connection.Connection object at 0x10cf62030>
  File "asyncpg/protocol/protocol.pyx", line 165, in prepare
    return await waiter

asyncpg.exceptions.UndefinedColumnError: column evidences.evidence_type does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1090ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837110>
    └ <sqlalchemy.engine.base.Connection object at 0x10cf12270>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79e70>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cc50880 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79e70>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.evidence_type does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.evidence_type does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError: <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 122, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 4
               │     └ 7
               └ <function _main at 0x10123a840>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/spawn.py", line 135, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 4
           │    └ <function BaseProcess._bootstrap at 0x10111ba60>
           └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x10111afc0>
    └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x101cc7890>, 'target': <bound method Server.run of <uvicorn.server.Server object...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
    │    └ <function subprocess_started at 0x105b05080>
    └ <SpawnProcess name='SpawnProcess-151' parent=8605 started>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x105c8dc40>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=3, family=2, type=1, proto=0, laddr=('0.0.0.0', 8000)>]
           │       │   │    └ <function Server.serve at 0x105b04400>
           │       │   └ <uvicorn.server.Server object at 0x105c8dc40>
           │       └ <function run at 0x101c36840>
           └ <module 'asyncio' from '/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/__init__.py'>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 194, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0x105c79b60>
           │      └ <function Runner.run at 0x101c905e0>
           └ <asyncio.runners.Runner object at 0x105b46450>
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/si...
           │    │     └ <cyfunction Loop.run_until_complete at 0x105cd5b10>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0x105b46450>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c4c6f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6c350>>
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6c3...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
                 │    └ <fastapi.applications.FastAPI object at 0x10644e450>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x10c4c6f60>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6c350>>
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6c3...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6c350>>
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6c3...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cb0ddf0>
          └ <fastapi.applications.FastAPI object at 0x10644e450>
> File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x107e0bd80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x10cf6c3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x10cb0ddf0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0x107a09da0>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/Library/Frameworks/Python.framework/Versions/3.12/lib/python3.12/contextlib.py", line 155, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0x10968f370>
    └ <contextlib._GeneratorContextManager object at 0x10cf6ee40>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107e08540>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0x10cf6c110>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>>
                     └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>

  File "/Users/s/ZL/intelligent-evidence-platform/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0x10cf6c110>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0x107e08540>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10ce298a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
          └ <app.core.middleware.LoggingMiddleware object at 0x10cb0dd00>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 93, in __call__
    await self.simple_response(scope, receive, send, request_headers=headers)
          │    │               │      │        │                     └ Headers({'host': '127.0.0.1:8000', 'connection': 'keep-alive', 'sec-ch-ua-platform': '"macOS"', 'authorization': 'Bearer eyJh...
          │    │               │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0x10ce298a0>
          │    │               │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │    │               └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function CORSMiddleware.simple_response at 0x107b4c9a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 144, in simple_response
    await self.app(scope, receive, send)
          │    │   │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>>, sen...
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cb0db50>
          └ <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ functools.partial(<bound method CORSMiddleware.send of <starlette.middleware.cors.CORSMiddleware object at 0x10cb0dbb0>>, sen...
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    │    └ <starlette.requests.Request object at 0x10cc175f0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x107ded640>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x10cb0db50>
          └ <function wrap_app_handling_exceptions at 0x107aa8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce28180>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <fastapi.routing.APIRouter object at 0x107ded640>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce28180>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x107ded640>>
          └ <fastapi.routing.APIRouter object at 0x107ded640>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce28180>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │     └ <function Route.handle at 0x107aa9d00>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce28180>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │    └ <function request_response.<locals>.app at 0x10ca87380>
          └ APIRoute(path='/api/v1/evidences/with-cases', name='read_evidences_with_cases', methods=['GET'])
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce28180>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          │                            │    └ <starlette.requests.Request object at 0x10cc17080>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x10ce28b80>
          └ <function wrap_app_handling_exceptions at 0x107aa8720>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x10ce2b420>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0x107e0ab60>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('127.0.0.1', 8000), 'cl...
          └ <function request_response.<locals>.app.<locals>.app at 0x10ce28b80>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x10cc17080>
                     └ <function get_request_handler.<locals>.app at 0x10ca87240>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x107aa8180>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cc169c0>, 'current_staff': <app.staffs.models.Staff object ...
                 │         └ <function read_evidences_with_cases at 0x10aee1f80>
                 └ Dependant(path_params=[], query_params=[ModelField(field_info=Query(0), name='skip', mode='validation'), ModelField(field_inf...

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/routers.py", line 52, in read_evidences_with_cases
    evidences, total = await evidence_service.get_multi_with_cases_with_count(
                             │                └ <function get_multi_with_cases_with_count at 0x10aee1580>
                             └ <module 'app.evidences.services' from '/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py'>

  File "/Users/s/ZL/intelligent-evidence-platform/app/evidences/services.py", line 160, in get_multi_with_cases_with_count
    total = await db.scalar(count_query)
                  │  │      └ <sqlalchemy.sql.selectable.Select object at 0x10cf129c0>
                  │  └ <function AsyncSession.scalar at 0x1095baf20>
                  └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x10cc169c0>

  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 519, in scalar
    return await greenlet_spawn(
                 └ <function greenlet_spawn at 0x1088a60c0>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
             │       │      │   └ <built-in function exc_info>
             │       │      └ <module 'sys' (built-in)>
             │       └ <method 'throw' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x10cc50880 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2413, in scalar
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x1094e7060>
           └ <sqlalchemy.orm.session.Session object at 0x10cc16060>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function AbstractORMCompileState.orm_execute_statement at 0x10935fa60>)>
                   │      └ <class 'sqlalchemy.orm.context.ORMSelectCompileState'>
                   └ typing.Any
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 306, in orm_execute_statement
    result = conn.execute(
             │    └ <function Connection.execute at 0x109030a40>
             └ <sqlalchemy.engine.base.Connection object at 0x10cf12270>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.selectable.Select object at 0x10cf129c0>>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x109030d60>
           └ <sqlalchemy.engine.base.Connection object at 0x10cf12270>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x109030f40>
          └ <sqlalchemy.engine.base.Connection object at 0x10cf12270>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x109030fe0>
           └ <sqlalchemy.engine.base.Connection object at 0x10cf12270>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x109031260>
    └ <sqlalchemy.engine.base.Connection object at 0x10cf12270>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.ProgrammingError'>, ProgrammingError("<class 'asyncp...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ ProgrammingError("(sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>...
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x1090ec400>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0x109837110>
    └ <sqlalchemy.engine.base.Connection object at 0x10cf12270>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ()
    │      │       └ 'SELECT count(*) AS count_1 \nFROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_na...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0x109962b60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79e70>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x10cc50880 (otid=0x107f04630) dead>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0x10ca79e70>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0x109962980>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ UndefinedColumnError('column evidences.evidence_type does not exist')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0x10cfa3460>
  File "/Users/s/ZL/intelligent-evidence-platform/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ UndefinedColumnError('column evidences.evidence_type does not exist')
          └ ProgrammingError("<class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist")

sqlalchemy.exc.ProgrammingError: (sqlalchemy.dialects.postgresql.asyncpg.ProgrammingError) <class 'asyncpg.exceptions.UndefinedColumnError'>: column evidences.evidence_type does not exist
[SQL: SELECT count(*) AS count_1 
FROM (SELECT evidences.id AS id, evidences.file_url AS file_url, evidences.file_name AS file_name, evidences.file_size AS file_size, evidences.file_extension AS file_extension, evidences.evidence_type AS evidence_type, evidences.classification_confidence AS classification_confidence, evidences.classification_reasoning AS classification_reasoning, evidences.classified_at AS classified_at, evidences.individual_features AS individual_features, evidences.case_id AS case_id, evidences.created_at AS created_at, evidences.updated_at AS updated_at 
FROM evidences) AS anon_1]
(Background on this error at: https://sqlalche.me/e/20/f405)
2025-07-19 20:42:20 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.1727秒
2025-07-19 20:42:24 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:42:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.3865秒
2025-07-19 20:42:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20
2025-07-19 20:42:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0020秒
2025-07-19 20:42:25 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20
2025-07-19 20:42:25 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=20 - 状态码: 200 - 耗时: 0.0963秒
2025-07-19 20:42:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/staffs/me
2025-07-19 20:42:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 20:42:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0038秒
2025-07-19 20:42:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 20:42:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 2.1353秒
2025-07-19 20:42:28 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.1026秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=s
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=s - 状态码: 200 - 耗时: 0.0007秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=s
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=s - 状态码: 307 - 耗时: 0.0005秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=s
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=s - 状态码: 200 - 耗时: 0.0008秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=s
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=s - 状态码: 200 - 耗时: 0.0587秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=su
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=su - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=su
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=su - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=su
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=su - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=su
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=su - 状态码: 200 - 耗时: 0.0452秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=sun
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=sun - 状态码: 200 - 耗时: 0.0004秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=sun
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users?skip=0&limit=50&search=sun - 状态码: 307 - 耗时: 0.0004秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=sun
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=sun - 状态码: 200 - 耗时: 0.0003秒
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=sun
2025-07-19 20:42:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/users/?skip=0&limit=50&search=sun - 状态码: 200 - 耗时: 0.0536秒
2025-07-19 20:42:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases
2025-07-19 20:42:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases - 状态码: 200 - 耗时: 0.0036秒
2025-07-19 20:42:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/cases
2025-07-19 20:42:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/cases - 状态码: 307 - 耗时: 0.0007秒
2025-07-19 20:42:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/
2025-07-19 20:42:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: OPTIONS http://127.0.0.1:8000/api/v1/cases/ - 状态码: 200 - 耗时: 0.0005秒
2025-07-19 20:42:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://127.0.0.1:8000/api/v1/cases/
2025-07-19 20:42:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://127.0.0.1:8000/api/v1/cases/ - 状态码: 201 - 耗时: 0.1431秒
2025-07-19 20:42:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20
2025-07-19 20:42:47 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases?skip=0&limit=20 - 状态码: 307 - 耗时: 0.0003秒
2025-07-19 20:42:47 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20
2025-07-19 20:42:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://127.0.0.1:8000/api/v1/cases/?skip=0&limit=20 - 状态码: 200 - 耗时: 2.0725秒
