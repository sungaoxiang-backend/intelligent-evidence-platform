2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users?limit=10 - 状态码: 200 - 耗时: 0.0752秒
2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0119秒
2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0008秒
2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:44:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.3421秒
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 200 - 耗时: 0.0147秒
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 307 - 耗时: 0.0025秒
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.0018秒
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 01:44:12 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.3850秒
2025-07-15 01:44:24 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-15 01:44:24 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 200 - 耗时: 0.0147秒
2025-07-15 01:44:24 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-15 01:44:25 | INFO | app.evidences.routers:batch_create_evidences_with_classification:271 - 接收批量创建证据+分类请求: 案件ID=1, 文件数量=2
2025-07-15 01:44:25 | INFO | app.evidences.routers:batch_create_evidences_with_classification:302 - 开始批量创建证据+分类: 案件ID=1, 文件数量=2
2025-07-15 01:44:25 | INFO | app.evidences.services:batch_create:225 - 开始批量创建证据: 案件ID=1, 文件数量=2
2025-07-15 01:44:25 | DEBUG | app.evidences.services:batch_create:230 - 处理第1个文件: 发票.png, 大小: 181542
2025-07-15 01:44:25 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 发票.png
2025-07-15 01:44:25 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 01:44:25 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 01:44:25 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 181542 字节
2025-07-15 01:44:25 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 发票.png, disposition=inline
2025-07-15 01:44:25 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 发票.png, 文件夹: images
2025-07-15 01:44:25 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 181542 字节
2025-07-15 01:44:25 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715014425_发票.png
2025-07-15 01:44:25 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715014425_发票.png
2025-07-15 01:44:25 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715014425_发票.png, disposition=inline
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715014425_发票.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014425_发票.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 发票.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014425_发票.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 发票.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014425_发票.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 发票.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:batch_create:230 - 处理第2个文件: 身份证正面.png, 大小: 347913
2025-07-15 01:44:26 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 01:44:26 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 347913 字节
2025-07-15 01:44:26 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 身份证正面.png, disposition=inline
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 身份证正面.png, 文件夹: images
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 347913 字节
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715014426_身份证正面.png, disposition=inline
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 身份证正面.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 身份证正面.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 身份证正面.png
2025-07-15 01:44:26 | INFO | app.evidences.services:batch_create:260 - 成功提交2个证据到数据库
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 发票.png, 文件夹: images
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 181542 字节
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715014426_发票.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715014426_发票.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715014426_发票.png, disposition=inline
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715014426_发票.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014426_发票.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 身份证正面.png, 文件夹: images
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 347913 字节
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715014426_身份证正面.png, disposition=inline
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715014426_身份证正面.png
2025-07-15 01:44:26 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715014426_身份证正面.png
2025-07-15 01:44:54 | INFO | app.evidences.services:batch_create_with_classification:355 - 成功完成2个证据的上传和分类
2025-07-15 01:44:54 | INFO | app.evidences.routers:batch_create_evidences_with_classification:313 - 批量创建证据+分类成功: 成功数量=2
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 201 - 耗时: 29.4661秒
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 200 - 耗时: 0.0015秒
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 307 - 耗时: 0.0016秒
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.0006秒
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 01:44:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.0715秒
2025-07-15 01:45:02 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:45:02 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0135秒
2025-07-15 01:45:02 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:45:02 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.1663秒
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases?limit=10
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases?limit=10 - 状态码: 200 - 耗时: 0.0805秒
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=10
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=10 - 状态码: 307 - 耗时: 0.0067秒
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=10
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=10 - 状态码: 200 - 耗时: 0.0117秒
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=10
2025-07-15 01:45:07 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=10 - 状态码: 200 - 耗时: 0.3113秒
2025-07-15 01:48:16 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/login/access-token
2025-07-15 01:48:17 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.4071秒
2025-07-15 01:48:17 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs/me
2025-07-15 01:48:17 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0007秒
2025-07-15 01:48:17 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 01:48:17 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0381秒
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0118秒
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0957秒
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 200 - 耗时: 0.0009秒
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 307 - 耗时: 0.0006秒
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.0004秒
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 01:48:25 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.0421秒
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs - 状态码: 200 - 耗时: 0.0074秒
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/staffs
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/staffs - 状态码: 307 - 耗时: 0.0034秒
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs/
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs/ - 状态码: 200 - 耗时: 0.0005秒
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/staffs/
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/staffs/ - 状态码: 201 - 耗时: 0.5266秒
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 307 - 耗时: 0.0014秒
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 01:49:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.0638秒
2025-07-15 01:49:22 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:49:22 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0093秒
2025-07-15 01:49:22 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:49:22 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0900秒
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users - 状态码: 200 - 耗时: 0.0091秒
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/users
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/users - 状态码: 307 - 耗时: 0.0057秒
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users/
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users/ - 状态码: 200 - 耗时: 0.0005秒
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/users/
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/users/ - 状态码: 201 - 耗时: 0.1665秒
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0006秒
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:49:40 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0431秒
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users?skip=10&limit=10
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users?skip=10&limit=10 - 状态码: 200 - 耗时: 0.0017秒
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?skip=10&limit=10
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?skip=10&limit=10 - 状态码: 307 - 耗时: 0.0041秒
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users/?skip=10&limit=10
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users/?skip=10&limit=10 - 状态码: 200 - 耗时: 0.0054秒
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?skip=10&limit=10
2025-07-15 01:49:41 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?skip=10&limit=10 - 状态码: 200 - 耗时: 0.0365秒
2025-07-15 01:49:46 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=10
2025-07-15 01:49:46 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=10 - 状态码: 307 - 耗时: 0.0082秒
2025-07-15 01:49:46 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=10
2025-07-15 01:49:46 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=10 - 状态码: 200 - 耗时: 0.2217秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users?limit=100 - 状态码: 200 - 耗时: 0.0323秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=100 - 状态码: 200 - 耗时: 0.0089秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=100 - 状态码: 307 - 耗时: 0.0097秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=100 - 状态码: 307 - 耗时: 0.0023秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users/?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users/?limit=100 - 状态码: 200 - 耗时: 0.0028秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=100 - 状态码: 200 - 耗时: 0.0019秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=100
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=100 - 状态码: 200 - 耗时: 0.2823秒
2025-07-15 01:49:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=100 - 状态码: 200 - 耗时: 0.3418秒
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases - 状态码: 200 - 耗时: 0.0048秒
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/cases
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/cases - 状态码: 307 - 耗时: 0.0020秒
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/ - 状态码: 200 - 耗时: 0.0010秒
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/cases/
2025-07-15 01:50:36 | ERROR | app.core.middleware:http_exception_handler:12 - HTTPException: 案件编号已存在 - POST /api/v1/cases/
2025-07-15 01:50:36 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/cases/ - 状态码: 400 - 耗时: 0.1301秒
2025-07-15 01:50:39 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/cases
2025-07-15 01:50:39 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/cases - 状态码: 307 - 耗时: 0.0087秒
2025-07-15 01:50:39 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/cases/
2025-07-15 01:50:39 | ERROR | app.core.middleware:http_exception_handler:12 - HTTPException: 案件编号已存在 - POST /api/v1/cases/
2025-07-15 01:50:39 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/cases/ - 状态码: 400 - 耗时: 0.0524秒
2025-07-15 01:50:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:50:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0103秒
2025-07-15 01:50:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:50:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0973秒
2025-07-15 01:50:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 01:50:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 01:50:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 307 - 耗时: 0.0356秒
2025-07-15 01:50:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 307 - 耗时: 0.0159秒
2025-07-15 01:50:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 01:50:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 01:50:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.1648秒
2025-07-15 01:50:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.2488秒
2025-07-15 01:51:02 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 01:51:02 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 307 - 耗时: 0.0299秒
2025-07-15 01:51:02 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 01:51:03 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.1561秒
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=1
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.0103秒
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=1
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=1 - 状态码: 307 - 耗时: 0.0046秒
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=1
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.0008秒
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=1
2025-07-15 01:51:17 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.1163秒
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0044秒
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 307 - 耗时: 0.0056秒
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0006秒
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 01:51:20 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0807秒
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/1
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?case_id=1
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/1 - 状态码: 200 - 耗时: 0.0089秒
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?case_id=1 - 状态码: 200 - 耗时: 0.0070秒
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/1
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?case_id=1
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?case_id=1 - 状态码: 307 - 耗时: 0.0019秒
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?case_id=1
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?case_id=1 - 状态码: 200 - 耗时: 0.0008秒
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?case_id=1
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/1 - 状态码: 200 - 耗时: 0.1478秒
2025-07-15 01:51:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?case_id=1 - 状态码: 200 - 耗时: 0.1219秒
2025-07-15 01:52:29 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-15 01:52:29 | INFO | app.evidences.routers:batch_create_evidences_with_classification:271 - 接收批量创建证据+分类请求: 案件ID=3, 文件数量=4
2025-07-15 01:52:30 | INFO | app.evidences.routers:batch_create_evidences_with_classification:302 - 开始批量创建证据+分类: 案件ID=3, 文件数量=4
2025-07-15 01:52:30 | INFO | app.evidences.services:batch_create:225 - 开始批量创建证据: 案件ID=3, 文件数量=4
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:230 - 处理第1个文件: 发票.png, 大小: 181542
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 发票.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 181542 字节
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 发票.png, disposition=inline
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 发票.png, 文件夹: images
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 181542 字节
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015230_发票.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015230_发票.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015230_发票.png, disposition=inline
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015230_发票.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_发票.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 发票.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_发票.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 发票.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_发票.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 发票.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:230 - 处理第2个文件: 身份证正面.png, 大小: 347913
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 347913 字节
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 身份证正面.png, disposition=inline
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 身份证正面.png, 文件夹: images
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 347913 字节
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015230_身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015230_身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015230_身份证正面.png, disposition=inline
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015230_身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 身份证正面.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 身份证正面.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 身份证正面.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:230 - 处理第3个文件: 银行卡.jpg, 大小: 488408
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: jpg
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 488408 字节
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 银行卡.jpg, disposition=inline
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 银行卡.jpg, 文件夹: images
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 488408 字节
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015230_银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015230_银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015230_银行卡.jpg, disposition=inline
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015230_银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 银行卡.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 银行卡.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 银行卡.jpg
2025-07-15 01:52:30 | DEBUG | app.evidences.services:batch_create:230 - 处理第4个文件: 营业执照.png, 大小: 369499
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 营业执照.png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 369499 字节
2025-07-15 01:52:30 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 营业执照.png, disposition=inline
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 营业执照.png, 文件夹: images
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 369499 字节
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015230_营业执照.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015230_营业执照.png
2025-07-15 01:52:30 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015230_营业执照.png, disposition=inline
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015230_营业执照.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_营业执照.png
2025-07-15 01:52:31 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 营业执照.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_营业执照.png
2025-07-15 01:52:31 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 营业执照.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015230_营业执照.png
2025-07-15 01:52:31 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 营业执照.png
2025-07-15 01:52:31 | INFO | app.evidences.services:batch_create:260 - 成功提交4个证据到数据库
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 发票.png, 文件夹: images
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 181542 字节
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015231_发票.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015231_发票.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015231_发票.png, disposition=inline
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015231_发票.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015231_发票.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 身份证正面.png, 文件夹: images
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 347913 字节
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015231_身份证正面.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015231_身份证正面.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015231_身份证正面.png, disposition=inline
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015231_身份证正面.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015231_身份证正面.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 银行卡.jpg, 文件夹: images
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 488408 字节
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015231_银行卡.jpg
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015231_银行卡.jpg
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015231_银行卡.jpg, disposition=inline
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015231_银行卡.jpg
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015231_银行卡.jpg
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 营业执照.png, 文件夹: images
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 369499 字节
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015231_营业执照.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015231_营业执照.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015231_营业执照.png, disposition=inline
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015231_营业执照.png
2025-07-15 01:52:31 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015231_营业执照.png
2025-07-15 01:53:27 | INFO | app.evidences.services:batch_create_with_classification:355 - 成功完成4个证据的上传和分类
2025-07-15 01:53:27 | INFO | app.evidences.routers:batch_create_evidences_with_classification:313 - 批量创建证据+分类成功: 成功数量=4
2025-07-15 01:53:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 201 - 耗时: 57.7429秒
2025-07-15 01:53:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 01:53:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 307 - 耗时: 0.0012秒
2025-07-15 01:53:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 01:53:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0789秒
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users?limit=10 - 状态码: 200 - 耗时: 0.0226秒
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 307 - 耗时: 0.0048秒
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0016秒
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0007秒
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0955秒
2025-07-15 01:54:45 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.1347秒
2025-07-15 01:54:47 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=10
2025-07-15 01:54:47 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=10 - 状态码: 307 - 耗时: 0.0073秒
2025-07-15 01:54:47 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=10
2025-07-15 01:54:47 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=10 - 状态码: 200 - 耗时: 0.1155秒
2025-07-15 01:54:50 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 01:54:50 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 307 - 耗时: 0.1856秒
2025-07-15 01:54:50 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 01:54:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.4358秒
2025-07-15 01:55:47 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-15 01:55:47 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 200 - 耗时: 0.0070秒
2025-07-15 01:55:47 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-15 01:55:47 | INFO | app.evidences.routers:batch_create_evidences_with_classification:271 - 接收批量创建证据+分类请求: 案件ID=3, 文件数量=1
2025-07-15 01:55:47 | INFO | app.evidences.routers:batch_create_evidences_with_classification:302 - 开始批量创建证据+分类: 案件ID=3, 文件数量=1
2025-07-15 01:55:47 | INFO | app.evidences.services:batch_create:225 - 开始批量创建证据: 案件ID=3, 文件数量=1
2025-07-15 01:55:47 | DEBUG | app.evidences.services:batch_create:230 - 处理第1个文件: 营业执照.png, 大小: 369499
2025-07-15 01:55:47 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 营业执照.png
2025-07-15 01:55:47 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 01:55:47 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 01:55:47 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 369499 字节
2025-07-15 01:55:47 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 营业执照.png, disposition=inline
2025-07-15 01:55:47 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 营业执照.png, 文件夹: images
2025-07-15 01:55:47 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 369499 字节
2025-07-15 01:55:47 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015547_营业执照.png
2025-07-15 01:55:47 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015547_营业执照.png
2025-07-15 01:55:47 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015547_营业执照.png, disposition=inline
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015547_营业执照.png
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015547_营业执照.png
2025-07-15 01:55:48 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 营业执照.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015547_营业执照.png
2025-07-15 01:55:48 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 营业执照.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015547_营业执照.png
2025-07-15 01:55:48 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 营业执照.png
2025-07-15 01:55:48 | INFO | app.evidences.services:batch_create:260 - 成功提交1个证据到数据库
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 营业执照.png, 文件夹: images
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 369499 字节
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015548_营业执照.png
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015548_营业执照.png
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015548_营业执照.png, disposition=inline
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015548_营业执照.png
2025-07-15 01:55:48 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015548_营业执照.png
2025-07-15 01:56:04 | INFO | app.evidences.services:batch_create_with_classification:355 - 成功完成1个证据的上传和分类
2025-07-15 01:56:04 | INFO | app.evidences.routers:batch_create_evidences_with_classification:313 - 批量创建证据+分类成功: 成功数量=1
2025-07-15 01:56:04 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 201 - 耗时: 17.4121秒
2025-07-15 01:56:04 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 01:56:04 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 307 - 耗时: 0.0014秒
2025-07-15 01:56:04 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 01:56:05 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0556秒
2025-07-15 01:56:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 01:56:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0089秒
2025-07-15 01:56:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 01:56:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0895秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 200 - 耗时: 0.0127秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 200 - 耗时: 0.0041秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 307 - 耗时: 0.0074秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 307 - 耗时: 0.0016秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.0031秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.0036秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.1414秒
2025-07-15 01:56:31 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.2398秒
2025-07-15 01:56:44 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/
2025-07-15 01:56:44 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/ - 状态码: 200 - 耗时: 0.0345秒
2025-07-15 01:56:44 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/static/style.css
2025-07-15 01:56:44 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/static/script.js
2025-07-15 01:56:44 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/static/style.css - 状态码: 304 - 耗时: 0.0344秒
2025-07-15 01:56:44 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/static/script.js - 状态码: 304 - 耗时: 0.0354秒
2025-07-15 01:56:45 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/favicon.ico
2025-07-15 01:56:45 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/favicon.ico - 状态码: 404 - 耗时: 0.0059秒
2025-07-15 01:57:06 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: temp_file_187650424462656.jpg, 文件夹: images
2025-07-15 01:57:06 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 814248 字节
2025-07-15 01:57:06 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015706_temp_file_187650424462656.jpg
2025-07-15 01:57:06 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015706_temp_file_187650424462656.jpg
2025-07-15 01:57:06 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015706_temp_file_187650424462656.jpg, disposition=inline
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015706_temp_file_187650424462656.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015706_temp_file_187650424462656.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: temp_file_187650419606192.jpg, 文件夹: images
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 603343 字节
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015707_temp_file_187650419606192.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015707_temp_file_187650419606192.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015707_temp_file_187650419606192.jpg, disposition=inline
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015707_temp_file_187650419606192.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015707_temp_file_187650419606192.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: temp_file_281472932519952.jpg, 文件夹: images
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715015707_temp_file_281472932519952.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715015707_temp_file_281472932519952.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715015707_temp_file_281472932519952.jpg, disposition=inline
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715015707_temp_file_281472932519952.jpg
2025-07-15 01:57:07 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715015707_temp_file_281472932519952.jpg
2025-07-15 02:01:01 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification
2025-07-15 02:01:01 | INFO | app.evidences.routers:batch_create_evidences_with_classification:271 - 接收批量创建证据+分类请求: 案件ID=3, 文件数量=5
2025-07-15 02:01:01 | INFO | app.evidences.routers:batch_create_evidences_with_classification:302 - 开始批量创建证据+分类: 案件ID=3, 文件数量=5
2025-07-15 02:01:01 | INFO | app.evidences.services:batch_create:225 - 开始批量创建证据: 案件ID=3, 文件数量=5
2025-07-15 02:01:01 | DEBUG | app.evidences.services:batch_create:230 - 处理第1个文件: 1.jpg, 大小: 5558278
2025-07-15 02:01:01 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 1.jpg
2025-07-15 02:01:01 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: jpg
2025-07-15 02:01:01 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 02:01:01 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 5558278 字节
2025-07-15 02:01:01 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 1.jpg, disposition=inline
2025-07-15 02:01:01 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-15 02:01:01 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-15 02:01:01 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020101_1.jpg
2025-07-15 02:01:01 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020101_1.jpg
2025-07-15 02:01:01 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020101_1.jpg, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020101_1.jpg
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020101_1.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 1.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020101_1.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 1.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020101_1.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 1.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:230 - 处理第2个文件: 2.png, 大小: 814248
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 2.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 814248 字节
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 2.png, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 2.png, 文件夹: images
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 814248 字节
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020102_2.png
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020102_2.png
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020102_2.png, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020102_2.png
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_2.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 2.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_2.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 2.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_2.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 2.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:230 - 处理第3个文件: 3.png, 大小: 603343
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 3.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 603343 字节
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 3.png, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 3.png, 文件夹: images
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 603343 字节
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020102_3.png
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020102_3.png
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020102_3.png, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020102_3.png
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_3.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 3.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_3.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 3.png, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_3.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 3.png
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:230 - 处理第4个文件: 4.jpg, 大小: 474010
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 4.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 474010 字节
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 4.jpg, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 4.jpg, 文件夹: images
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 474010 字节
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020102_4.jpg
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020102_4.jpg
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020102_4.jpg, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020102_4.jpg
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_4.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 4.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_4.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 4.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_4.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 4.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:230 - 处理第5个文件: 5.jpg, 大小: 195296
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:37 - 开始上传文件: 5.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:42 - 文件扩展名: jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:55 - 存储文件夹: images
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:61 - 文件大小: 195296 字节
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:72 - 开始上传文件到COS: 5.jpg, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 5.jpg, 文件夹: images
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 195296 字节
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020102_5.jpg
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020102_5.jpg
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020102_5.jpg, disposition=inline
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020102_5.jpg
2025-07-15 02:01:02 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_5.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:upload_file:74 - 文件上传成功: 5.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_5.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:234 - 文件上传成功: 5.jpg, URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020102_5.jpg
2025-07-15 02:01:02 | DEBUG | app.evidences.services:batch_create:248 - 证据对象创建成功: 5.jpg
2025-07-15 02:01:03 | INFO | app.evidences.services:batch_create:260 - 成功提交5个证据到数据库
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 1.jpg, 文件夹: images
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 5558278 字节
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020103_1.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020103_1.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020103_1.jpg, disposition=inline
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020103_1.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020103_1.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 2.png, 文件夹: images
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 814248 字节
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020103_2.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020103_2.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020103_2.png, disposition=inline
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020103_2.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020103_2.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 3.png, 文件夹: images
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 603343 字节
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020103_3.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020103_3.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020103_3.png, disposition=inline
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020103_3.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020103_3.png
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 4.jpg, 文件夹: images
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 474010 字节
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020103_4.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020103_4.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020103_4.jpg, disposition=inline
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020103_4.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020103_4.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:39 - COS服务开始上传文件: 5.jpg, 文件夹: images
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:57 - 文件大小: 195296 字节
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:81 - 生成唯一文件名: 20250715020103_5.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:88 - 对象键: images/20250715020103_5.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:95 - 开始上传到COS: Bucket=hui-ai-lawyer-1309488351, Key=images/20250715020103_5.jpg, disposition=inline
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:105 - COS上传成功: images/20250715020103_5.jpg
2025-07-15 02:01:03 | DEBUG | app.integrations.cos:upload_file:109 - 生成文件URL: https://hui-ai-lawyer-1309488351.cos.ap-guangzhou.myqcloud.com/images/20250715020103_5.jpg
2025-07-15 02:03:26 | INFO | app.evidences.services:batch_create_with_classification:355 - 成功完成5个证据的上传和分类
2025-07-15 02:03:26 | INFO | app.evidences.routers:batch_create_evidences_with_classification:313 - 批量创建证据+分类成功: 成功数量=5
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/evidences/batch-with-classification - 状态码: 201 - 耗时: 144.7859秒
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0011秒
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 307 - 耗时: 0.0030秒
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0030秒
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 02:03:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0971秒
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=1
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.0051秒
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=1
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=1 - 状态码: 307 - 耗时: 0.0143秒
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=1
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.0086秒
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=1
2025-07-15 02:05:27 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.1066秒
2025-07-15 02:49:58 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users?limit=10
2025-07-15 02:49:58 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users?limit=10 - 状态码: 200 - 耗时: 0.0203秒
2025-07-15 02:49:58 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 02:49:58 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0081秒
2025-07-15 02:49:58 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10
2025-07-15 02:49:58 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0007秒
2025-07-15 02:49:58 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 02:49:59 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.1036秒
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 200 - 耗时: 0.0107秒
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 307 - 耗时: 0.0029秒
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.0022秒
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 02:50:00 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.0890秒
2025-07-15 02:50:10 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases?limit=10
2025-07-15 02:50:10 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases?limit=10 - 状态码: 200 - 耗时: 0.0062秒
2025-07-15 02:50:10 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=10
2025-07-15 02:50:10 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=10 - 状态码: 307 - 耗时: 0.0020秒
2025-07-15 02:50:10 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=10
2025-07-15 02:50:10 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=10 - 状态码: 200 - 耗时: 0.0008秒
2025-07-15 02:50:10 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=10
2025-07-15 02:50:11 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=10 - 状态码: 200 - 耗时: 0.1648秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 200 - 耗时: 0.0280秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 200 - 耗时: 0.0099秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 307 - 耗时: 0.0091秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 307 - 耗时: 0.0016秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.0013秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.0023秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.1436秒
2025-07-15 02:50:15 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.0999秒
2025-07-15 02:50:30 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 02:50:30 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0081秒
2025-07-15 02:50:30 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 02:50:30 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0741秒
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=1
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.0101秒
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=1
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=1 - 状态码: 307 - 耗时: 0.0065秒
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=1
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.0005秒
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=1
2025-07-15 02:51:09 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=1 - 状态码: 200 - 耗时: 0.0970秒
2025-07-15 02:51:14 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 02:51:14 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0209秒
2025-07-15 02:51:14 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 02:51:14 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0543秒
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0165秒
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10&case_id=3 - 状态码: 307 - 耗时: 0.0020秒
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.0018秒
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3
2025-07-15 02:51:28 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10&case_id=3 - 状态码: 200 - 耗时: 0.1340秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 200 - 耗时: 0.0307秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users?limit=10 - 状态码: 200 - 耗时: 0.0134秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 307 - 耗时: 0.0095秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0024秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.0018秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0013秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.1869秒
2025-07-15 03:06:53 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.1063秒
2025-07-15 03:08:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 03:08:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0100秒
2025-07-15 03:08:26 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 03:08:26 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0832秒
2025-07-15 03:08:50 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs?limit=10
2025-07-15 03:08:50 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs?limit=10 - 状态码: 307 - 耗时: 0.0140秒
2025-07-15 03:08:50 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/?limit=10
2025-07-15 03:08:50 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/?limit=10 - 状态码: 200 - 耗时: 0.0771秒
2025-07-15 03:08:59 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users?limit=10
2025-07-15 03:08:59 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users?limit=10 - 状态码: 307 - 耗时: 0.0098秒
2025-07-15 03:08:59 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/users/?limit=10
2025-07-15 03:08:59 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/users/?limit=10 - 状态码: 200 - 耗时: 0.0918秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 200 - 耗时: 0.0352秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 200 - 耗时: 0.0150秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences?limit=10
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases?limit=1000
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences?limit=10 - 状态码: 307 - 耗时: 0.0137秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases?limit=1000 - 状态码: 307 - 耗时: 0.0077秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.0021秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: OPTIONS http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.0021秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/evidences/?limit=10
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/cases/?limit=1000
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/cases/?limit=1000 - 状态码: 200 - 耗时: 0.1668秒
2025-07-15 04:01:49 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/evidences/?limit=10 - 状态码: 200 - 耗时: 0.2660秒
2025-07-15 07:02:41 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/login/access-token
2025-07-15 07:02:41 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.4469秒
2025-07-15 07:02:47 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/login/access-token
2025-07-15 07:02:48 | ERROR | app.core.middleware:http_exception_handler:12 - HTTPException: 用户名或密码不正确 - POST /api/v1/login/access-token
2025-07-15 07:02:48 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/login/access-token - 状态码: 401 - 耗时: 0.3094秒
2025-07-15 07:02:51 | INFO | app.core.middleware:dispatch:54 - 开始请求: POST http://localhost:8000/api/v1/login/access-token
2025-07-15 07:02:51 | INFO | app.core.middleware:dispatch:62 - 完成请求: POST http://localhost:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.3205秒
2025-07-15 07:02:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:02:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0756秒
2025-07-15 07:02:55 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:02:56 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0604秒
2025-07-15 07:03:03 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs
2025-07-15 07:03:03 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs - 状态码: 307 - 耗时: 0.0114秒
2025-07-15 07:03:03 | INFO | app.core.middleware:dispatch:54 - 开始请求: GET http://localhost:8000/api/v1/staffs/
2025-07-15 07:03:03 | INFO | app.core.middleware:dispatch:62 - 完成请求: GET http://localhost:8000/api/v1/staffs/ - 状态码: 200 - 耗时: 0.0931秒
2025-07-15 07:04:54 | INFO | app.core.middleware:dispatch:54 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:04:54 | ERROR | app.core.middleware:http_exception_handler:12 - HTTPException: Not authenticated - PUT /api/v1/staffs/me
2025-07-15 07:04:54 | INFO | app.core.middleware:dispatch:62 - 完成请求: PUT http://localhost:8000/api/v1/staffs/me - 状态码: 401 - 耗时: 0.1466秒
2025-07-15 07:05:25 | INFO | app.core.middleware:dispatch:54 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:05:25 | ERROR | app.core.middleware:validation_exception_handler:26 - Validation error: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'password=admin12345'}] for request body: None
2025-07-15 07:05:25 | ERROR | app.core.middleware:dispatch:66 - 请求异常: PUT http://localhost:8000/api/v1/staffs/me - 错误: Object of type bytes is not JSON serializable
2025-07-15 07:05:25 | ERROR | app.core.middleware:global_exception_handler:39 - Unhandled error: Object of type bytes is not JSON serializable
  + Exception Group Traceback (most recent call last):
  |
  |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0xffff82fdda00>
  |                │     └ <function create_task_group at 0xffff87dc4f40>
  |                └ <module 'anyio' from '/app/.venv/lib/python3.12/site-packages/anyio/__init__.py'>
  |   File "/app/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff82e47ba0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff869...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff82fb4c50>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0xffff86a50f40>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TypeError('Object of type bytes is not JSON serializable')])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0xffff82cf6810>
    |     └ <contextlib._GeneratorContextManager object at 0xffff82fdc860>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82e47ce0>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff869627e0>
    |                      │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>>
    |                      └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
    |
    |   File "/app/app/core/middleware.py", line 57, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0xffff869627e0>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82e47ce0>
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ TypeError('Object of type bytes is not JSON serializable')
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff82e46d40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
    |           └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff82e46d40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff82e46d40>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │                            │    │    └ <starlette.requests.Request object at 0xffff82fec8f0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
    |           └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff87fe31d0>>
    |           └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │     └ <function Route.handle at 0xffff869345e0>
    |           └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <function request_response.<locals>.app at 0xffff82cb8b80>
    |           └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │                            │    └ <starlette.requests.Request object at 0xffff82fed7c0>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff82e46a20>
    |           └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    |     response = await handler(conn, exc)
    |                      │       └ <starlette.requests.Request object at 0xffff82fed7c0>
    |                      └ <function validation_exception_handler at 0xffff86991120>
    |
    |   File "/app/app/core/middleware.py", line 27, in validation_exception_handler
    |     return JSONResponse(
    |            └ <class 'starlette.responses.JSONResponse'>
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 182, in __init__
    |     super().__init__(content, status_code, headers, media_type, background)
    |                      │        │            │        │           └ None
    |                      │        │            │        └ None
    |                      │        │            └ None
    |                      │        └ 422
    |                      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 45, in __init__
    |     self.body = self.render(content)
    |     │           │    │      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
    |     │           │    └ <function JSONResponse.render at 0xffff86a6a520>
    |     │           └ <starlette.responses.JSONResponse object at 0xffff83093650>
    |     └ <starlette.responses.JSONResponse object at 0xffff83093650>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 185, in render
    |     return json.dumps(
    |            │    └ <function dumps at 0xffff88bc36a0>
    |            └ <module 'json' from '/usr/local/lib/python3.12/json/__init__.py'>
    |   File "/usr/local/lib/python3.12/json/__init__.py", line 238, in dumps
    |     **kw).encode(obj)
    |       │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
    |       └ {}
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 200, in encode
    |     chunks = self.iterencode(o, _one_shot=True)
    |              │    │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
    |              │    └ <function JSONEncoder.iterencode at 0xffff88c044a0>
    |              └ <json.encoder.JSONEncoder object at 0xffff82fdd610>
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 258, in iterencode
    |     return _iterencode(o, 0)
    |            │           └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
    |            └ <_json.Encoder object at 0xffff82f0ada0>
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 180, in default
    |     raise TypeError(f'Object of type {o.__class__.__name__} '
    |                                       │ │         └ <member '__name__' of 'getset_descriptor' objects>
    |                                       │ └ <attribute '__class__' of 'object' objects>
    |                                       └ b'password=admin12345'
    |
    | TypeError: Object of type bytes is not JSON serializable
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/app/.venv/bin/uvicorn", line 10, in <module>
    sys.exit(main())
    │   │    └ <Command main>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           │    │     │       └ {}
           │    │     └ ()
           │    └ <function Command.main at 0xffff880fd620>
           └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1363, in main
    rv = self.invoke(ctx)
         │    │      └ <click.core.Context object at 0xffff88f352e0>
         │    └ <function Command.invoke at 0xffff880fd300>
         └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           │   │      │    │           │   └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │   │      │    │           └ <click.core.Context object at 0xffff88f352e0>
           │   │      │    └ <function main at 0xffff87e880e0>
           │   │      └ <Command main>
           │   └ <function Context.invoke at 0xffff880fc540>
           └ <click.core.Context object at 0xffff88f352e0>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 794, in invoke
    return callback(*args, **kwargs)
           │         │       └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │         └ ()
           └ <function main at 0xffff87e880e0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 413, in main
    run(
    └ <function run at 0xffff880fbb00>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0xffff87f04180>
    └ <uvicorn.server.Server object at 0xffff88f35340>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0xffff87f04220>
           │       │   └ <uvicorn.server.Server object at 0xffff88f35340>
           │       └ <function run at 0xffff890dc680>
           └ <module 'asyncio' from '/usr/local/lib/python3.12/asyncio/__init__.py'>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0xffff87e367a0>
           │      └ <function Runner.run at 0xffff88b402c0>
           └ <asyncio.runners.Runner object at 0xffff8811a270>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /app/.venv/lib/python3.12/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <cyfunction Loop.run_until_complete at 0xffff87e08450>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0xffff8811a270>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff83907aa0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff86961c...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff869...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0xffff87e5db20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff83907aa0>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff86961c...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff869...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff86961c...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff869...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff82fb4c50>
          └ <fastapi.applications.FastAPI object at 0xffff87e5db20>
> File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff82e47ba0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff869...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff82fb4c50>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0xffff86a50f40>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TypeError('Object of type bytes is not JSON serializable')])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0xffff82cf6810>
    └ <contextlib._GeneratorContextManager object at 0xffff82fdc860>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82e47ce0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff869627e0>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>>
                     └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>

  File "/app/app/core/middleware.py", line 57, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0xffff869627e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82e47ce0>

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ TypeError('Object of type bytes is not JSON serializable')
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff82e46d40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
          └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff82e46d40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff82e46d40>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0xffff82fec8f0>
          │                            │    └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
          └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff87fe31d0>>
          └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │     └ <function Route.handle at 0xffff869345e0>
          └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <function request_response.<locals>.app at 0xffff82cb8b80>
          └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff82e467a0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff82e465c0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    └ <starlette.requests.Request object at 0xffff82fed7c0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff82e46a20>
          └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
                     │       └ <starlette.requests.Request object at 0xffff82fed7c0>
                     └ <function validation_exception_handler at 0xffff86991120>

  File "/app/app/core/middleware.py", line 27, in validation_exception_handler
    return JSONResponse(
           └ <class 'starlette.responses.JSONResponse'>

  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 182, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 422
                     └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 45, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
    │           │    └ <function JSONResponse.render at 0xffff86a6a520>
    │           └ <starlette.responses.JSONResponse object at 0xffff83093650>
    └ <starlette.responses.JSONResponse object at 0xffff83093650>
  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 185, in render
    return json.dumps(
           │    └ <function dumps at 0xffff88bc36a0>
           └ <module 'json' from '/usr/local/lib/python3.12/json/__init__.py'>
  File "/usr/local/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
      │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
      └ {}
  File "/usr/local/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
             │    └ <function JSONEncoder.iterencode at 0xffff88c044a0>
             └ <json.encoder.JSONEncoder object at 0xffff82fdd610>
  File "/usr/local/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:25.772646+08:00', 'data': None, 'detail': [{'type': 'mode...
           └ <_json.Encoder object at 0xffff82f0ada0>
  File "/usr/local/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>
                                      │ └ <attribute '__class__' of 'object' objects>
                                      └ b'password=admin12345'

TypeError: Object of type bytes is not JSON serializable
2025-07-15 07:05:28 | INFO | app.core.middleware:dispatch:54 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:05:28 | ERROR | app.core.middleware:validation_exception_handler:26 - Validation error: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'password=admin12345'}] for request body: None
2025-07-15 07:05:28 | ERROR | app.core.middleware:dispatch:66 - 请求异常: PUT http://localhost:8000/api/v1/staffs/me - 错误: Object of type bytes is not JSON serializable
2025-07-15 07:05:28 | ERROR | app.core.middleware:global_exception_handler:39 - Unhandled error: Object of type bytes is not JSON serializable
  + Exception Group Traceback (most recent call last):
  |
  |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0xffff82fefe00>
  |                │     └ <function create_task_group at 0xffff87dc4f40>
  |                └ <module 'anyio' from '/app/.venv/lib/python3.12/site-packages/anyio/__init__.py'>
  |   File "/app/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff82ee62a0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82f...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff82fb4c50>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0xffff86a50f40>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TypeError('Object of type bytes is not JSON serializable')])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0xffff82e72670>
    |     └ <contextlib._GeneratorContextManager object at 0xffff82fefdd0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82ee6340>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff82fefc80>
    |                      │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>>
    |                      └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
    |
    |   File "/app/app/core/middleware.py", line 57, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0xffff82fefc80>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82ee6340>
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ TypeError('Object of type bytes is not JSON serializable')
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff80a74680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
    |           └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff80a74680>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff80a74680>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │                            │    │    └ <starlette.requests.Request object at 0xffff82feffe0>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
    |           └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff87fe31d0>>
    |           └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │     └ <function Route.handle at 0xffff869345e0>
    |           └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <function request_response.<locals>.app at 0xffff82cb8b80>
    |           └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │                            │    └ <starlette.requests.Request object at 0xffff82ff0290>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff80a76660>
    |           └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    |     response = await handler(conn, exc)
    |                      │       └ <starlette.requests.Request object at 0xffff82ff0290>
    |                      └ <function validation_exception_handler at 0xffff86991120>
    |
    |   File "/app/app/core/middleware.py", line 27, in validation_exception_handler
    |     return JSONResponse(
    |            └ <class 'starlette.responses.JSONResponse'>
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 182, in __init__
    |     super().__init__(content, status_code, headers, media_type, background)
    |                      │        │            │        │           └ None
    |                      │        │            │        └ None
    |                      │        │            └ None
    |                      │        └ 422
    |                      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 45, in __init__
    |     self.body = self.render(content)
    |     │           │    │      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
    |     │           │    └ <function JSONResponse.render at 0xffff86a6a520>
    |     │           └ <starlette.responses.JSONResponse object at 0xffff8314a360>
    |     └ <starlette.responses.JSONResponse object at 0xffff8314a360>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 185, in render
    |     return json.dumps(
    |            │    └ <function dumps at 0xffff88bc36a0>
    |            └ <module 'json' from '/usr/local/lib/python3.12/json/__init__.py'>
    |   File "/usr/local/lib/python3.12/json/__init__.py", line 238, in dumps
    |     **kw).encode(obj)
    |       │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
    |       └ {}
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 200, in encode
    |     chunks = self.iterencode(o, _one_shot=True)
    |              │    │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
    |              │    └ <function JSONEncoder.iterencode at 0xffff88c044a0>
    |              └ <json.encoder.JSONEncoder object at 0xffff83092120>
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 258, in iterencode
    |     return _iterencode(o, 0)
    |            │           └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
    |            └ <_json.Encoder object at 0xffff82f0ada0>
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 180, in default
    |     raise TypeError(f'Object of type {o.__class__.__name__} '
    |                                       │ │         └ <member '__name__' of 'getset_descriptor' objects>
    |                                       │ └ <attribute '__class__' of 'object' objects>
    |                                       └ b'password=admin12345'
    |
    | TypeError: Object of type bytes is not JSON serializable
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/app/.venv/bin/uvicorn", line 10, in <module>
    sys.exit(main())
    │   │    └ <Command main>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           │    │     │       └ {}
           │    │     └ ()
           │    └ <function Command.main at 0xffff880fd620>
           └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1363, in main
    rv = self.invoke(ctx)
         │    │      └ <click.core.Context object at 0xffff88f352e0>
         │    └ <function Command.invoke at 0xffff880fd300>
         └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           │   │      │    │           │   └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │   │      │    │           └ <click.core.Context object at 0xffff88f352e0>
           │   │      │    └ <function main at 0xffff87e880e0>
           │   │      └ <Command main>
           │   └ <function Context.invoke at 0xffff880fc540>
           └ <click.core.Context object at 0xffff88f352e0>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 794, in invoke
    return callback(*args, **kwargs)
           │         │       └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │         └ ()
           └ <function main at 0xffff87e880e0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 413, in main
    run(
    └ <function run at 0xffff880fbb00>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0xffff87f04180>
    └ <uvicorn.server.Server object at 0xffff88f35340>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0xffff87f04220>
           │       │   └ <uvicorn.server.Server object at 0xffff88f35340>
           │       └ <function run at 0xffff890dc680>
           └ <module 'asyncio' from '/usr/local/lib/python3.12/asyncio/__init__.py'>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0xffff87e367a0>
           │      └ <function Runner.run at 0xffff88b402c0>
           └ <asyncio.runners.Runner object at 0xffff8811a270>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /app/.venv/lib/python3.12/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <cyfunction Loop.run_until_complete at 0xffff87e08450>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0xffff8811a270>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff83907aa0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82feee...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82f...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0xffff87e5db20>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff83907aa0>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82feee...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82f...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82feee...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82f...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff82fb4c50>
          └ <fastapi.applications.FastAPI object at 0xffff87e5db20>
> File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff82ee62a0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff82f...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff82fb4c50>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0xffff86a50f40>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TypeError('Object of type bytes is not JSON serializable')])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0xffff82e72670>
    └ <contextlib._GeneratorContextManager object at 0xffff82fefdd0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82ee6340>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff82fefc80>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>>
                     └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>

  File "/app/app/core/middleware.py", line 57, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0xffff82fefc80>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff82ee6340>

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ TypeError('Object of type bytes is not JSON serializable')
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff80a74680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
          └ <app.core.middleware.LoggingMiddleware object at 0xffff82fd27e0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff80a74680>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0xffff832a29f0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff80a74680>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0xffff82feffe0>
          │                            │    └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff831487a0>
          └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff87fe31d0>>
          └ <fastapi.routing.APIRouter object at 0xffff87fe31d0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │     └ <function Route.handle at 0xffff869345e0>
          └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <function request_response.<locals>.app at 0xffff82cb8b80>
          └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff80a768e0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff80a74220>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    └ <starlette.requests.Request object at 0xffff82ff0290>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff80a76660>
          └ <function wrap_app_handling_exceptions at 0xffff86a8b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
                     │       └ <starlette.requests.Request object at 0xffff82ff0290>
                     └ <function validation_exception_handler at 0xffff86991120>

  File "/app/app/core/middleware.py", line 27, in validation_exception_handler
    return JSONResponse(
           └ <class 'starlette.responses.JSONResponse'>

  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 182, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 422
                     └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 45, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
    │           │    └ <function JSONResponse.render at 0xffff86a6a520>
    │           └ <starlette.responses.JSONResponse object at 0xffff8314a360>
    └ <starlette.responses.JSONResponse object at 0xffff8314a360>
  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 185, in render
    return json.dumps(
           │    └ <function dumps at 0xffff88bc36a0>
           └ <module 'json' from '/usr/local/lib/python3.12/json/__init__.py'>
  File "/usr/local/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
      │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
      └ {}
  File "/usr/local/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
             │    └ <function JSONEncoder.iterencode at 0xffff88c044a0>
             └ <json.encoder.JSONEncoder object at 0xffff83092120>
  File "/usr/local/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:05:28.879336+08:00', 'data': None, 'detail': [{'type': 'mode...
           └ <_json.Encoder object at 0xffff82f0ada0>
  File "/usr/local/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>
                                      │ └ <attribute '__class__' of 'object' objects>
                                      └ b'password=admin12345'

TypeError: Object of type bytes is not JSON serializable
2025-07-15 07:22:40 | INFO | app.core.middleware:dispatch:54 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:22:40 | ERROR | app.core.middleware:validation_exception_handler:26 - Validation error: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'password=admin12345'}] for request body: None
2025-07-15 07:22:40 | ERROR | app.core.middleware:dispatch:66 - 请求异常: PUT http://localhost:8000/api/v1/staffs/me - 错误: Object of type bytes is not JSON serializable
2025-07-15 07:22:40 | ERROR | app.core.middleware:global_exception_handler:39 - Unhandled error: Object of type bytes is not JSON serializable
  + Exception Group Traceback (most recent call last):
  |
  |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 76, in collapse_excgroups
  |     yield
  |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 177, in __call__
  |     async with anyio.create_task_group() as task_group:
  |                │     │                      └ <anyio._backends._asyncio.TaskGroup object at 0xffff8fc68da0>
  |                │     └ <function create_task_group at 0xffff94a44f40>
  |                └ <module 'anyio' from '/app/.venv/lib/python3.12/site-packages/anyio/__init__.py'>
  |   File "/app/.venv/lib/python3.12/site-packages/anyio/_backends/_asyncio.py", line 772, in __aexit__
  |     raise BaseExceptionGroup(
  |
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Traceback (most recent call last):
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    |     await self.app(scope, receive, _send)
    |           │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff8fc085e0>
    |           │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc...
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>
    |           └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff8fc5b9b0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    |     with recv_stream, send_stream, collapse_excgroups():
    |          │            │            └ <function collapse_excgroups at 0xffff936d4f40>
    |          │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
    |          └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
    |   File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    |     self.gen.throw(value)
    |     │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TypeError('Object of type bytes is not JSON serializable')])
    |     │    │   └ <method 'throw' of 'generator' objects>
    |     │    └ <generator object collapse_excgroups at 0xffff8f973b90>
    |     └ <contextlib._GeneratorContextManager object at 0xffff8fc68d70>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    |     raise exc
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    |     response = await self.dispatch_func(request, call_next)
    |                      │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff8fc08b80>
    |                      │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff8fc5fcb0>
    |                      │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>>
    |                      └ <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>
    |
    |   File "/app/app/core/middleware.py", line 57, in dispatch
    |     response = await call_next(request)
    |                      │         └ <starlette.middleware.base._CachedRequest object at 0xffff8fc5fcb0>
    |                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff8fc08b80>
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    |     raise app_exc
    |           └ TypeError('Object of type bytes is not JSON serializable')
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    |     await self.app(scope, receive_or_disconnect, send_no_error)
    |           │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8fafbc40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff8fc52cf0>
    |           └ <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8fafbc40>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff8fc5b6e0>
    |           └ <starlette.middleware.cors.CORSMiddleware object at 0xffff8fc52cf0>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    |     await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
    |           │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8fafbc40>
    |           │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │                            │    │    └ <starlette.requests.Request object at 0xffff8ff21580>
    |           │                            │    └ <fastapi.routing.APIRouter object at 0xffff935ba570>
    |           │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff8fc5b6e0>
    |           └ <function wrap_app_handling_exceptions at 0xffff93707100>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    |     raise exc
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    |     await app(scope, receive, sender)
    |           │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
    |           │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           └ <fastapi.routing.APIRouter object at 0xffff935ba570>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    |     await self.middleware_stack(scope, receive, send)
    |           │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
    |           │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff935ba570>>
    |           └ <fastapi.routing.APIRouter object at 0xffff935ba570>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    |     await route.handle(scope, receive, send)
    |           │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
    |           │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │     └ <function Route.handle at 0xffff935b45e0>
    |           └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    |     await self.app(scope, receive, send)
    |           │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
    |           │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │    └ <function request_response.<locals>.app at 0xffff8f934b80>
    |           └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    |     await wrap_app_handling_exceptions(app, request)(scope, receive, send)
    |           │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
    |           │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
    |           │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
    |           │                            │    └ <starlette.requests.Request object at 0xffff8fc68f50>
    |           │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff8facaf20>
    |           └ <function wrap_app_handling_exceptions at 0xffff93707100>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    |     response = await handler(conn, exc)
    |                      │       └ <starlette.requests.Request object at 0xffff8fc68f50>
    |                      └ <function validation_exception_handler at 0xffff93615120>
    |
    |   File "/app/app/core/middleware.py", line 27, in validation_exception_handler
    |     return JSONResponse(
    |            └ <class 'starlette.responses.JSONResponse'>
    |
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 182, in __init__
    |     super().__init__(content, status_code, headers, media_type, background)
    |                      │        │            │        │           └ None
    |                      │        │            │        └ None
    |                      │        │            └ None
    |                      │        └ 422
    |                      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 45, in __init__
    |     self.body = self.render(content)
    |     │           │    │      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
    |     │           │    └ <function JSONResponse.render at 0xffff936de520>
    |     │           └ <starlette.responses.JSONResponse object at 0xffff93647d10>
    |     └ <starlette.responses.JSONResponse object at 0xffff93647d10>
    |   File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 185, in render
    |     return json.dumps(
    |            │    └ <function dumps at 0xffff958436a0>
    |            └ <module 'json' from '/usr/local/lib/python3.12/json/__init__.py'>
    |   File "/usr/local/lib/python3.12/json/__init__.py", line 238, in dumps
    |     **kw).encode(obj)
    |       │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
    |       └ {}
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 200, in encode
    |     chunks = self.iterencode(o, _one_shot=True)
    |              │    │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
    |              │    └ <function JSONEncoder.iterencode at 0xffff958844a0>
    |              └ <json.encoder.JSONEncoder object at 0xffff93647c80>
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 258, in iterencode
    |     return _iterencode(o, 0)
    |            │           └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
    |            └ <_json.Encoder object at 0xffff8fb0bf40>
    |   File "/usr/local/lib/python3.12/json/encoder.py", line 180, in default
    |     raise TypeError(f'Object of type {o.__class__.__name__} '
    |                                       │ │         └ <member '__name__' of 'getset_descriptor' objects>
    |                                       │ └ <attribute '__class__' of 'object' objects>
    |                                       └ b'password=admin12345'
    |
    | TypeError: Object of type bytes is not JSON serializable
    +------------------------------------


During handling of the above exception, another exception occurred:


Traceback (most recent call last):

  File "/app/.venv/bin/uvicorn", line 10, in <module>
    sys.exit(main())
    │   │    └ <Command main>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           │    │     │       └ {}
           │    │     └ ()
           │    └ <function Command.main at 0xffff94d7d620>
           └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1363, in main
    rv = self.invoke(ctx)
         │    │      └ <click.core.Context object at 0xffff95bb5340>
         │    └ <function Command.invoke at 0xffff94d7d300>
         └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           │   │      │    │           │   └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │   │      │    │           └ <click.core.Context object at 0xffff95bb5340>
           │   │      │    └ <function main at 0xffff94b080e0>
           │   │      └ <Command main>
           │   └ <function Context.invoke at 0xffff94d7c540>
           └ <click.core.Context object at 0xffff95bb5340>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 794, in invoke
    return callback(*args, **kwargs)
           │         │       └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │         └ ()
           └ <function main at 0xffff94b080e0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 413, in main
    run(
    └ <function run at 0xffff94d7bb00>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0xffff94b84180>
    └ <uvicorn.server.Server object at 0xffff95a9bf20>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0xffff94b84220>
           │       │   └ <uvicorn.server.Server object at 0xffff95a9bf20>
           │       └ <function run at 0xffff95d5c680>
           └ <module 'asyncio' from '/usr/local/lib/python3.12/asyncio/__init__.py'>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0xffff94ab67a0>
           │      └ <function Runner.run at 0xffff957c02c0>
           └ <asyncio.runners.Runner object at 0xffff95aa3380>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /app/.venv/lib/python3.12/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <cyfunction Loop.run_until_complete at 0xffff94a88450>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0xffff95aa3380>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff94d97260>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc5fa...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0xffff93a46b40>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff94d97260>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc5fa...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc5fa...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff8fc5b9b0>
          └ <fastapi.applications.FastAPI object at 0xffff93a46b40>
> File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff8fc085e0>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8fc...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff8fc5b9b0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0xffff936d4f40>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [TypeError('Object of type bytes is not JSON serializable')])
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0xffff8f973b90>
    └ <contextlib._GeneratorContextManager object at 0xffff8fc68d70>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff8fc08b80>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff8fc5fcb0>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>>
                     └ <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>

  File "/app/app/core/middleware.py", line 57, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0xffff8fc5fcb0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff8fc08b80>

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ TypeError('Object of type bytes is not JSON serializable')
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8fafbc40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff8fc52cf0>
          └ <app.core.middleware.LoggingMiddleware object at 0xffff8fe4fe00>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8fafbc40>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff8fc5b6e0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0xffff8fc52cf0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8fafbc40>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0xffff8ff21580>
          │                            │    └ <fastapi.routing.APIRouter object at 0xffff935ba570>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff8fc5b6e0>
          └ <function wrap_app_handling_exceptions at 0xffff93707100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          └ <fastapi.routing.APIRouter object at 0xffff935ba570>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff935ba570>>
          └ <fastapi.routing.APIRouter object at 0xffff935ba570>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │     └ <function Route.handle at 0xffff935b45e0>
          └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <function request_response.<locals>.app at 0xffff8f934b80>
          └ APIRoute(path='/api/v1/staffs/me', name='update_staff_me', methods=['PUT'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8facafc0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8fc0a160>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    └ <starlette.requests.Request object at 0xffff8fc68f50>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff8facaf20>
          └ <function wrap_app_handling_exceptions at 0xffff93707100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 59, in wrapped_app
    response = await handler(conn, exc)
                     │       └ <starlette.requests.Request object at 0xffff8fc68f50>
                     └ <function validation_exception_handler at 0xffff93615120>

  File "/app/app/core/middleware.py", line 27, in validation_exception_handler
    return JSONResponse(
           └ <class 'starlette.responses.JSONResponse'>

  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 182, in __init__
    super().__init__(content, status_code, headers, media_type, background)
                     │        │            │        │           └ None
                     │        │            │        └ None
                     │        │            └ None
                     │        └ 422
                     └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 45, in __init__
    self.body = self.render(content)
    │           │    │      └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
    │           │    └ <function JSONResponse.render at 0xffff936de520>
    │           └ <starlette.responses.JSONResponse object at 0xffff93647d10>
    └ <starlette.responses.JSONResponse object at 0xffff93647d10>
  File "/app/.venv/lib/python3.12/site-packages/starlette/responses.py", line 185, in render
    return json.dumps(
           │    └ <function dumps at 0xffff958436a0>
           └ <module 'json' from '/usr/local/lib/python3.12/json/__init__.py'>
  File "/usr/local/lib/python3.12/json/__init__.py", line 238, in dumps
    **kw).encode(obj)
      │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
      └ {}
  File "/usr/local/lib/python3.12/json/encoder.py", line 200, in encode
    chunks = self.iterencode(o, _one_shot=True)
             │    │          └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
             │    └ <function JSONEncoder.iterencode at 0xffff958844a0>
             └ <json.encoder.JSONEncoder object at 0xffff93647c80>
  File "/usr/local/lib/python3.12/json/encoder.py", line 258, in iterencode
    return _iterencode(o, 0)
           │           └ {'code': 422, 'message': '请求参数验证失败', 'timestamp': '2025-07-15T15:22:40.629435+08:00', 'data': None, 'detail': [{'type': 'mode...
           └ <_json.Encoder object at 0xffff8fb0bf40>
  File "/usr/local/lib/python3.12/json/encoder.py", line 180, in default
    raise TypeError(f'Object of type {o.__class__.__name__} '
                                      │ │         └ <member '__name__' of 'getset_descriptor' objects>
                                      │ └ <attribute '__class__' of 'object' objects>
                                      └ b'password=admin12345'

TypeError: Object of type bytes is not JSON serializable
2025-07-15 07:31:23 | INFO | app.core.middleware:dispatch:55 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:31:23 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'model_attributes_type', 'loc': ('body',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': b'password=admin12345'}] for request body: None
2025-07-15 07:31:23 | INFO | app.core.middleware:dispatch:63 - 完成请求: PUT http://localhost:8000/api/v1/staffs/me - 状态码: 422 - 耗时: 0.1291秒
2025-07-15 07:32:02 | INFO | app.core.middleware:dispatch:55 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:02 | INFO | app.core.middleware:dispatch:63 - 完成请求: PUT http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.5301秒
2025-07-15 07:32:09 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:09 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 无法验证凭据 - GET /api/v1/staffs/me
2025-07-15 07:32:09 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 401 - 耗时: 0.0196秒
2025-07-15 07:32:10 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:10 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 无法验证凭据 - GET /api/v1/staffs/me
2025-07-15 07:32:10 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 401 - 耗时: 0.0038秒
2025-07-15 07:32:11 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:11 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 无法验证凭据 - GET /api/v1/staffs/me
2025-07-15 07:32:11 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 401 - 耗时: 0.0038秒
2025-07-15 07:32:17 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/login/access-token
2025-07-15 07:32:17 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 用户名或密码不正确 - POST /api/v1/login/access-token
2025-07-15 07:32:17 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/login/access-token - 状态码: 401 - 耗时: 0.3251秒
2025-07-15 07:32:19 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/login/access-token
2025-07-15 07:32:19 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.3339秒
2025-07-15 07:32:22 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:22 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0764秒
2025-07-15 07:32:26 | INFO | app.core.middleware:dispatch:55 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:26 | INFO | app.core.middleware:dispatch:63 - 完成请求: PUT http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.3204秒
2025-07-15 07:32:31 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:31 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 无法验证凭据 - GET /api/v1/staffs/me
2025-07-15 07:32:31 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 401 - 耗时: 0.0114秒
2025-07-15 07:32:32 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:32 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 无法验证凭据 - GET /api/v1/staffs/me
2025-07-15 07:32:32 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 401 - 耗时: 0.0158秒
2025-07-15 07:32:34 | INFO | app.core.middleware:dispatch:55 - 开始请求: PUT http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:34 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 无法验证凭据 - PUT /api/v1/staffs/me
2025-07-15 07:32:34 | INFO | app.core.middleware:dispatch:63 - 完成请求: PUT http://localhost:8000/api/v1/staffs/me - 状态码: 401 - 耗时: 0.0324秒
2025-07-15 07:32:38 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/login/access-token
2025-07-15 07:32:39 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/login/access-token - 状态码: 200 - 耗时: 0.3191秒
2025-07-15 07:32:41 | INFO | app.core.middleware:dispatch:55 - 开始请求: GET http://localhost:8000/api/v1/staffs/me
2025-07-15 07:32:41 | INFO | app.core.middleware:dispatch:63 - 完成请求: GET http://localhost:8000/api/v1/staffs/me - 状态码: 200 - 耗时: 0.0418秒
2025-07-15 07:33:36 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/staffs
2025-07-15 07:33:36 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/staffs - 状态码: 307 - 耗时: 0.0188秒
2025-07-15 07:33:36 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/staffs/
2025-07-15 07:33:36 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 用户名已存在 - POST /api/v1/staffs/
2025-07-15 07:33:36 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/staffs/ - 状态码: 400 - 耗时: 0.1622秒
2025-07-15 07:33:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/staffs
2025-07-15 07:33:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/staffs - 状态码: 307 - 耗时: 0.0056秒
2025-07-15 07:33:46 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/staffs/
2025-07-15 07:33:46 | ERROR | app.core.middleware:http_exception_handler:13 - HTTPException: 用户名已存在 - POST /api/v1/staffs/
2025-07-15 07:33:46 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/staffs/ - 状态码: 400 - 耗时: 0.0364秒
2025-07-15 07:33:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/staffs
2025-07-15 07:33:49 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/staffs - 状态码: 307 - 耗时: 0.0145秒
2025-07-15 07:33:49 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/staffs/
2025-07-15 07:33:50 | ERROR | app.core.middleware:dispatch:67 - 请求异常: POST http://localhost:8000/api/v1/staffs/ - 错误: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column "email" of relation "staffs" violates not-null constraint
DETAIL:  Failing row contains (10, suengx33, null, $2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq, null, null, t, f, 2025-07-15 15:33:49.743533+08, 2025-07-15 15:33:49.743533+08).
[SQL: INSERT INTO staffs (username, hashed_password, is_active, is_superuser) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BOOLEAN, $4::BOOLEAN) RETURNING staffs.id, staffs.created_at, staffs.updated_at]
[parameters: ('suengx33', '$2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq', True, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 07:33:50 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column "email" of relation "staffs" violates not-null constraint
DETAIL:  Failing row contains (10, suengx33, null, $2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq, null, null, t, f, 2025-07-15 15:33:49.743533+08, 2025-07-15 15:33:49.743533+08).
[SQL: INSERT INTO staffs (username, hashed_password, is_active, is_superuser) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BOOLEAN, $4::BOOLEAN) RETURNING staffs.id, staffs.created_at, staffs.updated_at]
[parameters: ('suengx33', '$2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq', True, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 545, in _prepare_and_execute
    self._rows = deque(await prepared_stmt.fetch(*parameters))
    │    │       │           │             │      └ ('suengx33', '$2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq', True, False)
    │    │       │           │             └ <function PreparedStatement.fetch at 0xffff7e38ede0>
    │    │       │           └ <asyncpg.prepared_stmt.PreparedStatement object at 0xffff7c8b85e0>
    │    │       └ <class 'collections.deque'>
    │    └ <member '_rows' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 176, in fetch
    data = await self.__bind_execute(args, 0, timeout)
                 │                   │        └ None
                 │                   └ ('suengx33', '$2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq', True, False)
                 └ <asyncpg.prepared_stmt.PreparedStatement object at 0xffff7c8b85e0>
  File "/app/.venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 267, in __bind_execute
    data, status, _ = await self.__do_execute(
                            └ <asyncpg.prepared_stmt.PreparedStatement object at 0xffff7c8b85e0>
  File "/app/.venv/lib/python3.12/site-packages/asyncpg/prepared_stmt.py", line 256, in __do_execute
    return await executor(protocol)
                 │        └ <asyncpg.protocol.protocol.Protocol object at 0xffff7c7366d0>
                 └ <function PreparedStatement.__bind_execute.<locals>.<lambda> at 0xffff7a4a04a0>
  File "asyncpg/protocol/protocol.pyx", line 206, in bind_execute
    return await waiter

asyncpg.exceptions.NotNullViolationError: null value in column "email" of relation "staffs" violates not-null constraint
DETAIL:  Failing row contains (10, suengx33, null, $2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq, null, null, t, f, 2025-07-15 15:33:49.743533+08, 2025-07-15 15:33:49.743533+08).


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0xffff7ec7f560>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0xffff7ed2eb40>
    └ <sqlalchemy.engine.base.Connection object at 0xffff7c97d370>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('suengx33', '$2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq', True, False)
    │      │       └ 'INSERT INTO staffs (username, hashed_password, is_active, is_superuser) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BOOLEAN, $4::B...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0xffff7e525e40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0xffff7c7038b0>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0xffff7a3c1080 (otid=0xffff8036a3d0) dead>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_connection._rollback_and_discard at 0xffff7c811560>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0xffff7e525c60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ NotNullViolationError('null value in column "email" of relation "staffs" violates not-null constraint')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ NotNullViolationError('null value in column "email" of relation "staffs" violates not-null constraint')
          └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null value in column "email" of relation "staffs" viola...

sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError: <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column "email" of relation "staffs" violates not-null constraint
DETAIL:  Failing row contains (10, suengx33, null, $2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq, null, null, t, f, 2025-07-15 15:33:49.743533+08, 2025-07-15 15:33:49.743533+08).


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/app/.venv/bin/uvicorn", line 10, in <module>
    sys.exit(main())
    │   │    └ <Command main>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           │    │     │       └ {}
           │    │     └ ()
           │    └ <function Command.main at 0xffff81a9d620>
           └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1363, in main
    rv = self.invoke(ctx)
         │    │      └ <click.core.Context object at 0xffff82544e60>
         │    └ <function Command.invoke at 0xffff81a9d300>
         └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           │   │      │    │           │   └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │   │      │    │           └ <click.core.Context object at 0xffff82544e60>
           │   │      │    └ <function main at 0xffff818280e0>
           │   │      └ <Command main>
           │   └ <function Context.invoke at 0xffff81a9c540>
           └ <click.core.Context object at 0xffff82544e60>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 794, in invoke
    return callback(*args, **kwargs)
           │         │       └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │         └ ()
           └ <function main at 0xffff818280e0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 413, in main
    run(
    └ <function run at 0xffff81a9bb00>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0xffff818a4180>
    └ <uvicorn.server.Server object at 0xffff81baca70>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0xffff818a4220>
           │       │   └ <uvicorn.server.Server object at 0xffff81baca70>
           │       └ <function run at 0xffff82a7c680>
           └ <module 'asyncio' from '/usr/local/lib/python3.12/asyncio/__init__.py'>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0xffff817d67a0>
           │      └ <function Runner.run at 0xffff824e02c0>
           └ <asyncio.runners.Runner object at 0xffff81d558e0>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /app/.venv/lib/python3.12/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <cyfunction Loop.run_until_complete at 0xffff817a8450>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0xffff81d558e0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff7ca098e0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff7c98bc...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff7c9...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0xffff80454aa0>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff7ca098e0>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff7c98bc...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff7c9...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff7c98bc...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff7c9...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff7c973770>
          └ <fastapi.applications.FastAPI object at 0xffff80454aa0>
> File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff7c8b3d80>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff7c9...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <app.core.middleware.LoggingMiddleware object at 0xffff7c9736b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff7c973770>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0xffff803f4f40>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [IntegrityError('(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <c...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0xffff80222dc0>
    └ <contextlib._GeneratorContextManager object at 0xffff7c98bd40>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff7c8b3ec0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff7c98b560>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff7c9736b0>>
                     └ <app.core.middleware.LoggingMiddleware object at 0xffff7c9736b0>

  File "/app/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0xffff7c98b560>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff7c8b3ec0>

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ IntegrityError('(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class \'asyncpg.exceptions.NotNullViolationError\'>:...
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff7c8b3240>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff7cccac30>
          └ <app.core.middleware.LoggingMiddleware object at 0xffff7c9736b0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff7c8b3240>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff7ce384a0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0xffff7cccac30>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff7c8b3240>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0xffff80367cb0>
          │                            │    └ <fastapi.routing.APIRouter object at 0xffff803418b0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff7ce384a0>
          └ <function wrap_app_handling_exceptions at 0xffff8042b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff7c8718a0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          └ <fastapi.routing.APIRouter object at 0xffff803418b0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff7c8718a0>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff803418b0>>
          └ <fastapi.routing.APIRouter object at 0xffff803418b0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff7c8718a0>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │     └ <function Route.handle at 0xffff802d45e0>
          └ APIRoute(path='/api/v1/staffs/', name='create_staff', methods=['POST'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff7c8718a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │    └ <function request_response.<locals>.app at 0xffff7c658f40>
          └ APIRoute(path='/api/v1/staffs/', name='create_staff', methods=['POST'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff7c8718a0>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          │                            │    └ <starlette.requests.Request object at 0xffff803020c0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff7c871bc0>
          └ <function wrap_app_handling_exceptions at 0xffff8042b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff7c8716c0>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff7c8b3ba0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.3', 8000), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0xffff7c871bc0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0xffff803020c0>
                     └ <function get_request_handler.<locals>.app at 0xffff7c658e00>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0xffff8042af20>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0xffff7c97cfe0>, 'current_staff': <app.staffs.models.Staff obje...
                 │         └ <function create_staff at 0xffff7e3c5760>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/app/staffs/routers.py", line 91, in create_staff
    new_staff = await staff_service.create(db, staff_in)
                      │             │      │   └ StaffCreate(username='suengx33', is_active=True, is_superuser=False, password='suengx123')
                      │             │      └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0xffff7c97cfe0>
                      │             └ <function create at 0xffff7e3c47c0>
                      └ <module 'app.staffs.services' from '/app/app/staffs/services.py'>

  File "/app/app/staffs/services.py", line 40, in create
    await db.commit()
          │  └ <function AsyncSession.commit at 0xffff7e828a40>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0xffff7c97cfe0>

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/ext/asyncio/session.py", line 1014, in commit
    await greenlet_spawn(self.sync_session.commit)
          │              │    │            └ <function Session.commit at 0xffff7e880180>
          │              │    └ <sqlalchemy.orm.session.Session object at 0xffff7c97d400>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0xffff7c97cfe0>
          └ <function greenlet_spawn at 0xffff7f57cb80>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0xffff7a3c1080 (otid=0xffff8036a3d0) dead>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2032, in commit
    trans.commit(_to_root=True)
    │     └ <function SessionTransaction.commit at 0xffff7e87f100>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0xffff7a4a4ad0>
  File "<string>", line 2, in commit
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {'_to_root': True}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0xffff7a4a4ad0>
                └ <function SessionTransaction.commit at 0xffff7e87f060>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1313, in commit
    self._prepare_impl()
    │    └ <function SessionTransaction._prepare_impl at 0xffff7e87ef20>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0xffff7a4a4ad0>
  File "<string>", line 2, in _prepare_impl
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state_changes.py", line 139, in _go
    ret_value = fn(self, *arg, **kw)
                │  │      │      └ {}
                │  │      └ ()
                │  └ <sqlalchemy.orm.session.SessionTransaction object at 0xffff7a4a4ad0>
                └ <function SessionTransaction._prepare_impl at 0xffff7e87ee80>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 1288, in _prepare_impl
    self.session.flush()
    │    │       └ <function Session.flush at 0xffff7e883060>
    │    └ <sqlalchemy.orm.session.Session object at 0xffff7c97d400>
    └ <sqlalchemy.orm.session.SessionTransaction object at 0xffff7a4a4ad0>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4345, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0xffff7e883240>
    └ <sqlalchemy.orm.session.Session object at 0xffff7c97d400>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4480, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/__init__.py'>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/langhelpers.py", line 224, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0xffff7c8c6380>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class \'asyncpg.exceptions.NotNullViolationError\'>:...
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 4441, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0xffff7e9d39c0>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0xffff7c98fef0>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0xffff7c98fef0>
    │   └ <function SaveUpdateAll.execute at 0xffff7e87c540>
    └ SaveUpdateAll(Mapper[Staff(staffs)])
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0xffff7e95b1a0>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py'>
    │    └ <module 'sqlalchemy.util.preloaded' from '/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/preloaded.py'>
    └ <module 'sqlalchemy.util' from '/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/__init__.py'>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0xffff7e86eac0>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/persistence.py", line 1233, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0xffff7eaf87c0>
             └ <sqlalchemy.engine.base.Connection object at 0xffff7c97d370>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1415, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0xffff7cb33140>>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0xffff7eaf8ae0>
           └ <sqlalchemy.engine.base.Connection object at 0xffff7c97d370>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0xffff7eaf8cc0>
          └ <sqlalchemy.engine.base.Connection object at 0xffff7c97d370>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1842, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0xffff7eaf8d60>
           └ <sqlalchemy.engine.base.Connection object at 0xffff7c97d370>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0xffff7eaf8fe0>
    └ <sqlalchemy.engine.base.Connection object at 0xffff7c97d370>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null value in column "email" of relation "staffs" viola...
          │                    │              └ (<class 'sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_dbapi.IntegrityError'>, IntegrityError('<class \'asyncpg.e...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class \'asyncpg.exceptions.NotNullViolationError\'>:...
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0xffff7ec7f560>
    │    └ <sqlalchemy.dialects.postgresql.asyncpg.PGDialect_asyncpg object at 0xffff7ed2eb40>
    └ <sqlalchemy.engine.base.Connection object at 0xffff7c97d370>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('suengx33', '$2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq', True, False)
    │      │       └ 'INSERT INTO staffs (username, hashed_password, is_active, is_superuser) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BOOLEAN, $4::B...
    │      └ <function AsyncAdapt_asyncpg_cursor.execute at 0xffff7e525e40>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 580, in execute
    self._adapt_connection.await_(
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncpg_cursor._prepare_and_execute at 0xffff7c7038b0>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0xffff7a3c1080 (otid=0xffff8036a3d0) dead>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <coroutine object AsyncAdapt_asyncpg_connection._rollback_and_discard at 0xffff7c811560>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 558, in _prepare_and_execute
    self._handle_exception(error)
    │    └ <function AsyncAdapt_asyncpg_cursor._handle_exception at 0xffff7e525c60>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 508, in _handle_exception
    self._adapt_connection._handle_exception(error)
    │    │                                   └ NotNullViolationError('null value in column "email" of relation "staffs" violates not-null constraint')
    │    └ <member '_adapt_connection' of 'AsyncAdapt_asyncpg_cursor' objects>
    └ <sqlalchemy.dialects.postgresql.asyncpg.AsyncAdapt_asyncpg_cursor object at 0xffff7a49d000>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/dialects/postgresql/asyncpg.py", line 792, in _handle_exception
    raise translated_error from error
          │                     └ NotNullViolationError('null value in column "email" of relation "staffs" violates not-null constraint')
          └ IntegrityError('<class \'asyncpg.exceptions.NotNullViolationError\'>: null value in column "email" of relation "staffs" viola...

sqlalchemy.exc.IntegrityError: (sqlalchemy.dialects.postgresql.asyncpg.IntegrityError) <class 'asyncpg.exceptions.NotNullViolationError'>: null value in column "email" of relation "staffs" violates not-null constraint
DETAIL:  Failing row contains (10, suengx33, null, $2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq, null, null, t, f, 2025-07-15 15:33:49.743533+08, 2025-07-15 15:33:49.743533+08).
[SQL: INSERT INTO staffs (username, hashed_password, is_active, is_superuser) VALUES ($1::VARCHAR, $2::VARCHAR, $3::BOOLEAN, $4::BOOLEAN) RETURNING staffs.id, staffs.created_at, staffs.updated_at]
[parameters: ('suengx33', '$2b$12$ifIBrE2beXdn/6byjeA/0OooVdmBOXcsXT1w3hEVj9GI1y0ncUWqq', True, False)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-07-15 10:40:27 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/cases/registration
2025-07-15 10:40:27 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('body', 'user_id_card'), 'msg': 'Field required', 'input': {'user_name': '李晓辉', 'case_type': 'debt', 'creditor_name': '李晓辉', 'debtor_name': '王薇'}}, {'type': 'missing', 'loc': ('body', 'user_phone'), 'msg': 'Field required', 'input': {'user_name': '李晓辉', 'case_type': 'debt', 'creditor_name': '李晓辉', 'debtor_name': '王薇'}}] for request body: None
2025-07-15 10:40:27 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/cases/registration - 状态码: 422 - 耗时: 0.0548秒
2025-07-15 10:41:36 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/cases/registration
2025-07-15 10:41:36 | ERROR | app.core.middleware:validation_exception_handler:27 - Validation error: [{'type': 'missing', 'loc': ('body', 'user_id_card'), 'msg': 'Field required', 'input': {'user_name': '李晓辉', 'case_type': 'debt', 'creditor_name': '李晓辉', 'debtor_name': '王薇'}}, {'type': 'missing', 'loc': ('body', 'user_phone'), 'msg': 'Field required', 'input': {'user_name': '李晓辉', 'case_type': 'debt', 'creditor_name': '李晓辉', 'debtor_name': '王薇'}}] for request body: None
2025-07-15 10:41:36 | INFO | app.core.middleware:dispatch:63 - 完成请求: POST http://localhost:8000/api/v1/cases/registration - 状态码: 422 - 耗时: 0.0771秒
2025-07-15 10:46:16 | INFO | app.core.middleware:dispatch:55 - 开始请求: POST http://localhost:8000/api/v1/cases/registration
2025-07-15 10:46:16 | ERROR | app.core.middleware:dispatch:67 - 请求异常: POST http://localhost:8000/api/v1/cases/registration - 错误: When initializing mapper Mapper[Evidence(evidences)], expression 'EvidenceFeatureGroupAssociation' failed to locate a name ('EvidenceFeatureGroupAssociation'). If this is a class name, consider adding this relationship() to the <class 'app.evidences.models.Evidence'> class after both dependent classes have been defined.
2025-07-15 10:46:16 | ERROR | app.core.middleware:global_exception_handler:40 - Unhandled error: When initializing mapper Mapper[Evidence(evidences)], expression 'EvidenceFeatureGroupAssociation' failed to locate a name ('EvidenceFeatureGroupAssociation'). If this is a class name, consider adding this relationship() to the <class 'app.evidences.models.Evidence'> class after both dependent classes have been defined.
Traceback (most recent call last):

  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/clsregistry.py", line 516, in _resolve_name
    rval = d[token]
           │ └ 'EvidenceFeatureGroupAssociation'
           └ {}
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/util/_collections.py", line 345, in __missing__
    self[key] = val = self.creator(key)
    │    │            │    │       └ 'EvidenceFeatureGroupAssociation'
    │    │            │    └ <bound method _class_resolver._access_cls of <sqlalchemy.orm.clsregistry._class_resolver object at 0xffff8d22fe80>>
    │    │            └ {}
    │    └ 'EvidenceFeatureGroupAssociation'
    └ {}
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/clsregistry.py", line 484, in _access_cls
    return self.fallback[key]
           │    │        └ 'EvidenceFeatureGroupAssociation'
           │    └ <member 'fallback' of '_class_resolver' objects>
           └ <sqlalchemy.orm.clsregistry._class_resolver object at 0xffff8d22fe80>

KeyError: 'EvidenceFeatureGroupAssociation'


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "/app/.venv/bin/uvicorn", line 10, in <module>
    sys.exit(main())
    │   │    └ <Command main>
    │   └ <built-in function exit>
    └ <module 'sys' (built-in)>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1442, in __call__
    return self.main(*args, **kwargs)
           │    │     │       └ {}
           │    │     └ ()
           │    └ <function Command.main at 0xffff9249d620>
           └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1363, in main
    rv = self.invoke(ctx)
         │    │      └ <click.core.Context object at 0xffff932d5340>
         │    └ <function Command.invoke at 0xffff9249d300>
         └ <Command main>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 1226, in invoke
    return ctx.invoke(self.callback, **ctx.params)
           │   │      │    │           │   └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │   │      │    │           └ <click.core.Context object at 0xffff932d5340>
           │   │      │    └ <function main at 0xffff922280e0>
           │   │      └ <Command main>
           │   └ <function Context.invoke at 0xffff9249c540>
           └ <click.core.Context object at 0xffff932d5340>
  File "/app/.venv/lib/python3.12/site-packages/click/core.py", line 794, in invoke
    return callback(*args, **kwargs)
           │         │       └ {'host': '0.0.0.0', 'port': 8000, 'app': 'app.main:app', 'uds': None, 'fd': None, 'reload': False, 'reload_dirs': (), 'reload...
           │         └ ()
           └ <function main at 0xffff922280e0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 413, in main
    run(
    └ <function run at 0xffff9249bb00>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/main.py", line 580, in run
    server.run()
    │      └ <function Server.run at 0xffff922a4180>
    └ <uvicorn.server.Server object at 0xffff925ac920>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/server.py", line 67, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ None
           │       │   │    └ <function Server.serve at 0xffff922a4220>
           │       │   └ <uvicorn.server.Server object at 0xffff925ac920>
           │       └ <function run at 0xffff9347c680>
           └ <module 'asyncio' from '/usr/local/lib/python3.12/asyncio/__init__.py'>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 195, in run
    return runner.run(main)
           │      │   └ <coroutine object Server.serve at 0xffff921d67a0>
           │      └ <function Runner.run at 0xffff92ee02c0>
           └ <asyncio.runners.Runner object at 0xffff927566f0>
  File "/usr/local/lib/python3.12/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           │    │     │                  └ <Task pending name='Task-1' coro=<Server.serve() running at /app/.venv/lib/python3.12/site-packages/uvicorn/server.py:71> wai...
           │    │     └ <cyfunction Loop.run_until_complete at 0xffff921a8450>
           │    └ <uvloop.Loop running=True closed=False debug=False>
           └ <asyncio.runners.Runner object at 0xffff927566f0>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff924bb740>
  File "/app/.venv/lib/python3.12/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8d3837...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8d3...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0xffff90e06a50>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0xffff924bb740>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8d3837...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8d3...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
  File "/app/.venv/lib/python3.12/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8d3837...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8d3...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff8d3830e0>
          └ <fastapi.applications.FastAPI object at 0xffff90e06a50>
> File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0xffff92227920>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0xffff8d3...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │    └ <app.core.middleware.LoggingMiddleware object at 0xffff8d3830b0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0xffff8d3830e0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 176, in __call__
    with recv_stream, send_stream, collapse_excgroups():
         │            │            └ <function collapse_excgroups at 0xffff90df4f40>
         │            └ MemoryObjectSendStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_receive...
         └ MemoryObjectReceiveStream(_state=MemoryObjectStreamState(max_buffer_size=0, buffer=deque([]), open_send_channels=0, open_rece...
  File "/usr/local/lib/python3.12/contextlib.py", line 158, in __exit__
    self.gen.throw(value)
    │    │   │     └ ExceptionGroup('unhandled errors in a TaskGroup', [InvalidRequestError("When initializing mapper Mapper[Evidence(evidences)],...
    │    │   └ <method 'throw' of 'generator' objects>
    │    └ <generator object collapse_excgroups at 0xffff8d093ed0>
    └ <contextlib._GeneratorContextManager object at 0xffff8d384b60>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_utils.py", line 82, in collapse_excgroups
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 178, in __call__
    response = await self.dispatch_func(request, call_next)
                     │    │             │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff8d647ce0>
                     │    │             └ <starlette.middleware.base._CachedRequest object at 0xffff8d3839e0>
                     │    └ <bound method LoggingMiddleware.dispatch of <app.core.middleware.LoggingMiddleware object at 0xffff8d3830b0>>
                     └ <app.core.middleware.LoggingMiddleware object at 0xffff8d3830b0>

  File "/app/app/core/middleware.py", line 58, in dispatch
    response = await call_next(request)
                     │         └ <starlette.middleware.base._CachedRequest object at 0xffff8d3839e0>
                     └ <function BaseHTTPMiddleware.__call__.<locals>.call_next at 0xffff8d647ce0>

  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 156, in call_next
    raise app_exc
          └ InvalidRequestError("When initializing mapper Mapper[Evidence(evidences)], expression 'EvidenceFeatureGroupAssociation' faile...
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/base.py", line 141, in coro
    await self.app(scope, receive_or_disconnect, send_no_error)
          │    │   │      │                      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8d2349a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │    └ <starlette.middleware.cors.CORSMiddleware object at 0xffff8d382a20>
          └ <app.core.middleware.LoggingMiddleware object at 0xffff8d3830b0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
          │    │   │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8d2349a0>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff8d382ff0>
          └ <starlette.middleware.cors.CORSMiddleware object at 0xffff8d382a20>
  File "/app/.venv/lib/python3.12/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.send_no_error at 0xffff8d2349a0>
          │                            │    │    │     │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0xffff8d384d40>
          │                            │    └ <fastapi.routing.APIRouter object at 0xffff90e525a0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0xffff8d382ff0>
          └ <function wrap_app_handling_exceptions at 0xffff90e2b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8d1e6700>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          └ <fastapi.routing.APIRouter object at 0xffff90e525a0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8d1e6700>
          │    │                │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0xffff90e525a0>>
          └ <fastapi.routing.APIRouter object at 0xffff90e525a0>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 734, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8d1e6700>
          │     │      │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │     └ <function Route.handle at 0xffff90cd45e0>
          └ APIRoute(path='/api/v1/cases/registration', name='register_case', methods=['POST'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8d1e6700>
          │    │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │    └ <function request_response.<locals>.app at 0xffff8d076340>
          └ APIRoute(path='/api/v1/cases/registration', name='register_case', methods=['POST'])
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8d1e6700>
          │                            │    │        │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          │                            │    └ <starlette.requests.Request object at 0xffff8d384e60>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0xffff8d1e6660>
          └ <function wrap_app_handling_exceptions at 0xffff90e2b100>
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/app/.venv/lib/python3.12/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0xffff8d1e6520>
          │   │      └ <function BaseHTTPMiddleware.__call__.<locals>.call_next.<locals>.receive_or_disconnect at 0xffff8d237420>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.23.0.3', 8000), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0xffff8d1e6660>
  File "/app/.venv/lib/python3.12/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0xffff8d384e60>
                     └ <function get_request_handler.<locals>.app at 0xffff8d0762a0>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0xffff90e2af20>
  File "/app/.venv/lib/python3.12/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0xffff8d444ec0>, 'request': CaseRegistrationRequest(user_name='...
                 │         └ <function register_case at 0xffff8eacdd00>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/app/cases/routers.py", line 125, in register_case
    result = await register_case_with_user(db, request)
                   │                       │   └ CaseRegistrationRequest(user_name='李晓辉', user_id_card=None, user_phone=None, description=None, case_type=<CaseType.DEBT: 'deb...
                   │                       └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0xffff8d444ec0>
                   └ <function register_case_with_user at 0xffff8eaccea0>

  File "/app/app/cases/services.py", line 111, in register_case_with_user
    user = await create_user(db, user_in)
                 │           │   └ UserCreate(name='李晓辉', id_card=None, phone=None)
                 │           └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0xffff8d444ec0>
                 └ <function create at 0xffff8edcb060>

  File "/app/app/users/services.py", line 29, in create
    db_obj = User(
             └ <class 'app.users.models.User'>

  File "<string>", line 4, in __init__
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/state.py", line 566, in _initialize_instance
    manager.dispatch.init(self, args, kwargs)
    │       │        │    │     │     └ {'name': '李晓辉', 'id_card': None, 'phone': None}
    │       │        │    │     └ ()
    │       │        │    └ <sqlalchemy.orm.state.InstanceState object at 0xffff8d0a5970>
    │       │        └ <member 'init' of 'InstanceEventsDispatch' objects>
    │       └ <sqlalchemy.event.base.InstanceEventsDispatch object at 0xffff8edcaa30>
    └ <ClassManager of <class 'app.users.models.User'> at ffff8ee10820>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/event/attr.py", line 497, in __call__
    fn(*args, **kw)
    │   │       └ {}
    │   └ (<sqlalchemy.orm.state.InstanceState object at 0xffff8d0a5970>, (), {'name': '李晓辉', 'id_card': None, 'phone': None})
    └ <function _event_on_init at 0xffff8f35ec00>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4406, in _event_on_init
    instrumenting_mapper._check_configure()
    │                    └ <function Mapper._check_configure at 0xffff8f356ac0>
    └ <Mapper at 0xffff8f7fb440; User>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    │                      │    └ <sqlalchemy.orm.decl_api.registry object at 0xffff8fa067e0>
    │                      └ <Mapper at 0xffff8f7fb440; User>
    └ <function _configure_registries at 0xffff8f35e840>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    │                        │           └ True
    │                        └ set()
    └ <function _do_configure_registries at 0xffff8f35e980>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
    │      └ <function Mapper._post_configure_properties at 0xffff8f356980>
    └ <Mapper at 0xffff8d75e1e0; Evidence>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/mapper.py", line 2418, in _post_configure_properties
    prop.init()
    │    └ <function MapperProperty.init at 0xffff8f3fea20>
    └ <_RelationshipDeclared at 0xffff8eaced50; feature_groups>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/interfaces.py", line 589, in init
    self.do_init()
    │    └ <function RelationshipProperty.do_init at 0xffff8f351300>
    └ <_RelationshipDeclared at 0xffff8eaced50; feature_groups>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1656, in do_init
    self._setup_entity()
    │    └ <function RelationshipProperty._setup_entity at 0xffff8f351620>
    └ <_RelationshipDeclared at 0xffff8eaced50; feature_groups>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/relationships.py", line 1866, in _setup_entity
    self._clsregistry_resolve_name(argument)(),
    │    │                         └ 'EvidenceFeatureGroupAssociation'
    │    └ <property object at 0xffff8f4cbd30>
    └ <_RelationshipDeclared at 0xffff8eaced50; feature_groups>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/clsregistry.py", line 520, in _resolve_name
    self._raise_for_name(name, err)
    │    │               └ 'EvidenceFeatureGroupAssociation'
    │    └ <function _class_resolver._raise_for_name at 0xffff8f286ca0>
    └ <sqlalchemy.orm.clsregistry._class_resolver object at 0xffff8d22fe80>
  File "/app/.venv/lib/python3.12/site-packages/sqlalchemy/orm/clsregistry.py", line 501, in _raise_for_name
    raise exc.InvalidRequestError(
          │   └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from '/app/.venv/lib/python3.12/site-packages/sqlalchemy/exc.py'>

sqlalchemy.exc.InvalidRequestError: When initializing mapper Mapper[Evidence(evidences)], expression 'EvidenceFeatureGroupAssociation' failed to locate a name ('EvidenceFeatureGroupAssociation'). If this is a class name, consider adding this relationship() to the <class 'app.evidences.models.Evidence'> class after both dependent classes have been defined.
