## MODIFIED Requirements

### Requirement: 文书预览功能
系统 SHALL 提供文书预览功能，显示文书的完整内容。

#### Scenario: 预览文书
- **WHEN** 用户点击列表中的某个文书
- **THEN** 系统 SHALL 在预览区域显示该文书的完整内容
- **AND** 系统 SHALL 保持原始文档的格式样式（字体、段落、表格等）
- **AND** 系统 SHALL 确保预览格式与编辑模式和导出格式完全一致
- **AND** 系统 SHALL 正确渲染所有格式属性，包括字体大小、表格样式、文本对齐等
- **AND** 系统 SHALL 使用与编辑器相同的扩展配置和样式处理逻辑
- **AND** 系统 SHALL 提供"编辑"按钮
- **AND** 系统 SHALL 如果文书状态为"发布"，则提供"生成"按钮
- **AND** 系统 SHALL 如果文书状态为"草稿"，则提供"导出 PDF"按钮
- **AND** 系统 SHALL 如果文书状态为"发布"，则提供"导出 PDF"按钮（在预览模式下）

### Requirement: 编辑文书功能
系统 SHALL 提供编辑已存在文书的功能。

#### Scenario: 进入编辑模式
- **WHEN** 用户在预览模式下点击"编辑"按钮
- **THEN** 系统 SHALL 进入富文本编辑模式
- **AND** 系统 SHALL 显示基于 Tiptap 的富文本编辑器
- **AND** 系统 SHALL 加载当前文书的完整内容到编辑器
- **AND** 系统 SHALL 显示"保存"和"取消"按钮
- **AND** 系统 SHALL 不显示"导出 PDF"按钮
- **AND** 系统 SHALL 在复制/剪切操作时正确处理剪贴板内容，不会因编辑器未初始化而报错

#### Scenario: 保存编辑
- **WHEN** 用户在编辑模式下修改内容并点击"保存"
- **THEN** 系统 SHALL 弹出命名对话框（仅新建模式）
- **AND** 系统 SHALL 在编辑模式下直接保存内容（不弹出对话框）
- **AND** 系统 SHALL 保存修改后的内容
- **AND** 系统 SHALL 返回预览模式显示更新后的文书
- **AND** 系统 SHALL 更新文书的更新时间
- **AND** 系统 SHALL 确保预览显示的格式与编辑时完全一致

