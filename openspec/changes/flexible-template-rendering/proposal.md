# Change: 灵活的模板渲染系统

## Why

当前系统对模板类型（要素式/陈述式/混合式）和表格结构有硬编码假设，无法支持复杂的模板场景，如"送达地址确认书"这类包含：
- 复杂的表格合并（横向和纵向）
- 条件显示/隐藏的内容（如自然人/法人切换）
- 复选框等交互元素
- 表格外的占位符（签名、日期等）
- 混合式内容（表格+段落）

需要设计一个更灵活的渲染系统，解耦模板类型和渲染逻辑，支持配置驱动的渲染方式。

## What Changes

- **解耦模板类型和渲染逻辑**：使用渲染配置而不是硬编码的类型判断
- **支持复杂表格结构**：增强对合并单元格（colspan/rowspan）的预览和编辑支持
- **支持条件渲染**：支持基于表单数据的条件显示/隐藏
- **支持表格外占位符**：扩展占位符提取和处理逻辑，支持段落、标题等节点中的占位符
- **支持交互元素**：支持复选框、单选按钮等交互元素的条件渲染
- **灵活的单元格渲染器**：允许为单元格配置不同的渲染器，而不是基于类型硬编码
- **混合内容支持**：支持同一模板中同时包含表格和段落内容

## Impact

- **Affected specs**: 
  - `template-system` - 新增灵活的渲染配置规范
  - `document-generation` - 修改表单预览和编辑逻辑
- **Affected code**: 
  - `frontend/components/document-generation/` - 重构渲染逻辑
  - `frontend/components/template-editor/` - 增强模板编辑能力
  - `app/template_editor/` - 增强占位符提取和条件渲染支持
  - `app/document_generation/` - 增强文档生成逻辑

